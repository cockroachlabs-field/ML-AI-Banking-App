(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,66449,34713],{615071:(e,i,t)=>{"use strict";t.d(i,{Z:()=>x});var a=t(487462),l=t(263366),n=t(894578);function r(e,i){return e.replace(RegExp("(^|\\s)"+i+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t(45697);var s=t(667294),o=t(973935);let d={disabled:!1};var u=t(500220),c="unmounted",p="exited",m="entering",g="entered",h="exiting",_=function(e){function i(i,t){a=e.call(this,i,t)||this;var a,l,n=t&&!t.isMounting?i.enter:i.appear;return a.appearStatus=null,i.in?n?(l=p,a.appearStatus=m):l=g:l=i.unmountOnExit||i.mountOnEnter?c:p,a.state={status:l},a.nextCallback=null,a}(0,n.Z)(i,e),i.getDerivedStateFromProps=function(e,i){return e.in&&i.status===c?{status:p}:null};var t=i.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(e){var i=null;if(e!==this.props){var t=this.state.status;this.props.in?t!==m&&t!==g&&(i=m):(t===m||t===g)&&(i=h)}this.updateStatus(!1,i)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var e,i,t,a=this.props.timeout;return e=i=t=a,null!=a&&"number"!=typeof a&&(e=a.exit,i=a.enter,t=void 0!==a.appear?a.appear:i),{exit:e,enter:i,appear:t}},t.updateStatus=function(e,i){void 0===e&&(e=!1),null!==i?(this.cancelNextCallback(),i===m?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===p&&this.setState({status:c})},t.performEnter=function(e){var i=this,t=this.props.enter,a=this.context?this.context.isMounting:e,l=this.props.nodeRef?[a]:[o.findDOMNode(this),a],n=l[0],r=l[1],s=this.getTimeouts(),u=a?s.appear:s.enter;if(!e&&!t||d.disabled){this.safeSetState({status:g},function(){i.props.onEntered(n)});return}this.props.onEnter(n,r),this.safeSetState({status:m},function(){i.props.onEntering(n,r),i.onTransitionEnd(u,function(){i.safeSetState({status:g},function(){i.props.onEntered(n,r)})})})},t.performExit=function(){var e=this,i=this.props.exit,t=this.getTimeouts(),a=this.props.nodeRef?void 0:o.findDOMNode(this);if(!i||d.disabled){this.safeSetState({status:p},function(){e.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:h},function(){e.props.onExiting(a),e.onTransitionEnd(t.exit,function(){e.safeSetState({status:p},function(){e.props.onExited(a)})})})},t.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(e,i){i=this.setNextCallback(i),this.setState(e,i)},t.setNextCallback=function(e){var i=this,t=!0;return this.nextCallback=function(a){t&&(t=!1,i.nextCallback=null,e(a))},this.nextCallback.cancel=function(){t=!1},this.nextCallback},t.onTransitionEnd=function(e,i){this.setNextCallback(i);var t=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(!t||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[t,this.nextCallback],n=l[0],r=l[1];this.props.addEndListener(n,r)}null!=e&&setTimeout(this.nextCallback,e)},t.render=function(){var e=this.state.status;if(e===c)return null;var i=this.props,t=i.children,a=(i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef,(0,l.Z)(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(u.Z.Provider,{value:null},"function"==typeof t?t(e,a):s.cloneElement(s.Children.only(t),a))},i}(s.Component);function y(){}_.contextType=u.Z,_.propTypes={},_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y,onEntering:y,onEntered:y,onExit:y,onExiting:y,onExited:y},_.UNMOUNTED=c,_.EXITED=p,_.ENTERING=m,_.ENTERED=g,_.EXITING=h;var f=function(e,i){return e&&i&&i.split(" ").forEach(function(i){e.classList?e.classList.remove(i):"string"==typeof e.className?e.className=r(e.className,i):e.setAttribute("class",r(e.className&&e.className.baseVal||"",i))})},v=function(e){function i(){for(var i,t=arguments.length,a=Array(t),l=0;l<t;l++)a[l]=arguments[l];return(i=e.call.apply(e,[this].concat(a))||this).appliedClasses={appear:{},enter:{},exit:{}},i.onEnter=function(e,t){var a=i.resolveArguments(e,t),l=a[0],n=a[1];i.removeClasses(l,"exit"),i.addClass(l,n?"appear":"enter","base"),i.props.onEnter&&i.props.onEnter(e,t)},i.onEntering=function(e,t){var a=i.resolveArguments(e,t),l=a[0],n=a[1];i.addClass(l,n?"appear":"enter","active"),i.props.onEntering&&i.props.onEntering(e,t)},i.onEntered=function(e,t){var a=i.resolveArguments(e,t),l=a[0],n=a[1]?"appear":"enter";i.removeClasses(l,n),i.addClass(l,n,"done"),i.props.onEntered&&i.props.onEntered(e,t)},i.onExit=function(e){var t=i.resolveArguments(e)[0];i.removeClasses(t,"appear"),i.removeClasses(t,"enter"),i.addClass(t,"exit","base"),i.props.onExit&&i.props.onExit(e)},i.onExiting=function(e){var t=i.resolveArguments(e)[0];i.addClass(t,"exit","active"),i.props.onExiting&&i.props.onExiting(e)},i.onExited=function(e){var t=i.resolveArguments(e)[0];i.removeClasses(t,"exit"),i.addClass(t,"exit","done"),i.props.onExited&&i.props.onExited(e)},i.resolveArguments=function(e,t){return i.props.nodeRef?[i.props.nodeRef.current,e]:[e,t]},i.getClassNames=function(e){var t=i.props.classNames,a="string"==typeof t,l=a?(a&&t?t+"-":"")+e:t[e],n=a?l+"-active":t[e+"Active"],r=a?l+"-done":t[e+"Done"];return{baseClassName:l,activeClassName:n,doneClassName:r}},i}(0,n.Z)(i,e);var t=i.prototype;return t.addClass=function(e,i,t){var a,l=this.getClassNames(i)[t+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===i&&"done"===t&&n&&(l+=" "+n),"active"===t&&e&&e.scrollTop,l&&(this.appliedClasses[i][t]=l,a=l,e&&a&&a.split(" ").forEach(function(i){var t,a;return t=e,a=i,void(t.classList?t.classList.add(a):(t.classList?a&&t.classList.contains(a):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+a+" "))||("string"==typeof t.className?t.className=t.className+" "+a:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+a)))}))},t.removeClasses=function(e,i){var t=this.appliedClasses[i],a=t.base,l=t.active,n=t.done;this.appliedClasses[i]={},a&&f(e,a),l&&f(e,l),n&&f(e,n)},t.render=function(){var e=this.props,i=(e.classNames,(0,l.Z)(e,["classNames"]));return s.createElement(_,(0,a.Z)({},i,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},i}(s.Component);v.defaultProps={classNames:""},v.propTypes={};let x=v},500220:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(667294);let l=a.createContext(null)},405410:e=>{"use strict";var i,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};t.hash="610a35d46510240eb58e262c1909310c",e.exports=t},327620:e=>{"use strict";var i,t,a,l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[a={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},a,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};l.hash="833cd5d58bc1ac105444aa923e882675",e.exports=l},225785:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};i.hash="17b1ebef1c9031212ecd7bd5be0e6151",e.exports=i},490644:e=>{"use strict";var i,t,a,l,n,r,s,o,d,u,c,p,m,g,h,_,y,f,v,x,S,b,E,P=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],t=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},o={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},c={alias:"imageOrig",args:d=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},m={alias:"image736x",args:p=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"736x")'},h={alias:"image564x",args:g=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"564x")'},y={alias:"image474x",args:_=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"474x")'},v={alias:"image236x",args:f=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"236x")'},b={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:S=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"additionalImageOrig",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x=[n,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:u,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:p,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"FlashlightPagePinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[a,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,n,r,s,o,c,m,h,y,v,b,E={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:S,storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"FlashlightPagePinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,n,r,s,o,c,m,h,y,v,b,E,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"2fbe7c612e0b9e55147a27059ea1cb52fb3420abce761a50d75549302dd620bd",metadata:{},name:"FlashlightPagePinQuery",operationKind:"query",text:null}});P.hash="3e072d3a492316c79a629968e8cd0a07",e.exports=P,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let i=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[i]=e}}}(P)},568189:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGridContainer_pin"}],type:"Pin",abstractKey:null};i.hash="903db2b432ad0f02adcdca0d6515898d",e.exports=i},378605:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGridContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};i.hash="bcca3e8407135d3e3c7a0a8bacfabeff",e.exports=i},52892:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="3a8409077905af94eb39568e4a5a57fc",e.exports=i},43027:e=>{"use strict";var i,t,a,l,n,r,s,o,d,u,c,p,m,g,h,_,y,f,v,x,S,b,E,P,I=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],t=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o={alias:"imageOrig",args:r=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},u={alias:"image736x",args:d=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},p={alias:"image564x",args:c=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"564x")'},g={alias:"image474x",args:m=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},_={alias:"image236x",args:h=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'},y={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},f={alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[n,{alias:"imageOrig",args:r,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:"image736x",args:d,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"image564x",args:c,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"564x")'},{alias:"image474x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},{alias:"image236x",args:h,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'}],storageKey:null},S={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:x=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:"additionalImageOrig",args:r,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v=[n,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:s,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:c,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:h,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:v,storageKey:'additionalImagesPerSpec(spec:"236x")'}],storageKey:null}],storageKey:null},b={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:x,storageKey:null},E={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},y,{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,l,n,o,u,p,g,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[y,f],storageKey:null},S,b,E],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,l,n,o,u,p,g,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[y,f,P={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},S,b,E,P],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"67eedd3e1834ee184411ff81c5eeea7cf9dc9ec53a5e099459966ce5369828ee",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});I.hash="1647166e8b02809a5f8ccfca2dc5019a",e.exports=I,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let i=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[i]=e}}}(I)},781426:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="97621a830643ac50c2f15e7aa19a3b57",e.exports=i},468852:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="63b7c7cb48b269ec7bd096ebb0e37dfb",e.exports=i},482495:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};i.hash="dcd02fa7b3bcd48f4e3b8376109da44f",e.exports=i},966498:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="12c4e9ff114eb53a8da6ef7727d72985",e.exports=i},676684:e=>{"use strict";var i,t,a,l,n,r,s,o,d,u,c,p,m,g,h,_,y,f,v,x,S,b,E,P,I,T,w,k,A,R,C,F,D,O,j,L,N,M,Z,K,z,U,B,H,$,G,V,W,Y,q,Q,X,J,ee,ei=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],t=[{kind:"Variable",name:"pin",variableName:"pinId"}],a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},y={alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},f={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},E=[v={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],P=[a,v,x,S,b],I={alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},F={alias:"imageOrig",args:w=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C=[k={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},_,A={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],storageKey:'images(spec:"orig")'},O={alias:"image564x",args:D=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"564x")'},L={alias:"image736x",args:j=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"736x")'},M={alias:"image474x",args:N=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"474x")'},K={alias:"image236x",args:Z=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:C,storageKey:'images(spec:"236x")'},z={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},U={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null}],storageKey:null},H={alias:"additionalImageOrig",args:w,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B=[l,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[R,_,k],storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},Y={alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null},q={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[n,o,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[h,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[h,A],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[h,U,H,$={alias:"additionalImage564x",args:D,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"564x")'},G={alias:"additionalImage736x",args:j,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"736x")'},V={alias:"additionalImage474x",args:N,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"474x")'},W={alias:"additionalImage236x",args:Z,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:B,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[l,Y],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Q={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[h,U,H,$,G,V,W,{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[Y,l],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},J=[v,x,S,b,X={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],ee=[a,v,x,S,b,X],{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,l,n,r,s,o,d,u,c,p,m,g,y,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[f],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:E,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:E,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[a,I,h,T,_],storageKey:null},F,O,L,M,K,z,q,Q],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,l,n,r,s,o,d,u,c,p,m,g,y,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[f,X],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:J,storageKey:null},X],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[a,I,h,T,_,X],storageKey:null},F,O,L,M,K,z,q,Q,X],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"5f09d38fcc19ea4defe9a2ced0ea73c23f12ec0bc0e6d4bd4f24974e35d6e8ea",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});ei.hash="41066749b18be6f77425904cd44e3d69",e.exports=ei,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let i=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[i]=e}}}(ei)},875666:e=>{"use strict";var i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRep_pin",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};i.hash="ef57e3f96ab6a0ba7ea79d9d2bb3c326",e.exports=i},161186:e=>{"use strict";var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="120ad104e33b94ab10be1098dc10d74b",e.exports=i},469656:e=>{"use strict";var i,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};t.hash="3d7a6d04f923d00acfb2887f852aea16",e.exports=t},47737:e=>{"use strict";var i,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:i=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};t.hash="01a93671cde480baa2cfd8b781589acd",e.exports=t},460863:e=>{"use strict";var i,t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:i,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};t.hash="b7ea441f2c20a68b323088ebe3847835",e.exports=t},269458:(e,i,t)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return t(434788).Z}},361259:(e,i,t)=>{"use strict";t.d(i,{$:()=>u,r:()=>c});var a=t(667294),l=t(425288),n=t(497529),r=t(780280),s=t(829407),o=t(785893);let{Provider:d,useHook:u}=(0,l.Z)("PinRep");function c({children:e}){let{isAuthenticated:i}=(0,r.B)(),[t,l]=(0,a.useState)(!0),[u,c]=(0,a.useState)(!1),p=(0,n.Z)(1000069);(0,s.Z)(()=>{let e=async()=>{var e,t,a,n;if(!i){l(!1);return}let r=await p.fetchAllExperiences();r&&r.payload&&(null===(e=r.payload.experiences)||void 0===e?void 0:null===(t=e[1000069])||void 0===t?void 0:t.experience_id)===500417&&null!==(a=r.payload.experiences)&&void 0!==a&&null!==(n=a[1000069])&&void 0!==n&&n.display_data.hide_footer?p.viewExperience(1000069,500417):l(!1),c(!0)};e()});let m=(0,a.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:u,hidePinRepFooter:t}),[u,t]);return(0,o.jsx)(d,{value:m,children:e})}},187638:(e,i,t)=>{"use strict";function a(e){switch(e){case"flashlight":return"flashlight";case"stela":return"stela";case"stl":return"stl";default:return null}}function l({isShopTheLook:e,showFlashlightButton:i,showShopButton:t,showStelaDots:a}){return i&&!a?"flashlight":t?e?"stl":"stela":null}t.d(i,{W:()=>a,Z:()=>l})},813982:(e,i,t)=>{"use strict";t.d(i,{Z:()=>m});var a=t(667294),l=t(883119),n=t(890921),r=t(407043),s=t(356997),o=t(898781),d=t(829407),u=t(865607),c=t(143649),p=t(785893);function m({cropSource:e,filterOptions:i,filterType:t,handleFilterChange:m,viewParameter:g,viewType:h,title:_}){let{logContextEvent:y}=(0,r.v)(),f=(0,o.ZP)(),v=(0,n.Z)(),[x]=(0,a.useState)(""),[S,b]=(0,a.useState)(!0),E=v?14325:13469,P=()=>{y({event_type:13,component:E,view_type:h,view_parameter:g,aux_data:{commerce_data:JSON.stringify({source:(0,c.Z)({cropSource:e,viewType:h})}),filter_type:t}})};(0,d.Z)(()=>{P()});let I=a=>{var l,n;let r=i[a];y({event_type:101,component:E,view_type:h,view_parameter:g,aux_data:{commerce_data:JSON.stringify({source:(0,c.Z)({cropSource:e,viewType:h}),filter_value:null!==(l=null!==(n=r.string_value)&&void 0!==n?n:r.numeric_value)&&void 0!==l?l:r.search_type,select:!r.checked}),filter_type:t}}),m(a)};return(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(l.xu,{marginBottom:2,children:(0,p.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(l.xv,{weight:"bold",children:_||f._('Sellers', 'ProductFilters.Domains.HeaderText', 'Header of product domain filter containing filter options')}),(0,p.jsx)(l.xu,{flex:"none",children:(0,p.jsx)(l.hU,{icon:S?"arrow-up":"arrow-down",iconColor:"darkGray",accessibilityLabel:f._('Domain filter', 'accessibility label for the icon button to open or close domain filter', 'accessibility label for the icon button to open or close domain filter'),onClick:()=>{b(!S),y({event_type:101,component:E,element:v?13522:11547,view_type:h,view_parameter:g,aux_data:{commerce_data:JSON.stringify({filter:S?"collapsed":"expanded"}),filter_type:t}}),S||P()},size:"sm"})})]})}),S?(0,p.jsx)(a.Fragment,{children:i.map((e,i)=>e.label.toLowerCase().includes(x.toLowerCase())&&(0,p.jsx)(l.iP,{onTap:()=>I(i),children:(0,p.jsxs)(l.xu,{alignItems:"center",marginBottom:3,display:"flex",direction:"row","data-test-id":"multi-select-option",children:[(0,p.jsx)(l.xu,{marginEnd:3,children:(0,p.jsx)(s.qE,{name:e.label||"",size:"sm",src:e.image_url})}),(0,p.jsxs)(l.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(l.xv,{children:e.label}),e.is_verified_merchant&&(0,p.jsx)(l.xu,{marginStart:1,children:(0,p.jsx)(u.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(l.xu,{"data-test-id":e.checked?"option-selected":void 0,margin:-2,marginTop:-3,marginBottom:-3,children:(0,p.jsx)(l.hU,{icon:e.checked?"check-circle":"circle-outline",accessibilityLabel:f._('Domain Filter Option', 'Accessibility label for radio button of domain filter choices', 'Accessibility label for radio button of domain filter choices'),onClick:()=>I(i),size:"lg",iconColor:"darkGray"})})]})},e.label))}):(0,p.jsx)(l.xu,{width:"80%",children:(0,p.jsx)(l.xv,{size:"200",color:"subtle",children:function(e=[],i){let t=e.filter(e=>e.checked),a=t.length,l=0===a?i._('All', 'text indicates that no domain filter is currently applied for filtering', 'text indicates that no domain filter is currently applied for filtering'):`(${a}) ${t.map(e=>e.label).join(", ")}`;return l}(i,f)})})]})}},914917:(e,i,t)=>{"use strict";t.d(i,{Z:()=>f});var a=t(667294),l=t(883119),n=t(479216),r=t(529518),s=t(780280),o=t(785893);function d(e,i,t,a){let l=(0,r.c3)((0,r.$X)(e,!!i),t,!!i);return a&&(l=l.slice(0,-3)),l}function u({valueInMicroCurrency:e,requestContext:i,currencyCode:t,disableAutoFormatOnChange:s,hasFractionalCents:u,roundValue:c,onValueParsed:p,autoComplete:m,placeholder:g,errorMessage:h,id:_}){let y=t&&n.XD[t]||"",f="";if("number"==typeof e){let t=d(e,u,i.locale,c);f=`${y}${t}`}let[v,x]=(0,a.useState)(f);(0,a.useEffect)(()=>{if(!s&&null!=e&&""===v){let t=d(e,u,i.locale,c);x(t)}},[v,s,u,i,c,e]);let S=(e,t,a,l)=>{let n="";if(null==e)n="";else{let t=d(e,a,i.locale,l);n=`${y}${t}`}return n},b=()=>{let e;let t=(0,r.qq)(v,i.locale,!!u);e=""===v?null:Number.isNaN(t)?Number.MIN_VALUE:(0,r.y)(t,!!u);let a=S(e,v,!!u,c);x(a),p(e)};return(0,o.jsx)(l.nv,{id:_,autoComplete:m,onChange:({value:e})=>x(e),onBlur:()=>{b()},placeholder:g,errorMessage:h,size:"lg",value:v})}function c(e){return(0,o.jsx)(u,{...e,requestContext:(0,s.B)()})}var p=t(898781);function m({CustomMaxField:e,CustomMinField:i,handleMaxChange:t,handleMinChange:n,maxHeading:r,minHeading:s,max:d,min:u}){let c=(0,p.ZP)();return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsxs)(l.kC,{direction:"row",children:[(0,o.jsx)(l.sg,{span:7,children:(0,o.jsx)(l.xv,{size:"200",children:null!=s?s:c._('Min', 'rangeFilter.min', 'Minimum Range')})}),(0,o.jsx)(l.sg,{span:5,children:(0,o.jsx)(l.xv,{size:"200",children:null!=r?r:c._('Max', 'rangeFilter.max', 'Maximum Range')})})]}),(0,o.jsxs)(l.xu,{alignItems:"center",display:"flex",direction:"row",marginTop:2,justifyContent:"center",children:[(0,o.jsx)(l.sg,{span:5,children:i?(0,o.jsx)(i,{value:u}):(0,o.jsx)(l.Ki,{id:"min",autoComplete:"off",onChange:({value:e})=>{n&&n(e)},value:u,size:"lg"})}),(0,o.jsx)(l.sg,{span:2,children:(0,o.jsx)(l.xv,{align:"center",color:"subtle",size:"200",children:c._('to', 'Min to Max', 'Min to Max')})}),(0,o.jsx)(l.sg,{span:5,children:e?(0,o.jsx)(e,{value:d}):(0,o.jsx)(l.Ki,{id:"max",autoComplete:"off",onChange:({value:e})=>{t&&t(e)},value:d,size:"lg"})})]})]})}var g=t(890921),h=t(407043),_=t(829407),y=t(143649);function f({cropSource:e,currencyCode:i,defaultMaxPrice:t,defaultMinPrice:r,disableAutoFormatOnChange:s,filterType:d,handleMaxPriceChange:u,handleMinPriceChange:f,maxPrice:v,minPrice:x,viewParameter:S,viewType:b,title:E}){let{logContextEvent:P}=(0,h.v)(),I=(0,p.ZP)(),T=(0,g.Z)(),w=n.XD[i]||"",k=Math.ceil(t),A=Math.floor(r),[R,C]=(0,a.useState)(!0),F=T?14324:13468,D=()=>{P({event_type:13,component:F,view_type:b,view_parameter:S,aux_data:{commerce_data:JSON.stringify({source:(0,y.Z)({cropSource:e,viewType:b})}),filter_type:d}})};(0,_.Z)(()=>{D()});let O=-1===x&&-1===v;return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,o.jsx)(l.xu,{"data-test-id":"price-filter-label",children:(0,o.jsx)(l.xv,{weight:"bold",children:E||I._('Price', 'Header of product price filter', 'Header of product price filter')})}),(0,o.jsx)(l.xu,{flex:"none",children:(0,o.jsx)(l.hU,{icon:R?"arrow-up":"arrow-down",iconColor:"darkGray",accessibilityLabel:I._('Price filter', 'accessibility label for the icon button to open or close price filter', 'accessibility label for the icon button to open or close price filter'),onClick:()=>{C(!R),P({event_type:101,component:F,element:T?13522:11547,view_type:b,view_parameter:S,aux_data:{commerce_data:JSON.stringify({filter:R?"collapsed":"expanded"}),filter_type:d}}),R||D()},size:"sm"})})]}),R?(0,o.jsx)(l.xu,{paddingY:4,children:(0,o.jsx)(m,{CustomMaxField:({value:e})=>(0,o.jsx)(l.xu,{"data-test-id":"max-price-filter",children:(0,o.jsx)(c,{id:"max_price",autoComplete:"off",disableAutoFormatOnChange:s,placeholder:`${w}${k}`,onValueParsed:e=>{u((e||0)/1e6)},currencyCode:i,valueInMicroCurrency:O?null:e,roundValue:!0})}),CustomMinField:({value:e})=>(0,o.jsx)(l.xu,{"data-test-id":"min-price-filter",children:(0,o.jsx)(c,{id:"min_price",autoComplete:"off",disableAutoFormatOnChange:s,placeholder:`${w}${A}`,onValueParsed:e=>{f((e||0)/1e6)},currencyCode:i,valueInMicroCurrency:O?null:e,roundValue:!0})}),minHeading:I._('Min', 'Minimum Price', 'Minimum Price'),maxHeading:I._('Max', 'Maximum Price', 'Maximum Price'),max:-1===v?1e6*k:1e6*v,min:-1===x?1e6*A:1e6*x})}):(0,o.jsx)(l.xv,{size:"200",color:"subtle",children:-1===v&&-1===x?I._('All', 'text indicates that no price filter is currently applied for filtering', 'text indicates that no price filter is currently applied for filtering'):-1===v?`${w}${x}  ${w}${k}+`:-1===x?`${w}${A}  ${w}${v}`:`${w}${x}  ${w}${v}`})]})}},36022:(e,i,t)=>{"use strict";t.d(i,{$:()=>a,v:()=>l});let a=50,l={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},890921:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(773285),l=t(19121);function n(){let{isAuth:e,country:i}=(0,l.Z)(),{checkExperiment:t}=(0,a.F)();if(!e)return!1;let{anyEnabled:n}=t("web_search_unified_content_filters_international");return"US"===i||n}},180549:(e,i,t)=>{"use strict";t.d(i,{Z:()=>d});var a=t(616550),l=t(883119),n=t(407043),r=t(558068),s=t(898781),o=t(785893);function d({arrowType:e,pinId:i,viewParameter:t,viewType:d}){let u=(0,s.ZP)(),c=(0,a.useHistory)(),{previous:p}=(0,r.Hv)(),{logContextEvent:m}=(0,n.v)();return(0,o.jsx)(l.xu,{"data-test-id":"go-back-button",children:(0,o.jsx)(l.hU,{accessibilityLabel:u._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:null!=e?e:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(m({event_type:101,view_type:d,element:34,view_parameter:t}),0===p.length){c.replace(`/pin/${i}/`);return}c.goBack()}})})}},363957:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(826067);function l(e){let i=(0,a.mB)(e.search),t=parseInt(i.x,10),l=parseInt(i.y,10),n=parseInt(i.w,10),r=parseInt(i.h,10),s=!function(...e){return e.every(Number.isInteger)}(t,l,n,r)?null:{x:t,y:l,w:n,h:r};return s}},862670:(e,i,t)=>{"use strict";t.d(i,{Z:()=>u});var a,l=t(667294);t(167912);var n=t(485019),r=t(916117),s=t(223008),o=t(483205);let d=void 0!==a?a:a=t(161186);function u({pinKey:e}){let{data:i}=(0,r.u)(d,e),{getNormalizedPinImage:t}=(0,s.Z)({pinKey:i,maxWidth:o.RZ}),{width:a,height:u}=t(),c=(0,l.useCallback)(({initialCropArea:e})=>e||{x:n.S,y:n.S,w:a-2*n.S,h:u-2*n.S},[u,a]);return{getInitialCropArea:c}}},175644:(e,i,t)=>{"use strict";t.d(i,{Z:()=>u});var a=t(883119),l=t(407043),n=t(444445),r=t(745312),s=t(96939),o=t(8742),d=t(785893);function u({action:e,component:i,dangerouslySetActionUrl:t,element:u,contextLogData:c,id:p,objects:m,surface:g,viewType:h,viewParameter:_}){let{logContextEvent:y}=(0,l.v)(),f=null!=e&&e.url&&e.text?a=>(0,d.jsx)(s.Z,{coverImages:a.images,height:n.yF,onClick:()=>y({event_type:101,view_type:h,view_parameter:_,component:i,element:u,aux_data:{story_id:p,...c}}),text:e.text,url:null!=t?t:e.url,width:n.yF},"actionBubble"):null,{containerRef:v,itemsToRender:x,actionItem:S}=(0,r.n)({items:m,itemWidth:n.yF,itemGap:n.oX,actionItemType:f?"one":void 0});return(0,d.jsxs)(r.Z,{itemGap:n.oX,containerRef:v,children:[x.map((e,t)=>(0,d.jsx)(a.xu,{flex:"none",width:n.yF,"data-grid-item":"true",children:(0,d.jsx)(o.ZP,{pin:e,pinId:e.id,authDesktopSurface:null!=g?g:"ShoppingDynamicHeightGrid",auxData:c,componentType:i,duploQueryRef:null,slotIndex:t,viewParameter:_,viewType:h,pinImageCrop:{height:n.yF,width:n.yF}})},e.id)),S&&(null==f?void 0:f(S))]})}},288562:(e,i,t)=>{"use strict";t.d(i,{M:()=>f,Z:()=>v});var a=t(667294),l=t(883119),n=t(180549),r=t(898781),s=t(349700),o=t(773285),d=t(994912),u=t(427806),c=t(785893);function p({title:e,variant:i}){let t=(0,r.ZP)(),{checkExperiment:n}=(0,o.F)(),{anyEnabled:p}=n("web_unified_visual_feed"),m={default:(0,s.nk)(t._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(e||"").toLowerCase()}).join("").trim(),"unified-feed":(0,s.nk)(t._('{{ category }}', 'unifiedHeader.stela.header', 'header for related products stela feed'),{category:(0,d.Z)(e||"")}).join("").trim(),"closeup-shop":"","unified-feed-no-label":"","closeup-shop-idea-pin":t._('Shop similar items', 'relatedProducts.header', 'header for related products stela feed'),"related-products":"",flashlight:e,"shop-module":""},g={"closeup-shop":t._('Shop similar items', 'relatedProducts.header', 'header for related products stela feed'),"unified-feed":"","unified-feed-no-label":"","related-products":t._('More to shop', 'relatedProducts.header', 'header for related products feed'),"closeup-shop-idea-pin":t._('Shop similar items', 'relatedProducts.header', 'header for related products stela feed'),flashlight:"","shop-module":t._('Shop the look', 'shopTheLook.header', 'header for related products shop the look feed')},h=e?m[["flashlight","unified-feed","closeup-shop-idea-pin","shop-module"].includes(i)?i:"default"]:g[i];return(0,c.jsx)(a.Fragment,{children:h?(0,c.jsx)(l.X6,{size:p&&"flashlight"!==i?"500":"400",accessibilityLevel:1,children:h}):(0,c.jsx)(u.Z,{text:t._('Related products page', 'relatedProducts.unifiedFeed.accessibilityhiddenheading', 'accessibility label for related products page')})})}var m=t(407043),g=t(124580),h=t(780280),_=t(167234);function y({buttonText:e,handleDrawerClose:i,isDrawerOpen:t,onClick:a,largeSize:n=!1,reversed:s=!1,invertWhenDrawerIsOpen:o=!1,hasProductFiltersApplied:d=!1}){let u=(0,r.ZP)(),p=o&&t,m=(0,c.jsx)(l.JO,{accessibilityLabel:"",icon:"filter",color:p?"light":"dark"},"filterIcon"),g=e&&(0,c.jsx)(l.xv,{align:"center",color:p?"inverse":"default",weight:"bold",children:e},e);return(0,c.jsx)(l.iP,{onTap:()=>{t?i():a()},rounding:"pill",accessibilityLabel:u._('Filter', 'productsFilterButton', 'Button to filter products results'),children:(0,c.jsxs)(l.xu,{position:"relative",children:[(0,c.jsx)(l.xu,{display:"flex",justifyContent:"center",alignContent:"center",color:p?"dark":"secondary",rounding:"pill",minHeight:40,paddingX:4,dangerouslySetInlineStyle:n?{__style:{padding:"18px"}}:void 0,children:(0,c.jsx)(l.kC,{gap:{row:2,column:0},alignItems:"center",children:s?[g,m]:[m,g]})}),d&&(0,c.jsx)(l.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",rounding:"pill",top:!0,right:!0})]})})}let f=60;function v({filtersText:e,handleDrawerClose:i,handleDrawerOpen:t,isDrawerOpen:r,isProductOnlyFeed:s,pinId:o,showFilter:d,title:u,variant:v,viewParameter:x,viewType:S}){let{logContextEvent:b}=(0,m.v)(),{isRTL:E}=(0,h.B)(),P=(0,a.useRef)(null);(0,a.useEffect)(()=>(d&&b({event_type:120,view_type:S,component:13467,element:11735,view_parameter:x}),P.current&&g.Z.addObstruction("top",P.current),()=>{P.current&&g.Z.removeObstruction("top",P.current)}),[d]);let I=()=>{b({event_type:101,view_type:S,component:13467,element:11735,view_parameter:x}),t&&t()};return(0,c.jsx)(_.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,c.jsxs)(l.xu,{alignItems:"center",color:"default",display:"flex",height:f,justifyContent:"center",paddingY:4,position:"absolute",top:!0,width:"100%","data-test-id":"related-products-header",ref:P,children:[(0,c.jsx)(l.xu,{marginStart:5,position:"absolute",left:!E,right:E,children:(0,c.jsx)(n.Z,{pinId:o,arrowType:s?"directional-arrow-left":"cancel",viewType:S,viewParameter:x})}),(0,c.jsx)(p,{title:u,variant:v}),d&&"boolean"==typeof r&&I&&e&&i&&(0,c.jsx)(l.xu,{marginEnd:12,position:"absolute",left:E,right:!E,"data-test-id":"filter-button",children:(0,c.jsx)(y,{isDrawerOpen:r,onClick:I,buttonText:e,handleDrawerClose:i})})]})})}},988177:(e,i,t)=>{"use strict";t.d(i,{lI:()=>X,Dc:()=>J,ZP:()=>et});var a,l,n=t(667294);t(167912);var r=t(616550),s=t(883119),o=t(187638),d=t(862670),u=t(12755),c=t(288562),p=t(352870),m=t(357998),g=t(297852),h=t(785893);let _=void 0!==a?a:a=t(468852),y=e=>({entityId:e.id});function f({cropArea:e,description:i,surfaceType:t,height:a,imageSignature:l,imageUrl:n,pinKey:o,requestParams:d,trafficSource:u,viewParameter:c,width:f}){let v=(0,r.useHistory)(),{data:x}=(0,m.Q)(_,o,{useLegacyAdapter:y});return(0,h.jsx)(s.xu,{"data-test-id":"flashlight-enabled-image",width:f,height:a,overflow:"hidden",rounding:4,children:(0,h.jsxs)(s.zd,{height:a,width:f,children:[(0,h.jsx)(s.Ee,{alt:i,naturalHeight:a,naturalWidth:f,src:n}),(0,h.jsx)(p.Z,{showAnimation:!1,imageSignature:l,imageSize:{h:a,w:f},initialCropArea:e,customCropper:({origCrop:e,cropSource:i,title:a})=>{let l=window.location.pathname+window.location.search,n=(0,g.Z)({cropArea:e,cropSource:i,isProductPage:!1,pinId:x.entityId,requestParams:d,surfaceType:t,title:a,trafficSource:u});n!==l&&v.replace(n)},pinKey:x,viewParameter:c})]})})}var v=t(407373),x=t(83053),S=t(647945),b=t(407043),E=t(223008),P=t(773285),I=t(780280),T=t(483205),w=t(700380),k=t(430323),A=t(826067),R=t(280446),C=t(829407),F=t(307603),D=t(255164),O=t(975540),j=t(94047),L=t(985057),N=t(873476),M=t(697335),Z=t(36022),K=t(813982),z=t(914917),U=t(898781),B=t(143649);function H({categoryFilters:e,cropSource:i,handleCategoryChange:t,viewParameter:a,viewType:l}){let{logContextEvent:r}=(0,b.v)(),o=(0,U.ZP)(),[d,u]=(0,n.useState)(!0);return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,h.jsx)(s.xv,{weight:"bold",children:o._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,h.jsx)(s.xu,{flex:"none",children:(0,h.jsx)(s.hU,{icon:d?"arrow-up":"arrow-down",iconColor:"darkGray",accessibilityLabel:o._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),onClick:()=>{u(!d),r({event_type:101,component:13535,element:11547,view_type:l,view_parameter:a,aux_data:{commerce_data:JSON.stringify({filter:d?"collapsed":"expanded"})}}),d||r({event_type:13,component:13535,view_type:l,view_parameter:a,aux_data:{commerce_data:JSON.stringify({source:(0,B.Z)({cropSource:i,viewType:l})})}})},size:"sm"})})]}),d?(0,h.jsx)(n.Fragment,{children:e.slice(0,5).map((e,i)=>(0,h.jsxs)(s.xu,{alignItems:"center",marginBottom:3,display:"flex",direction:"row",children:[(0,h.jsx)(s.xu,{flex:"grow",children:(0,h.jsx)(s.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,h.jsx)(s.xu,{children:(0,h.jsx)(s.hU,{icon:e.checked?"check-circle":"circle-outline",accessibilityLabel:o._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),onClick:()=>t(i),size:"sm",iconColor:"darkGray"})})]},e.label))}):(0,h.jsx)(s.xu,{width:"80%",children:(0,h.jsx)(s.xv,{size:"200",color:"subtle",children:function(e=[],i){let t=e.filter(e=>e.checked),a=t.length,l=0===a?i._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${a}) ${t.map(e=>e.label).join(", ")}`;return l}(e,o)})})]})}var $=t(144226);function G(e,i){return e.filter(e=>e.checked).map(e=>e[i]).join(",")}function V(e){return e.map(e=>({...e,checked:!1}))}function W({listOfAvailableFiltersFromAPI:e,appliedFilterValues:i,key:t,component:a,viewType:l,viewParameter:r}){let{logContextEvent:s}=(0,b.v)(),[o,d]=(0,n.useState)([]),[u,c]=(0,n.useState)(""),[p,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(e){let a=V(e),l=i?function(e,i,t){if(e){let a=decodeURI(e).split(",");return i.map(e=>a.includes(e[t])?{...e,checked:!0}:e)}return i}(i,a,t):a;d(l);let n=G(l,t);c(n)}},[e,i,t]),{filters:o,setFilters:d,submittedFilters:u,submitFilters:function(e){e!==u&&s({event_type:7472,component:a,view_type:l,view_parameter:r}),c(e),m(!1)},isFilterChanged:p,clearFilters:()=>V(o),getSelected:e=>G(e,t),handleFilterChange:function({index:e,pinId:i,auxCommerceData:n}){let c=!o[e].checked,p=[...o.slice(0,e),{...o[e],checked:c},...o.slice(e+1)];d(p),m(u!==G(p,t)),s({event_type:101,component:a,element:11548,view_type:l,view_parameter:r,aux_data:{pin_id:i,commerce_data:JSON.stringify({[t]:o[e][t],select:c,...n})}})}}}function Y({categoryFilters:e,domainFilters:i,minPrice:t,maxPrice:a},l){let n=l._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:i,minPrice:t,maxPrice:a}){let l=i?i.split(",").length:0,n=e?e.split(",").length:0;return(a||t?1:0)+l+n}({categoryFilters:e,domainFilters:i,minPrice:t,maxPrice:a}),s=r>0?` (${r})`:"";return`${n}${s}`}function q({categoryFilters:e,cropSource:i,domainFilters:t,drawerHeight:a,handleFilterChange:l,onSubmit:r,pinId:o,priceFilters:d,submittedFilters:u,updateButtonText:c,width:p,viewParameter:m,viewType:g}){let{logContextEvent:_}=(0,b.v)(),y=(0,U.ZP)();(0,C.Z)(()=>{_({event_type:13,component:13467,view_type:g,view_parameter:m,aux_data:{commerce_data:JSON.stringify({source:(0,B.Z)({cropSource:i,viewType:g})})}})});let{category:f,domain:v,max:x,min:S}=u||{},{filters:E,setFilters:P,submittedFilters:I,submitFilters:T,isFilterChanged:w,clearFilters:k,getSelected:A,handleFilterChange:R}=W({listOfAvailableFiltersFromAPI:t,appliedFilterValues:v,key:"domain",component:13469,viewType:g,viewParameter:m}),{filters:F,setFilters:D,submittedFilters:O,submitFilters:j,isFilterChanged:L,clearFilters:N,getSelected:M,handleFilterChange:G}=W({listOfAvailableFiltersFromAPI:e,appliedFilterValues:f,key:"label",component:13535,viewType:g,viewParameter:m}),[V,q]=(0,n.useState)(d),[Q,X]=(0,n.useState)(-1),[J,ee]=(0,n.useState)(-1),[ei,et]=(0,n.useState)(-1),[ea,el]=(0,n.useState)(-1),[en,er]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!d||x&&S||q(d),S&&ee(parseInt(S,10)),x&&X(parseInt(x,10))},[d,x,S]);let{max_value:es,min_value:eo,currency_type:ed}=V||{},eu=e=>i=>{let t,a;let l=0>(i||0)?0:i;l&&_({event_type:7472,component:13468,view_type:g,view_parameter:m});let n=!1;"max"===e?(t=l||es,-1===(a=J)&&(a=eo),a>t&&(a=Math.max(t-Z.$,0))):(a=l||0,-1===(t=Q)&&(t=es),t<a&&(t=a+Z.$)),er(n=n||ea!==a||ei!==t),ee(a),X(t)};(0,n.useEffect)(()=>{c&&c(Y({categoryFilters:O,domainFilters:I,maxPrice:-1===Q?void 0:Q,minPrice:-1===J?void 0:J},y))},[y,Q,J,V,O,I,c]);let ec=({categoryParam:e,domainParam:i,maxPrice:t,minPrice:a})=>{l({categoryParam:e,domainParam:i,maxPrice:-1!==t?t:void 0,minPrice:-1!==a?a:void 0}),et(t),el(a),er(!1),(ei!==t||ea!==a)&&_({event_type:7472,component:13468,view_type:g,view_parameter:m}),T(i),j(e);let n=-1!==a,s=-1!==t,o=""!==i,d=""!==e,u=n?a.toString():"",p=s?t.toString():"",h=o?encodeURI(i):"",f=d?encodeURI(e):"";r&&r({category:f,domain:h,max:p,min:u}),c&&c(Y({categoryFilters:e,domainFilters:i,maxPrice:-1===t?void 0:t,minPrice:-1===a?void 0:a},y))};return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsxs)(s.xu,{display:"flex",direction:"column",overflow:"scroll",height:a-50-70,width:"100%",paddingX:1,paddingY:1,children:[(0,h.jsxs)(s.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,h.jsx)(s.xv,{weight:"bold",children:y._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,h.jsx)(s.zx,{onClick:()=>{X(-1),ee(-1),P(k()),D(N()),ec({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),_({event_type:101,component:13467,element:11545,view_type:g,view_parameter:m})},size:"md",text:y._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!V&&(0,h.jsx)($.Z,{children:(0,h.jsx)(z.Z,{cropSource:i,currencyCode:ed,defaultMaxPrice:es,defaultMinPrice:eo,disableAutoFormatOnChange:!0,handleMaxPriceChange:eu("max"),handleMinPriceChange:eu("min"),maxPrice:Q,minPrice:J,viewParameter:m,viewType:g})}),!!F&&F.length>0&&4!==i&&(0,h.jsx)($.Z,{children:(0,h.jsx)(H,{cropSource:i,categoryFilters:F,handleCategoryChange:e=>{G({index:e,pinId:o})},viewParameter:m,viewType:g})}),!!E&&E.length>0&&(0,h.jsx)($.Z,{children:(0,h.jsx)(K.Z,{cropSource:i,filterOptions:E,handleFilterChange:e=>{R({index:e,pinId:o,auxCommerceData:{source:(0,B.Z)({cropSource:i,viewType:g})}})},viewParameter:m,viewType:g})})]}),(0,h.jsx)(s.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:p,children:(0,h.jsx)(s.xu,{display:"flex",direction:"row",paddingY:2,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:(0,h.jsx)(s.xu,{marginStart:2,children:(0,h.jsx)(s.sg,{span:6,children:(0,h.jsx)(s.zx,{size:"md",text:y._('Confirm', 'Button to submit all selected filter options', 'Button to submit all selected filter options'),type:"submit",disabled:!(w||L||en),color:"red",onClick:()=>{let e=A(E),i=M(F);ec({categoryParam:i,domainParam:e,maxPrice:Q,minPrice:J}),_({event_type:101,component:13467,element:11546,view_type:g,view_parameter:m})}})})})})})]})}function Q({categoryFilters:e,cropSource:i,domainFilters:t,isDrawerOpen:a,handleFilterChange:l,handleSubmit:r,pinId:o,priceFilters:d,submittedFilters:c,topOffset:p=0,updateButtonText:m,viewParameter:g=3455,viewType:_}){let y=(0,M.t)(),f=y+p,[v,x]=(0,n.useState)(0),S=()=>{x(window.innerHeight-y)};return(0,n.useEffect)(()=>(S(),window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}),[]),(0,h.jsx)(s.xu,{color:"default",zIndex:new s.Ry(2),height:v,width:u.pG,paddingX:u.VF,position:"fixed",left:!0,dangerouslySetInlineStyle:{__style:{marginRight:a?0:-u.pG,visibility:a?"visible":"hidden",top:f}},children:(0,h.jsx)(q,{categoryFilters:e,cropSource:i,domainFilters:t,drawerHeight:v,handleFilterChange:l,onSubmit:r,pinId:o,priceFilters:d,submittedFilters:c,width:u.pG-u.VF*u.vc*2,updateButtonText:m,viewParameter:g,viewType:_})})}let X=65,J=16,ee=void 0!==l?l:l=t(482495),ei=e=>({description:e.description,entityId:e.id,imageSignature:e.image_signature,isEligibleForRelatedProducts:e.is_eligible_for_related_products,visualObjects:e.visual_objects&&e.visual_objects.map(e=>({isStela:e.is_stela}))});function et({pinKey:e}){let i=(0,r.useHistory)(),{logContextEvent:t}=(0,b.v)(),{checkExperiment:a}=(0,P.F)(),{isRTL:l}=(0,I.B)(),{data:p}=(0,m.Q)(ee,e,{useLegacyAdapter:ei}),{id:_}=(0,r.useParams)(),{pinId:y}=(0,R.Z)(_||""),Z=(0,N.Z)(),K=(0,r.useLocation)(),z=(0,A.mB)(K.search),{x:U,y:B,w:H,h:$,surfaceType:G,q:V,rs:W,domain:Y,full_feed_title:q,category:et,max:ea,min:el,requestParams:en}=z,er=(0,o.W)(G),es={category:et,domain:Y,min:el,max:ea},eo=(0,D.Z)(Number(z.cropSource)),ed=(0,L.Z)({x:U,y:B,w:H,h:$})?(0,F.Z)({x:U,y:B,w:H,h:$},!0):void 0,[eu,ec]=(0,n.useState)(ed),[ep,em]=(0,n.useState)(0),eg=(0,n.useCallback)(()=>K.pathname.includes("/products/"),[K]),[eh,e_]=(0,n.useState)(eg()),[ey,ef]=(0,n.useState)(void 0),[ev,ex]=(0,n.useState)(null),eS=(0,n.useRef)(null),[eb,eE]=(0,n.useState)(parseInt(el,10)||null),[eP,eI]=(0,n.useState)(parseInt(ea,10)||null),[eT,ew]=(0,n.useState)(Y?decodeURI(Y):null),[ek,eA]=(0,n.useState)(et?decodeURI(et):null),[eR,eC]=(0,n.useState)(!1),[eF,eD]=(0,n.useState)(""),eO=(0,n.useCallback)(()=>eC(!0),[]),ej=(0,n.useCallback)(()=>eC(!1),[]),{anyEnabled:eL}=a("web_unified_visual_feed"),{visualSearchFlashlightUnifiedResource:eN,visualSearchFlashlightUnifiedResource:{data:eM},filters:eZ,filters:{category_filters:eK,domain_filters:ez,price_filters:eU}={},searchId:eB,setSearchId:eH}=(0,S.Z)({resourceOptions:ey}),{description:e$,imageSignature:eG,isEligibleForRelatedProducts:eV}=p,eW=({minPrice:e,maxPrice:i,domainParam:t,categoryParam:a})=>{eE(e),eI(i),ew(t),eA(a)},eY=0,eq="",eQ=eo||5,eX=eh?"shopping":"flashlight";(0,n.useEffect)(()=>{let e=eg();e!==eh&&e_(e)},[eg,e_,eh]),(0,n.useEffect)(()=>{ev!==decodeURIComponent(q)&&ex(q?decodeURIComponent(q):null)},[ex,ev,q]);let{getInitialCropArea:eJ}=(0,d.Z)({pinKey:p});(0,C.Z)(()=>{if(!eu&&p){let e=eJ({initialCropArea:null}),t=(0,g.Z)({cropArea:e,cropSource:eQ,isProductPage:eh,pinId:y,requestParams:en,searchQuery:V,surfaceType:er,title:ev,trafficSource:W});i.replace(t)}}),(0,n.useEffect)(()=>(eS&&eS.current&&eq===y&&(eS.current.scrollTop=eY),()=>{eS&&eS.current&&(eY=eS.current.scrollTop,eq=y)}),[eS]),(0,n.useEffect)(()=>{((null==eu?void 0:eu.x)!==(null==ed?void 0:ed.x)||(null==eu?void 0:eu.y)!==(null==ed?void 0:ed.y)||(null==eu?void 0:eu.w)!==(null==ed?void 0:ed.w)||(null==eu?void 0:eu.h)!==(null==ed?void 0:ed.h))&&(ec({x:(null==ed?void 0:ed.x)||0,y:(null==ed?void 0:ed.y)||0,w:(null==ed?void 0:ed.w)||1,h:(null==ed?void 0:ed.h)||1}),eH(""))},[null==eu?void 0:eu.h,null==eu?void 0:eu.w,null==eu?void 0:eu.x,null==eu?void 0:eu.y,null==ed?void 0:ed.h,null==ed?void 0:ed.w,null==ed?void 0:ed.x,null==ed?void 0:ed.y,eH]),(0,n.useEffect)(()=>{window&&em(window.innerWidth)},[]),(0,C.Z)(()=>{let e=(0,w.Z)(()=>{window&&em(window.innerWidth)},100);return window&&window.addEventListener("resize",e),()=>{window&&window.removeEventListener("resize",e)}});let e0=(p.visualObjects||[]).some(e=>e.isStela),e1="stl"===er,e4=eL&&!eh&&!e1,{getNormalizedPinImage:e2}=(0,E.Z)({pinKey:p,maxWidth:T.RZ});(0,n.useEffect)(()=>{if(p.entityId){let{width:e,height:i}=e2(),t=eJ({initialCropArea:eu});ef({categories:ek,crop:(0,O.Z)({cropArea:t,scaledWidth:e,scaledHeight:i}),crop_source:eQ,domains:eT,entry_source:eX,entrypoint:Z,field_set_key:"shopping_grid_item",image_signature:p.imageSignature||void 0,is_shopping:eL?eh:e0,pin_id:p.entityId,price_max:eP,price_min:eb,request_params:en,source:W})}},[ek,eQ,eT,eX,Z,eJ,e2,e0,eL,eu,eh,eP,eb,p.entityId,p.imageSignature,en,W]);let e6=eV||eh?427:72,e3=eQ&&4===eQ?3462:3455;if((0,C.Z)(()=>{p&&!eL&&t({event_type:13,view_type:e6,view_parameter:e3,view_data:{pin_id:y},aux_data:{commerce_data:JSON.stringify({entrypoint:eX,pin_is_stela:e0})}})}),!p)return null;let{width:e7,height:e8,url:e5}=e2(),e9=eJ({initialCropArea:eu}),ie=e7+20,ii=({category:e,domain:t,min:a,max:l})=>{i.replace({pathname:`/pin/${y}/visual-search/${eh?"products/":""}`,query:{...e9,cropSource:eQ,entrySource:eX,rs:W,category:e,domain:t,min:a,max:l},search:(0,j.Z)({cropArea:e9,cropSource:eQ,requestParams:en,surfaceType:er,title:ev,trafficSource:W})})},it=eh?ep:ep-ie,ia=(0,v.Z)(eZ),il=!eL||eL&&eh,ir=!eh;return(0,h.jsx)(k.Z,{view:e6,objectId:eB,children:(0,h.jsxs)(s.xu,{"data-test-id":"related-products",children:[(0,h.jsx)(c.Z,{filtersText:eF,handleDrawerClose:ej,handleDrawerOpen:eO,isDrawerOpen:eR,isProductOnlyFeed:eh,pinId:y,showFilter:!e4&&ia,title:il?ev:"",variant:function({hasLabel:e,isEligibleForRelatedProducts:i,isProductOnlyFeed:t,isShopEntryPoint:a,isUnifiedFeed:l}){return a?"shop-module":!e&&l?"unified-feed-no-label":t||i&&!l?"closeup-shop":i&&l?"unified-feed":"related-products"}({hasLabel:!!ev,isEligibleForRelatedProducts:eV,isProductOnlyFeed:eh,isShopEntryPoint:e1,isUnifiedFeed:eL}),viewParameter:e3,viewType:e6}),(0,h.jsx)(s.xu,{marginTop:2,children:(0,h.jsx)(M.c,{children:e=>(0,h.jsxs)(s.xu,{display:"flex",marginTop:12,alignItems:"stretch",justifyContent:"start",direction:"row",children:[ia&&(0,h.jsx)(Q,{categoryFilters:eK,cropSource:eQ,domainFilters:ez,isDrawerOpen:eR,handleFilterChange:eW,handleSubmit:ii,pinId:y,priceFilters:eU,submittedFilters:es,updateButtonText:e=>{eD(e)},viewParameter:e3,viewType:e6,topOffset:c.M}),ir&&(0,h.jsx)(s.xu,{bottom:!0,height:"inherit",marginStart:!l&&eR?0:12,overflow:"auto",position:"fixed",ref:eS,width:ie,dangerouslySetInlineStyle:{__style:{top:e+X+32,marginBottom:10,left:!l&&eR?u.pG:0,right:l?0:void 0}},children:(0,h.jsx)(f,{cropArea:e9,cropSource:eQ,description:null!=e$?e$:"",height:e8,imageSignature:eG||"",imageUrl:e5,pinKey:p,requestParams:en,searchQuery:V,surfaceType:er,trafficSource:W,viewParameter:e3,viewType:e6,width:e7})}),(0,h.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:function({cropperWidth:e,isRTL:i,isFilterOpened:t,isProductOnlyFeed:a}){let l=a?0:e+40,n={top:X-J};return i?{...n,marginRight:l}:{...n,marginLeft:!i&&t?l+u.pG:l}}({isRTL:l,cropperWidth:ie,isFilterOpened:eR,isProductOnlyFeed:eh})},position:"relative",width:eR?it-u.pG:it,children:eM&&(0,h.jsx)(x.Z,{isFilterOpened:eR,isProductOnlyFeed:eh,pinKey:p,surfaceType:er,viewParameter:e3,viewType:e6,visualSearchFlashlightUnifiedResource:eN})})]})})})]})})}},83053:(e,i,t)=>{"use strict";t.d(i,{Z:()=>P});var a,l=t(667294);t(167912);var n=t(616550),r=t(883119),s=t(175644),o=t(785893);function d({title:e}){return(0,o.jsx)(r.xu,{"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:55}},children:(0,o.jsx)(r.X6,{size:"400",accessibilityLevel:2,children:e})})}var u=t(773285),c=t(861411);let p={flashlight:72,stela:427,stl:427};function m({pinId:e,surfaceType:i,visualSearchFlashlightUnifiedResource:t}){let a=(0,n.useLocation)(),{checkExperiment:m}=(0,u.F)(),{data:g}=t,h=(null==g?void 0:g.results)||[],_=`/pin/${e}/visual-search/products/${a.search}`,y=i?p[i]:72;return(0,o.jsx)(l.Fragment,{children:h.filter(e=>"story"===e.type).map((e,i)=>{if("story"===e.type){let{action:t,id:a,objects:l,story_type:n,title:u}=e;switch(n){case"unified_visual_feed_product_upsell":let p=u.format||"",g=m("web_product_pin_rep_redesign").anyEnabled;return(0,o.jsx)(c.qS,{auxData:{story_type:n},component:14339,loggingId:a,objectIdStr:a,slotIndex:i,viewParameter:3462,viewType:y,children:({impressionTrackerRef:e})=>(0,o.jsxs)(r.xu,{ref:e,children:[p&&(0,o.jsx)(d,{title:p}),(0,o.jsx)(r.xu,{marginTop:4,marginBottom:12,"data-test-id":"unified-feed-stela-story",children:(0,o.jsx)(s.Z,{action:t,component:14339,contextLogData:{story_type:n},dangerouslySetActionUrl:_,element:179,id:a,objects:l,surface:g?"ShoppingModule":void 0,viewType:y,viewParameter:3462})})]})},a);case"unified_visual_feed_organic_header":return(0,o.jsx)(c.qS,{auxData:{story_type:n},component:14339,loggingId:a,objectIdStr:a,slotIndex:i,viewParameter:3462,viewType:y,children:({impressionTrackerRef:i})=>(0,o.jsx)(r.xu,{ref:i,marginBottom:4,children:(0,o.jsx)(d,{title:e.title.format||""})})},a)}}return null})})}var g=t(407043),h=t(898781),_=t(700380),y=t(8742);function f({commerceData:e,isFilterOpened:i,isProductFeed:t,searchId:a,viewParameter:n,viewType:s,visualSearchFlashlightUnifiedResource:d}){let u=(0,h.ZP)(),{logContextEvent:c}=(0,g.v)(),[p,m]=(0,l.useState)(),[f,v]=(0,l.useState)(!1),x=(0,l.useRef)(null),S=(0,l.useRef)(null),b=(0,_.Z)(()=>{x.current&&m(x.current.getBoundingClientRect().y)},100);(0,l.useEffect)(()=>{var e;null===(e=S.current)||void 0===e||e.handleResize()},[i]),(0,l.useEffect)(()=>{if(!f)return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)}),(0,l.useEffect)(()=>{var e,i;let t=(null===(e=window)||void 0===e?void 0:e.innerHeight)||(null===(i=document.body)||void 0===i?void 0:i.clientHeight);!f&&p<t&&(v(!0),c({event_type:110,view_type:s,view_parameter:n}))},[p,c,f,v,s,n]);let{data:E,isFetching:P,fetchMore:I}=d,T=((null==E?void 0:E.results)||[]).filter(e=>"pin"===e.type);return(0,o.jsxs)(r.xu,{"data-test-id":"visual-search-feed",children:[(0,o.jsx)(r.xu,{marginTop:2,ref:x,children:(0,o.jsx)(r.Rk,{renderItem:({data:i,itemIdx:l})=>"pin"===i.type?(0,o.jsx)(y.ZP,{auxData:{commerce_data:e},pin:i,pinId:i.id,authDesktopSurface:t?"ShoppingDynamicHeightGrid":"SearchItem",componentType:0,duploQueryRef:null,slotIndex:l,viewData:{search_identifier:a},viewParameter:n,viewType:s}):null,items:T||[],loadItems:I,ref:S,scrollContainer:()=>window})}),(0,o.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,o.jsx)(r.$j,{accessibilityLabel:u._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:P})})]})}var v=t(357998),x=t(829407),S=t(999018);let b=void 0!==a?a:a=t(966498),E=e=>({entityId:e.id});function P({isFilterOpened:e,isProductOnlyFeed:i,pinKey:t,surfaceType:a,viewParameter:n,viewType:r,visualSearchFlashlightUnifiedResource:s}){let{data:d,childDataKey__DEPRECATED:u}=(0,v.Q)(b,t,{useLegacyAdapter:E}),{logContextEvent:c}=(0,g.v)(),p="stl"===a,h=p||i,{data:_}=s,y=null==_?void 0:_.search_identifier,P={is_product_only_feed:h},I=(0,S.Z)(u);(0,x.Z)(()=>{c({event_type:13,view_type:r,view_parameter:n,aux_data:I({default:P})})});let{entityId:T}=d;return(0,o.jsxs)(l.Fragment,{children:[!p&&(0,o.jsx)(m,{pinId:T,surfaceType:a,visualSearchFlashlightUnifiedResource:s}),(0,o.jsx)(f,{commerceData:P,isFilterOpened:e,isProductFeed:h,searchId:y,viewParameter:n,viewType:r,visualSearchFlashlightUnifiedResource:s})]})}},407373:(e,i,t)=>{"use strict";function a(e){let{category_filters:i,domain_filters:t,price_filters:a}=e||{};return!!i||!!t||!!a}t.d(i,{Z:()=>a})},647945:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r});var a=t(667294),l=t(407373),n=t(784590);function r({resourceOptions:e,setFlashlightSearchId:i}){let[t,r]=(0,a.useState)(),[s,o]=(0,a.useState)(""),[d,u]=(0,a.useState)(),c=(0,n.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,a.useEffect)(()=>{let{data:e}=c,t=null==e?void 0:e.search_identifier;t&&(i?i(t):o(t)),r(e)},[i,c]),(0,a.useEffect)(()=>{let{data:e}=c,i=null==e?void 0:e.search_identifier,a=null==t?void 0:t.search_identifier;!e||i&&a&&i===a||(0,l.Z)(t)||!(0,l.Z)(e)||u({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[d,t,c]),{visualSearchFlashlightUnifiedResource:c,filters:d,searchId:s,setSearchId:o}}},362810:(e,i,t)=>{"use strict";t.d(i,{Z:()=>_});var a=t(667294),l=t(883119),n=t(785893);function r({isTopRow:e,image:i}){var t,a,r;return(0,n.jsxs)(l.zd,{wash:!0,height:e?217:168,width:e?236:117,children:[(0,n.jsx)(l.Ee,{alt:i.alt||"",fit:"cover",naturalHeight:null!==(t=i.height)&&void 0!==t?t:1,naturalWidth:null!==(a=i.width)&&void 0!==a?a:1,src:null!==(r=i.url)&&void 0!==r?r:""}),!!i.price&&(0,n.jsx)(l.xu,{"data-test-id":"shopping-upsell-price",height:24,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:i.price})]})}var s=t(407043),o=t(356997),d=t(564194),u=t(310227),c=t(149230),p=t(841509),m=t(525199);let g={container:{borderRadius:`${u.Oc}px ${u.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},h=({images:e,firstImageIndex:i})=>{let t=i+1,a=i+2;return(0,n.jsxs)(l.xu,{overflow:"hidden",rounding:4,children:[(0,n.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:g.content},children:e.at(i)?(0,n.jsx)(r,{image:e[i],isTopRow:!0}):null}),e.length>a?(0,n.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,n.jsx)(r,{image:e[t]}),(0,n.jsx)(r,{image:e[a]})]}):null]})};function _({dangerouslySetActionUrl:e,query:i,story:t,slotIndex:r}){let u,_,y,f;let{logContextEvent:v}=(0,s.v)(),{action:x,id:S,objects:b,story_type:E,subtitle:P}=t,{text:I,url:T}=x||{},[w,k]=(0,a.useState)(!1),A=(0,a.useCallback)(()=>k(!0),[k]),R=(0,a.useCallback)(()=>k(!1),[k]),C=(b||[]).reduce((e,i)=>{var t,a,l,n,r,s,o,d,u;return"pin"!==i.type?e:[...e,{domain:i.domain,image:{alt:i.title||i.description,height:null===(t=i.images)||void 0===t?void 0:null===(a=t["474x"])||void 0===a?void 0:a.height,url:null===(l=i.images)||void 0===l?void 0:null===(n=l["474x"])||void 0===n?void 0:n.url,width:null===(r=i.images)||void 0===r?void 0:null===(s=r["474x"])||void 0===s?void 0:s.width,price:null===(o=((null===(d=i.rich_summary)||void 0===d?void 0:null===(u=d.products)||void 0===u?void 0:u[0])||{}).offer_summary)||void 0===o?void 0:o.price}}]},[]),F=(C[0]||{}).domain||void 0,D={story_type:E};if(["search_product_collage_story","shop_article_story"].includes(E)?(u=2,_=43,D={...D,story_id:S,entered_query:i}):"shop_brand_story"===E||"shop_brand_affinity_story"===E?(u=1,_=92,F&&(D={...D,commerce_data:JSON.stringify({domain:F})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(E)?(u=72,_=3050):"related_domain_collage"===E?(u=72,_=3455):"related_products_collage"===E&&(u=1,_=3177),["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(E)&&x){let e=x.user;y=e&&(e.image_medium_url||e.image_large_url),f=e&&e.full_name}let O=e||T;if(!O)return null;let j=(0,c.Z)({url:O})?"nofollow":"none";return(0,n.jsx)(d.Z,{componentType:200,contextLogData:D||{},impressionType:"Story",loggingId:E,slotIndex:r,viewParameter:_,viewType:u,children:(0,n.jsx)(l.Tg,{rel:j,href:O,onTap:()=>v({event_type:101,element:372,component:200,view_type:u,view_parameter:_,aux_data:{story_type:E}}),children:(0,n.jsxs)(l.xu,{overflow:"hidden",position:"relative",onMouseEnter:A,onMouseLeave:R,dangerouslySetInlineStyle:{__style:g.container},children:[(0,n.jsx)(h,{images:C.map(({image:e})=>e),firstImageIndex:["related_domain_collage","related_products_collage"].includes(E)?1:0}),(0,n.jsx)(l.xu,{color:"secondary",display:"flex",paddingX:3,alignItems:"center",justifyContent:"center",marginTop:2,paddingY:P?4:2,rounding:"pill",children:(0,n.jsxs)(l.xu,{justifyContent:"center",alignContent:"start",display:"flex",direction:"column",margin:2,children:[P?(0,n.jsx)(l.xu,{marginBottom:1,children:(0,n.jsx)(l.xv,{align:"start",color:"subtle",children:P.format})}):null,(0,n.jsx)(l.xv,{align:"start",weight:"bold",children:I})]})}),f&&y&&(0,n.jsx)(l.xu,{position:"absolute",right:!0,top:!0,margin:2,children:(0,n.jsx)(o.qE,{name:f,size:"md",src:y,outline:!0})}),(0,n.jsx)(m.Z,{visibility:w?"visible":"none",children:(0,n.jsx)(p.Z,{additionalStyles:g.visualOverlay})})]})})})}},27255:(e,i,t)=>{"use strict";t.d(i,{Z:()=>a});let a={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},485019:(e,i,t)=>{"use strict";t.d(i,{S:()=>f,Z:()=>S});var a=t(667294),l=t(615071),n=t(883119),r=t(112690),s=t(785893);let o={nw:0,ne:90,se:180,sw:270},d={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},u={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c=(e,i,t,a)=>{if("rounded"!==a)return`translate(${i}, ${t}), rotate(${o[e]})`;{let[a,l]=d[e];return`translate(${i+a}, ${t+l}), rotate(${o[e]})`}};function p({corner:e,x:i,y:t,size:a,cornerStyle:l}){return(0,s.jsxs)("g",{transform:c(e,i,t,l),style:{cursor:u[e]},children:[(0,s.jsx)("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:0,y:0,width:a,height:a,className:`v2cropperHandle ${e}`}),"rounded"===l?(0,s.jsx)("path",{d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff",className:`v2cropperHandle ${e}`}):(0,s.jsx)("path",{d:`M ${a} 0 L 0 0 L 0 ${a}`,fill:"none",stroke:"#fff",strokeWidth:6,className:`v2cropperHandle ${e}`})]})}let m={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function g({edge:e,x:i,y:t,w:a,h:l}){return(0,s.jsx)("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:i,y:t,width:a,height:l,className:`v2cropperHandle ${e}`,style:{cursor:m[e]}})}function h({x:e,y:i,w:t,h:l}){let n="rounded";return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(p,{corner:"nw",x:e,y:i,size:20,cornerStyle:n}),(0,s.jsx)(p,{corner:"ne",x:e+t,y:i,size:20,cornerStyle:n}),(0,s.jsx)(p,{corner:"sw",x:e,y:i+l,size:20,cornerStyle:n}),(0,s.jsx)(p,{corner:"se",x:e+t,y:i+l,size:20,cornerStyle:n}),(0,s.jsx)(g,{edge:"n",x:e+20,y:i-10,w:t-40,h:30}),(0,s.jsx)(g,{edge:"e",x:e+t-20,y:i+20,w:30,h:l-40}),(0,s.jsx)(g,{edge:"s",x:e+20,y:i+l-10,w:t-40,h:30}),(0,s.jsx)(g,{edge:"w",x:e-20,y:i+20,w:30,h:l-40})]})}var _=t(391254);function y(e,i,t){var a;return(i="symbol"==typeof(a=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,i||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?a:String(a))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let f=16,v=`
.preview-crop-area-enter {
  opacity: 0;
}

.preview-crop-area-enter-active {
  opacity: 1;
  transition: opacity 300ms;
}

.preview-crop-area-exit {
  opacity: 1;
}

.preview-crop-area-exit-active {
  opacity: 0;
  transition: opacity 300ms;
}

.preview-crop-area-exit-done {
  opacity: 0;
}
`;class x extends a.Component{constructor(...e){super(...e),y(this,"state",{cropArea:!!this.props.initialCropArea&&function({initialCropArea:e,imageSize:i}){let{x:t,y:a,w:l,h:n}=e,{h:r,w:s}=i;if(!r||!s)return e;let o=t,d=a,u=l,c=n;return o<f&&(o=f,u-=f-t),o+u>s-f&&(u-=o+u-s+f),d<f&&(d=f,c-=f-a),d+c>r-f&&(c-=d+c-r+f),{x:o,y:d,w:u,h:c}}({initialCropArea:this.props.initialCropArea,imageSize:this.props.imageSize})||{h:0,w:0,x:0,y:0},cropChangeType:null}),y(this,"cropResizeDirection",null),y(this,"_cropperOverlay",(0,a.createRef)()),y(this,"_checkCropHandleValid",(e,i)=>{let{cropArea:{h:t,w:a,x:l,y:n}}=this.state;switch(this.cropResizeDirection){case"ne":e<l&&i>n+t?this.cropResizeDirection="sw":e<l?this.cropResizeDirection="nw":i>n+t&&(this.cropResizeDirection="se");break;case"nw":e>l+a&&i>n+t?this.cropResizeDirection="se":e>l+a?this.cropResizeDirection="ne":i>n+t&&(this.cropResizeDirection="sw");break;case"se":e<l&&i<n?this.cropResizeDirection="nw":e<l?this.cropResizeDirection="sw":i<n&&(this.cropResizeDirection="ne");break;case"sw":e>l+a&&i<n?this.cropResizeDirection="ne":e>l+a?this.cropResizeDirection="se":i<n&&(this.cropResizeDirection="nw");break;case"n":i>n+t&&(this.cropResizeDirection="s");break;case"s":i<n&&(this.cropResizeDirection="n");break;case"e":e<l&&(this.cropResizeDirection="w");break;case"w":e>l+a&&(this.cropResizeDirection="e")}}),y(this,"handleOnMouseDown",e=>{var i;e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:a}=e,{target:l}=e,n=t-this._cropperOverlayCoor.x,r=a-this._cropperOverlayCoor.y,s=l.classList?Array.from(l.classList):l instanceof Element&&(null===(i=l.getAttribute("class"))||void 0===i?void 0:i.split(" "))||[];s.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),s.includes("ne")&&(this.cropResizeDirection="ne"),s.includes("nw")&&(this.cropResizeDirection="nw"),s.includes("se")&&(this.cropResizeDirection="se"),s.includes("sw")&&(this.cropResizeDirection="sw"),s.includes("n")&&(this.cropResizeDirection="n"),s.includes("s")&&(this.cropResizeDirection="s"),s.includes("e")&&(this.cropResizeDirection="e"),s.includes("w")&&(this.cropResizeDirection="w")):s.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:n,y:r}):s.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:n,y:r},this.setState({cropArea:{h:0,w:0,x:n,y:r},cropChangeType:"select"}))}),y(this,"handleOnMouseMove",e=>{var i,t,a,l,n,r;let{cropArea:{h:s,w:o,x:d,y:u},cropChangeType:c}=this.state,{imageSize:p}=this.props,{clientX:m,clientY:g}=e,h=m-this._cropperOverlayCoor.x,_=g-this._cropperOverlayCoor.y;if("resize"===c){let e=Math.max(Math.min(h,(null!==(i=p.w)&&void 0!==i?i:1)-f),f),a=Math.max(Math.min(_,(null!==(t=p.h)&&void 0!==t?t:1)-f),f);switch(this._checkCropHandleValid(e,a),this.cropResizeDirection){case"ne":{let i=Math.max(s+(u-a),48),t=Math.max(e-d,48);this.setState({cropArea:{h:i,w:t,x:d,y:i<=48?u:a}});break}case"nw":{let i=Math.max(o+(d-e),48),t=Math.max(s+(u-a),48);this.setState({cropArea:{h:t,w:i,x:48===i?d:e,y:48===t?u:a}});break}case"se":{let i=Math.max(a-u,48),t=Math.max(e-d,48);this.setState({cropArea:{h:i,w:t,x:d,y:u}});break}case"sw":{let i=Math.max(a-u,48),t=Math.max(o+(d-e),48);this.setState({cropArea:{h:i,w:t,x:48===t?d:e,y:u}});break}case"n":{let e=Math.max(u-a+s,48);this.setState({cropArea:{h:e,w:o,x:d,y:48===e?u:a}});break}case"s":{let e=Math.max(a-u,48);this.setState({cropArea:{h:e,w:o,x:d,y:u}});break}case"e":{let i=Math.max(e-d,48);this.setState({cropArea:{h:s,w:i,x:d,y:u}});break}case"w":{let i=Math.max(o-e+d,48);this.setState({cropArea:{h:s,w:i,x:48===i?d:e,y:u}})}}}else if("move"===c){let e=h-this.cropChangeStartCoor.x,i=_-this.cropChangeStartCoor.y,t=Math.max(Math.min(d+e,(null!==(a=p.w)&&void 0!==a?a:1)-o-f),f),n=Math.max(Math.min(u+i,(null!==(l=p.h)&&void 0!==l?l:1)-s-f),f);this.cropChangeStartCoor={x:h,y:_},this.setState({cropArea:{h:s,w:o,x:t,y:n}})}else if("select"===c){let e=Math.max(Math.min(h,null!==(n=p.w)&&void 0!==n?n:1),0),i=Math.max(Math.min(_,null!==(r=p.h)&&void 0!==r?r:1),0),t=e-this.cropChangeStartCoor.x,a=i-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(a),w:Math.abs(t),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,i)}})}}),y(this,"handleOnMouseUp",()=>{let{cropChangeType:e}=this.state;("resize"===e||"move"===e||"select"===e)&&this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){let{body:e}=document,i=this._cropperOverlay.current;if(i&&e){if(i){let e=i.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}window.addEventListener("mouseup",this.handleOnMouseUp),e.addEventListener("mousemove",this.handleOnMouseMove),i.addEventListener("mousedown",this.handleOnMouseDown)}}componentWillUnmount(){let{body:e}=document,i=this._cropperOverlay.current;i&&e&&(window.removeEventListener("mouseup",this.handleOnMouseUp),e.removeEventListener("mousemove",this.handleOnMouseMove),i.removeEventListener("mousedown",this.handleOnMouseDown))}handleCrop(){var e,i,t,a,l,n,r,s;let{imageSize:o,onChange:d,viewParameter:u,logContextEvent:c}=this.props,{cropChangeType:p,cropArea:m}=this.state;if(0===m.w&&0===m.h)this.setState({cropChangeType:null}),d({origCrop:{h:(null!==(e=o.h)&&void 0!==e?e:1)-2*f,w:(null!==(i=o.w)&&void 0!==i?i:1)-2*f,x:f,y:f}});else{let e,i;this.setState({cropChangeType:null});let g=Math.max(Math.min(m.x,(null!==(t=o.w)&&void 0!==t?t:1)-48-f),f),h=Math.max(Math.min(m.y,(null!==(a=o.h)&&void 0!==a?a:1)-48-f),f);switch(e=m.h<48?48:h+m.h>(null!==(l=o.h)&&void 0!==l?l:1)-f?(null!==(r=o.h)&&void 0!==r?r:1)-h-f:m.h,i=m.w<48?48:g+m.w>(null!==(n=o.w)&&void 0!==n?n:1)-f?(null!==(s=o.w)&&void 0!==s?s:1)-g-f:m.w,p){case"move":c({event_type:7603,view_type:72,view_parameter:u});break;case"resize":c({event_type:7604,view_type:72,view_parameter:u})}d({origCrop:{h:e,w:i,x:g,y:h}})}}render(){let{children:e,previewCropArea:i,showPreviewArea:t}=this.props,{cropArea:{h:a,w:r,x:o,y:d},cropChangeType:u}=this.state;return(0,s.jsxs)(n.xu,{"data-test-id":"visual-search-cropper",ref:this._cropperOverlay,position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},children:[(0,s.jsx)(_.Z,{unsafeCSS:v}),(0,s.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:"Mask",children:[(0,s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",rx:"0",ry:"0",fill:"#fff"}),(0,s.jsx)("rect",{x:o,y:d,width:r,height:a,id:"hole",rx:0,ry:0},`${o}${d}`),(0,s.jsx)(l.Z,{in:t&&!u,timeout:300,classNames:"preview-crop-area",mountOnEnter:!0,unmountOnExit:!0,children:(0,s.jsx)("rect",{x:i.x,y:i.y,width:i.w,height:i.h,id:"preview",rx:4,ry:4},`${i.x}${i.y}`)})]})}),(0,s.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",style:{fill:"rgba(0,0,0,0.5)"},mask:"url(#Mask)",className:"v2shadowMask"}),(0,s.jsx)("use",{href:"#hole",fill:"rgba(0,0,0,0)",stroke:"#fff",strokeWidth:"2",className:"v2cropSection",style:{cursor:"move"}}),"select"!==u&&(0,s.jsx)(h,{x:o,y:d,w:r,h:a})]}),e]})}}function S(e){let i=(0,r.Z)();return(0,s.jsx)(x,{logContextEvent:i,...e})}},403368:(e,i,t)=>{"use strict";t.d(i,{Z:()=>d});var a=t(667294),l=t(883119),n=t(898781),r=t(785893);function s(e,i,t){var a;return(i="symbol"==typeof(a=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,i||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?a:String(a))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class o extends a.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"handleMouseEnter",e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)}),s(this,"handleMouseLeave",e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)})}render(){let{forwardedRef:e,icon:i,onClick:t,onMouseDown:a,onMouseUp:n,selected:s,style:o,text:d,x:u,y:c,zIndex:p,backdropDiameter:m=32,dotDiameter:g=16}=this.props,{isHovering:h}=this.state,_=h?m+4:m;return(0,r.jsx)("div",{"data-test-id":"flashlight-dot",onClick:t,onKeyPress:t,onMouseDown:a,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:n,ref:e,role:"button",style:{zIndex:p,position:"absolute",top:c-_/2,left:u-_/2,outline:"none"},tabIndex:"0","aria-label":this.props.i18n._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),children:(0,r.jsxs)(l.xu,{"data-test-id":"flashlight-dot-style",alignItems:"center",borderStyle:"none",color:"default",display:"flex",height:g,justifyContent:"center",position:"absolute",padding:0,width:g,dangerouslySetInlineStyle:{__style:{boxShadow:s?"0 0 0 3px #e60023":"none",borderRadius:g,top:(_-g)/2,left:(_-g)/2,...o}},children:[!!d&&(0,r.jsx)(l.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:d}),i&&(0,r.jsx)(l.JO,{accessibilityLabel:this.props.i18n._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:i,size:g/2,inline:!0})]})})}}let d=(0,a.forwardRef)((e,i)=>{let t=(0,n.ZP)();return(0,r.jsx)(o,{...e,forwardedRef:i,i18n:t})})},352870:(e,i,t)=>{"use strict";t.d(i,{Z:()=>I});var a,l,n=t(667294);t(167912);var r=t(616550),s=t(485019),o=t(112690),d=t(403368),u=t(829407),c=t(785893);function p({showAnimation:e,auxData:i,index:t,isStela:a,onClick:l,onHover:n,onUnhover:r,spotlightCenter:s,viewParameter:p,viewType:m}){let g=(0,o.Z)(),h=a?1221:1260;(0,u.Z)(()=>{g({event_type:120,element:h,aux_data:i,view_parameter:p,view_type:m})});let _=parseFloat((.1*(t+1)).toFixed(2)),y={animation:e?`spotlightDotPop 0.6s ease-out ${_}s both`:"none"};return(0,c.jsx)(d.Z,{x:s.x,y:s.y,onClick:e=>{e&&(e.stopPropagation(),e.preventDefault()),g({aux_data:i,element:h,event_type:101,view_parameter:p,view_type:m}),l(t)},onMouseEnter:e=>{e&&(e.stopPropagation(),e.preventDefault()),n(t)},onMouseLeave:e=>{e&&(e.stopPropagation(),e.preventDefault()),r()},style:y})}var m=t(357998),g=t(391254),h=t(999018),_=t(599611);let y=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,f=void 0!==a?a:a=t(52892),v=e=>({entityId:e.id,visualObjects:e.visual_objects&&e.visual_objects.map(e=>({h:e.h,isStela:e.is_stela,w:e.w,x:e.x,y:e.y}))}),x=({showAnimation:e,pinKey:i,imageSignature:t,imageSize:a,currentSpotlightIdx:l,handleSpotlightClick:r,handleSpotlightHover:s,handleSpotlightUnhover:o,viewParameter:d,viewType:u})=>{var x;let{data:S,childDataKey__DEPRECATED:b}=(0,m.Q)(f,i,{useLegacyAdapter:v}),E=(0,h.Z)(b),P=(null!==(x=S.visualObjects)&&void 0!==x?x:[]).filter(e=>e.isStela)||[];return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(g.Z,{unsafeCSS:y}),P.map((i,n)=>{var m,g;if(n===l)return null;let{x:h,y,w:f,h:v}=i,x=(0,_.Z)({cropArea:{x:h,y,w:f,h:v},scaledWidth:null!==(m=a.w)&&void 0!==m?m:0,scaledHeight:null!==(g=a.h)&&void 0!==g?g:0}),b={x:x.x+x.w/2,y:x.y+x.h/2},P={...E({override:{entrypoint:"flashlight"}}),pin_id:S.entityId,image_signature:t,visual_objects:JSON.stringify([{x:i.x,y:i.y,w:i.w,h:i.h}])},I=`${b.x}${b.y}`;return(0,c.jsx)(p,{showAnimation:e,auxData:P,index:n,isStela:!!i.isStela,onClick:r,onHover:s,onUnhover:o,spotlightCenter:b,viewParameter:d,viewType:u},I)})]})};var S=t(94047),b=t(297852);let E=void 0!==l?l:l=t(225785),P=e=>({entityId:e.id,visualObjects:e.visual_objects&&e.visual_objects.map(e=>({h:e.h,isStela:e.is_stela,title:e.title,w:e.w,x:e.x,y:e.y}))});function I({customCropper:e,imageSize:i,imageSignature:t,initialCropArea:a,pinKey:l,showAnimation:o,trafficSource:d,viewParameter:u,viewType:p}){let{data:g}=(0,m.Q)(E,l,{useLegacyAdapter:P}),h=(0,r.useHistory)(),[y,f]=(0,n.useState)(!1),[v,I]=(0,n.useState)({w:0,h:0,x:0,y:0}),[T,w]=(0,n.useState)(0),k=(0,n.useMemo)(()=>{var e;return(null!==(e=g.visualObjects)&&void 0!==e?e:[]).filter(e=>e.isStela)||[]},[g.visualObjects]);(0,n.useEffect)(()=>{let e=k.findIndex(e=>{var t,l;let{x:n,y:r,w:s,h:o}=e;return function(e,i,t){let a=Object.keys(e).reduce((t,a)=>t+Math.abs(e[a]-i[a]),0);return a<=4}(a,(0,_.Z)({cropArea:{x:n,y:r,w:s,h:o},scaledWidth:null!==(t=i.w)&&void 0!==t?t:0,scaledHeight:null!==(l=i.h)&&void 0!==l?l:0}),0)});w(e)},[i,a,k]);let A=({origCrop:e,cropSource:i,trafficSource:t,title:a})=>{let{entityId:l}=g,n=window.location.pathname+window.location.search,r=(0,b.Z)({cropArea:e,cropSource:null!=i?i:6,isProductPage:!1,pinId:l,title:a,trafficSource:t,surfaceType:"flashlight"});r!==n&&(h.replace(r),h.replace({pathname:`/pin/${l}/visual-search/`,search:(0,S.Z)({cropArea:e,cropSource:null!=i?i:6,title:a,trafficSource:t,surfaceType:"flashlight"}),state:{internalNavigation:!0}}))},R=k&&!!k.length;return(0,c.jsx)(s.Z,{imageSize:i,initialCropArea:a,onChange:null!=e?e:A,previewCropArea:v,showPreviewArea:!1,viewParameter:u,children:R&&(0,c.jsx)(x,{handleSpotlightClick:t=>{var a,l;let n=k[t],{x:r,y:s,w:o,h:u}=n,c=(0,_.Z)({cropArea:{x:r,y:s,w:o,h:u},scaledWidth:null!==(a=i.w)&&void 0!==a?a:0,scaledHeight:null!==(l=i.h)&&void 0!==l?l:0}),p={origCrop:c,cropSource:n.isStela?4:1,trafficSource:d,title:n.title||""};e?e(p):A(p)},handleSpotlightHover:e=>{if(e!==T){var t,a;f(!0);let{x:l,y:n,w:r,h:s}=k[e];I((0,_.Z)({cropArea:{x:l,y:n,w:r,h:s},scaledWidth:null!==(t=i.w)&&void 0!==t?t:0,scaledHeight:null!==(a=i.h)&&void 0!==a?a:0}))}},handleSpotlightUnhover:()=>{f(!1)},imageSignature:t,imageSize:i,currentSpotlightIdx:T,pinKey:g,showAnimation:o,viewParameter:u,viewType:p})},JSON.stringify(a))}},310227:(e,i,t)=>{"use strict";t.d(i,{Dv:()=>n,Ml:()=>r,Oc:()=>a,mv:()=>l});let a=16,l=4,n={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},483205:(e,i,t)=>{"use strict";t.d(i,{I6:()=>l,Nv:()=>a,RZ:()=>n,ZG:()=>o,b9:()=>s,s0:()=>r});let a=44,l=24,n=446,r=.05,s=36,o=20},501338:(e,i,t)=>{"use strict";t.d(i,{Pw:()=>a,SB:()=>l,ZP:()=>r,x9:()=>n});let a=80,l=56,n=e=>"phone"===e?l:a;function r(e,i){return i?0:n(e)}},619937:(e,i,t)=>{"use strict";t.d(i,{$N:()=>g,Cu:()=>_,GY:()=>d,MZ:()=>r,NR:()=>c,Vn:()=>u,bC:()=>h,fm:()=>a,kM:()=>n,q6:()=>l,qp:()=>o,uV:()=>p,ug:()=>m,xL:()=>s});let a={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},l={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},n={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},r={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud"},s={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},o={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_EVENTS:"PINTEREST_TAG_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY",PAYLOAD_HELPER:"PAYLOAD_HELPER",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API"},d={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},u={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},c={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},p="604800",m="86400",g={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},h="click",_="view"},337815:(e,i,t)=>{"use strict";t.d(i,{YS:()=>r,eF:()=>s,m_:()=>n});var a=t(619937),l=t(67347);function n(e,i,t,l,n){let r=new URLSearchParams,s=null!=e?e:"0";return r.append(a.NR.SOURCE_EVENT_ID,s),r.append(a.NR.DESTINATION,function(e){let i;try{i=decodeURIComponent(e)}catch(t){i=e}i.startsWith("http")?i.startsWith("http://")&&(i=i.replace("http://","https://")):i="https://"+i;try{return new URL(i).origin}catch(a){let t=i.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(t&&t.length>1)return t[1];return e}}(i)||""),r.append(a.NR.EXPIRY,t?a.uV:a.ug),r.append(a.NR.PRIORITY,t?a.NR.CLICK_PRIORITY:a.NR.VIEW_PRIORITY),n&&r.append(a.NR.ADVERTISER_ID,n),l&&r.append(a.NR.CAMPAIGN_ID,l),r.append(a.NR.SOURCE_EVENT_TYPE,t?a.bC:a.Cu),"/attribution_source/?"+r.toString()}async function r(e,i,t,a,r,s,o){let{appType:d,osType:u}=s||{};if(["Pin","pinImpressions"].includes(e)&&i&&a){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:d,osType:u}});try{var c;if(!(null!==(c=window.document.featurePolicy)&&void 0!==c&&c.allowsFeature("attribution-reporting"))){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:d,osType:u}});return}let e=n(t,a||"",!1,r,o),i=await window.fetch(e,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}});if(!i.ok)throw Error("server request failed.");(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:d,osType:u}})}catch(e){(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:e.name,appType:d,osType:u}})}}else(0,l.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:d,osType:u}})}function s(e){if(e){let i=e.toLowerCase();if(i.includes("windows"))return"windows xp"===i?1:"windows vista"===i?2:"windows 7"===i?3:"windows 8"===i?4:12;if(i.includes("mac os"))return 5;if(i.includes("android"))return 7;if(i.includes("ios"))return 6;if(i.includes("ubuntu"))return 8;if(i.includes("chromium os"))return 13}return 0}},782534:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r,k:()=>a.k});var a=t(451820),l=t(780280),n=t(785893);let r=({dateFormatType:e,useUTC:i=!0,value:t})=>(0,n.jsx)(l.LC,{children:l=>(0,a.Z)(l.locale,t,e,i)})},451820:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n,k:()=>a});let a={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},l=function(e){switch(e){case a.YEAR:return{year:"numeric"};case a.LONG:return{year:"numeric",month:"long",day:"numeric"};case a.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case a.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case a.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case a.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case a.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case a.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.MONTH_DAY:return{month:"long",day:"numeric"};case a.SHORT_MONTH:return{month:"short"};case a.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case a.DAY:return{day:"numeric"};case a.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case a.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case a.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case a.TIME:return{hour:"numeric",minute:"2-digit"};case a.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case a.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function n(e,i,t,a=!0){let n=l(t);a&&(n.timeZone="UTC");let r=new Intl.DateTimeFormat(e,n);return r.format(i)}},123159:(e,i,t)=>{"use strict";t.d(i,{F:()=>p,M:()=>c});var a=t(667294),l=t(702664),n=t(14890),r=t(425288),s=t(332611),o=t(957191),d=t(785893);let{Provider:u,useHook:c}=(0,r.Z)("ExperienceContext");function p({children:e}){let[i,t]=(0,a.useReducer)((e,i)=>{if("MOUNT_PLACEMENT"===i.type)return{...e,mountedPlacements:{...e.mountedPlacements,[i.payload]:!0}};if("UNMOUNT_PLACEMENT"===i.type){let t={...e};return delete t.mountedPlacements[i.payload],delete t.registerdAfterActionPlacements[i.payload],t}return"REGISTER_AFTER_ACTION_PLACEMENT"===i.type?{...e,registerdAfterActionPlacements:{...e.registerdAfterActionPlacements,[i.payload]:!0}}:e},{mountedPlacements:{},registerdAfterActionPlacements:{}}),{mountedPlacements:r,registerdAfterActionPlacements:c}=i,p=(0,l.useDispatch)(),m=(0,l.useSelector)(e=>e.experiences),g=(0,s.be)(),h=(0,s.Am)(),_=(0,s.Ig)(),y=(0,a.useMemo)(()=>{let e=(0,n.bindActionCreators)({completeExperience:g,dismissExperience:h,fetchAllExperiences:s.fO,fetchAllExperiencesMulti:o.NW,fetchExperienceForPlacements:s.pz,mountPlacement:s.N,triggerExperimentsForPlacement:s.kd,viewExperience:_},p);return{...e,mountPlacement:(i,...a)=>{e.mountPlacement(i,...a),t({type:"MOUNT_PLACEMENT",payload:i})},unmountPlacement:e=>{t({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{t({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})}}},[g,h,p,t,_]),f=(0,a.useMemo)(()=>({experiences:m,mountedPlacements:r,registerdAfterActionPlacements:c,...y}),[m,r,c,y]);return(0,d.jsx)(u,{value:f,children:e})}},497529:(e,i,t)=>{"use strict";t.d(i,{Z:()=>s});var a=t(667294);t(332611);var l=t(123159),n=t(764990);t(957191);var r=t(780280);function s(e){let{mountedPlacements:i,completeExperience:t,dismissExperience:s,experiences:o,fetchAllExperiences:d,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:p,viewExperience:m}=(0,l.M)(),{isBot:g}=(0,r.B)(),h=e&&!g?(0,n.MQ)(o,i,e):null;return(0,a.useMemo)(()=>({completeExperience:t,dismissExperience:s,experienceForPlacement:h,fetchAllExperiences:d,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:p,viewExperience:m}),[t,s,h,d,u,c,p,m])}},984225:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(785893);let l=(0,a.jsx)("svg",{width:"37",height:"5",viewBox:"0 0 37 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("rect",{width:"37",height:"5",rx:"2.5",fill:"#E9E9E9"})}),n=l},301723:(e,i,t)=>{"use strict";t.d(i,{Z:()=>s});var a=t(667294),l=t(883119);let n=(0,a.createContext)();var r=t(785893);function s(e){(0,a.useContext)(n);let{alt:i,color:t,children:s,crossOrigin:o,decoding:d,elementTiming:u,fetchPriority:c,fit:p,loading:m,naturalHeight:g,naturalWidth:h,onError:_,onLoad:y,role:f,sizes:v,src:x,srcSet:S}=e;return(0,r.jsx)(l.Ee,{alt:i,color:t,crossOrigin:o,decoding:d,elementTiming:u,fetchPriority:c,fit:p,loading:m,naturalHeight:g,naturalWidth:h,onError:_,onLoad:y,role:f,sizes:v,src:x,srcSet:S,children:s})}},18514:(e,i,t)=>{"use strict";t.r(i),t.d(i,{Masonry:()=>f,default:()=>v});var a,l,n,r=t(667294),s=t(883119),o=t(407043),d=t(319915),u=t(775904),c=t(463076),p=t(444445),m=t(391254),g=t(773285),h=t(780280),_=t(67347),y=t(785893);class f extends r.Component{getGutters(){let{gutterWidth:e,paddingStyle:i}=this.props,t="simplified"===i,a=t?p.oX:e;return{gutterWidth:null!=a?a:p.ZZ,paddingBottom:t?16:6}}render(){let e;let{columnWidth:i,experimentalTwoColItems:t,flexible:a,isGridCentered:l,isInitialRender:n,isRTL:r,items:o,layout:d,loadItems:u,logContextEvent:g,masonryRef:h,measurementStore:f,minCols:v,positionStore:x,renderItem:S,scrollContainerRef:b,serverRender:E,virtualBufferFactor:P,virtualize:I}=this.props,{gutterWidth:T,paddingBottom:w}=this.getGutters();return l&&n&&(e="gridCentered"),(0,y.jsxs)("div",{className:e,children:[E&&n&&(0,y.jsx)(m.Z,{unsafeCSS:a?function({isRTL:e,maxItemWidth:i=300,maxColumns:t=16,minColumns:a=2}){let l=`
.gridCentered {
  margin-left: auto;
  margin-right: auto;
  max-width: ${t*i}
}

.gridCentered .static {
  position: absolute !important;
  visibility: hidden !important;
}

@media (min-width: ${t*i}px) {
  .gridCentered .static:nth-child(-n+${t}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }

  .gridCentered .static:nth-child(-n+${t}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }

  .gridCentered .static {
    width: ${i}px !important;
  }
}
`;for(let n=a;n<t+1;n+=1){let t=n===a?0:(n-1)*i+1;l+=`
@media (min-width: ${t}px) and (max-width: ${n*i}px) {
  .gridCentered .static:nth-child(-n+${n}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }

  .gridCentered .static {
    width: calc(100% / ${n}) !important;
  }
}
`}return l}({isRTL:r,maxItemWidth:(i||p.yF)+T,maxColumns:o.length||p.g5,minColumns:v||p.yc}):(0,c.Z)({isRTL:r,itemWidth:(i||p.yF)+T,maxColumns:o.length||p.g5,minColumns:v||p.yc})}),(0,y.jsx)(s.Rk,{columnWidth:(null!=i?i:p.yF)+T,gutterWidth:0,items:o,layout:a?E?"serverRenderedFlexible":"flexible":null!=d?d:"basic",loadItems:u,measurementStore:f,minCols:v,_twoColItems:t,_logTwoColWhitespace:e=>{(0,_.S0)("webapp.masonry.twoColWhitespace",e,{sampleRate:1,tags:{columnWidth:i,minCols:v}}),g({event_type:14705,component:14468,aux_data:{whitespace_px:e}})},ref:e=>{h&&(h.current=e)},renderItem:e=>(0,y.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:w,paddingLeft:T/2,paddingRight:T/2}},children:S(e)}),positionStore:x,scrollContainer:()=>(null==b?void 0:b.current)||window,virtualize:I,virtualBufferFactor:P})]})}}function v({cacheKey:e,columnWidth:i,experimentalTwoColItems:t,flexible:a,gutterWidth:l,isFetching:n,isGridCentered:s=!0,renderItem:c,items:p,layout:m,loadItems:_,masonryRef:v,minCols:x,paddingStyle:S,scrollContainerRef:b,serverRender:E=!0,virtualize:P=!0}){var I;let{isRTL:T}=(0,h.B)(),{logContextEvent:w}=(0,o.v)(),{checkExperiment:k}=(0,g.F)(),A=k("web_masonry_virtual_buffer_factor").group,R=null!==(I=({enabled_0_3:"0.3",enabled_0_5:"0.5",enabled_0_9:"0.9",enabled_1_1:"1.1",enabled_1_3:"1.3"})[A])&&void 0!==I?I:.7,C=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{C.current&&(C.current=!1)},[]),(0,y.jsx)(f,{columnWidth:i,experimentalTwoColItems:null!=t&&t,flexible:a,gutterWidth:l,isGridCentered:s,isInitialRender:C.current,isRTL:T,items:p,layout:m,loadItems:()=>{!n&&_&&_()},logContextEvent:w,masonryRef:v,measurementStore:(0,u.z)(e),minCols:x,paddingStyle:S,positionStore:(0,u.Y)(e),renderItem:e=>(0,y.jsx)(d.Z,{name:"MasonryItem",children:c(e)}),scrollContainerRef:b,serverRender:E,virtualize:P,virtualBufferFactor:R})}l="defaultProps",n={gutterWidth:p.ZZ,isGridCentered:!0,minCols:p.yc,paddingStyle:"simplified",virtualize:!0},(l="symbol"==typeof(a=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,i||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(l,"string"))?a:String(a))in f?Object.defineProperty(f,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):f[l]=n},463076:(e,i,t)=>{"use strict";function a({isRTL:e,itemWidth:i=236,maxColumns:t=16,minColumns:a=2}){let l=`
.gridCentered {
  margin-left: auto;
  margin-right: auto;
}
.gridCentered .static {
  position: absolute;
  visibility: hidden;
}
`;for(let n=a;n<t+1;n+=1){let t=n===a?0:n*i;l+=`
@media (min-width: ${t}px) and (max-width: ${(n+1)*i-1}px) {
  .gridCentered {
    width: ${n*i}px;
  }
  .gridCentered .static:nth-child(-n+${n}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }
}
`}return l}t.d(i,{Z:()=>a})},916117:(e,i,t)=>{"use strict";t.d(i,{u:()=>s});var a=t(422578),l=t(178467),n=t(273213),r=t(681669);function s(e,i){if(null==i)return{data:null};let t=(0,n.B)(i);if("deprecated"===t.type){let{data:i}=t;if(null==i)return{data:null};{let t=(0,r.O7)();return{data:(0,l.ZP)({conditionContext:t,fragment:e,legacyData:i})}}}let s=(0,a.useFragment)(e,t.data);return{data:s}}},357998:(e,i,t)=>{"use strict";t.d(i,{Q:()=>r});var a=t(422578),l=t(273213),n=t(681669);function r(e,i,{useLegacyAdapter:t}){if(null==i)return{data:null,childDataKey__DEPRECATED:null};let r=(0,l.B)(i);if("deprecated"===r.type){let{data:i}=r;return null==i?{data:null,childDataKey__DEPRECATED:r}:{data:(0,n.V4)(e,t)(i),childDataKey__DEPRECATED:r}}let s=(0,a.useFragment)(e,r.data);return{data:s,childDataKey__DEPRECATED:{type:"graphqlRef",data:s}}}},694379:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r});var a=t(892819),l=t(780280),n=t(785893);let r=({currency:e,maximumFractionDigits:i,minimumFractionDigits:t,shortform:r,shortformMaximumFractionDigits:s,formatStyle:o,uplimit:d,value:u})=>{let c=(0,a.Z)();return(0,n.jsx)(l.LC,{children:a=>c(a.locale||"en-US",u,{currency:e,maximum_fraction_digits:i,minimum_fraction_digits:t,shortform:r,shortform_maximum_fraction_digits:s,style:o,uplimit:d})})}},479216:(e,i,t)=>{"use strict";t.d(i,{MF:()=>n,PB:()=>r,Ul:()=>s,XD:()=>a});let a={AUD:"A$",BRL:"R$",CAD:"$",CZK:"K",DKK:"kr",EUR:"",GBP:"\xa3",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$",JPY:"\xa5",CHF:""},l=function(e){let i=1.1.toLocaleString(e).substring(1,2);return i},n=function(e,i){return","===l(i)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},r=function(e,i){return","===l(i)&&e?e.replace(",","."):e};function s(e,i,t,a=!1){let{minimumFractionDigits:l,maximumFractionDigits:n}=new Intl.NumberFormat(i,{style:"currency",currency:t}).resolvedOptions(),r=void 0===l?2:l,s=void 0===n?2:n;return e.toLocaleString(i,{maximumFractionDigits:a&&s>0?3:s,minimumFractionDigits:a&&r>0?3:r})}},529518:(e,i,t)=>{"use strict";function a(e,i){let t=e*Math.pow(10,i),a=Math.round((t-parseInt(t,10))*10)/10;return -.5===a&&(a=-.6),t=Math.round(parseInt(t,10)+a)/Math.pow(10,i)}function l(e){let i=parseFloat(e),t=a(i,2);return t?t.toFixed(2):e}function n(e,i=!1,t=""){let a=100,l=1e4;if(t){let{maximumFractionDigits:e}=new Intl.NumberFormat(void 0,{style:"currency",currency:t}).resolvedOptions();"number"==typeof e&&(l=1e6/(a=Math.pow(10,e)))}return i&&(a=1e3,l=1e3),Math.round(e*a)*l}function r(e,i=!1){if(Number.isNaN(e))return 0;let t=1e6;return i&&(t=1e6),e/t}function s(e){return e?l(r(e).toString()):""}t.d(i,{$X:()=>r,Hy:()=>s,c3:()=>p,cq:()=>l,q$:()=>a,qq:()=>c,y:()=>n});let o={fractionalCentFormatData:{},formatData:{}};function d(e){return e&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")),e}function u(e,i=!1){let t=i?"fractionalCentFormatData":"formatData",a=o[t][e];if(!a){let l=2,n=2,r=-9999.99;i&&(l=3,n=3,r=-9999.999);let s=new Intl.NumberFormat(e,{minimumFractionDigits:l,maximumFractionDigits:n}),u=s.formatToParts(r),c=u.find(e=>"minusSign"===e.type),p=u.find(e=>"group"===e.type),m=u.find(e=>"decimal"===e.type),g=p?p.value:"",h=d(g),_=m?m.value:"",y="[^0-9"+h+d(_)+d(c?c.value:"")+"]";a={format:s,decimal:m?m.value:null,group:g,groupRegex:RegExp(h||"","g"),cleaner:RegExp(y,"g")},o[t][e]=a}return a}function c(e,i,t=!1){if("number"==typeof e)return e;if("string"!=typeof e)return NaN;let a=u(i,t),l=e.replace(a.cleaner,"");return a.decimal&&(l=l.replace(a.decimal,"!_!")),a.group&&(l=l.replace(a.groupRegex,"")),parseFloat(l=l.replace("!_!","."))}function p(e,i,t=!1){let a=u(i,t);return a.format.format(e)}},892819:(e,i,t)=>{"use strict";t.d(i,{Z:()=>d});var a=t(898781),l=t(66699);let n=(e,i)=>{let t=i||0,a=10**t,l=+(t?e*a:e).toFixed(8),n=Math.floor(l),r=l-n,s=r>.49999999&&r<.50000001?n%2==0?n:n+1:Math.round(l);return t?s/a:s},r=({maximumFractionDigits:e,minimumFractionDigits:i,style:t,currency:a})=>{let l={maximumFractionDigits:e,minimumFractionDigits:i};return t?{...l,style:t,..."currency"===t?{currency:a,currencyDisplay:"symbol"}:{}}:l},s=e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0},o=(e,i)=>{if(i){let{minimumFractionDigits:t,maximumFractionDigits:a}=new Intl.NumberFormat(e,{style:"currency",currency:i}).resolvedOptions();if(void 0!==t&&void 0!==a)return{minimumFractionDigits:t,maximumFractionDigits:a}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){let e=(0,a.ZP)();return(i,t,a)=>{let d=0,u=0,c=a&&a.style||void 0,p=a&&a.shortform||!1,m=a&&a.uplimit||void 0,g=a&&a.currency||void 0,h=!!m&&t>=m,_=m&&h?m:t;if("currency"===c){let{minimumFractionDigits:e,maximumFractionDigits:t}=o(i,g);d=void 0===a||void 0===a.maximum_fraction_digits?t:a.maximum_fraction_digits,u=void 0===a||void 0===a.minimum_fraction_digits?e:a.minimum_fraction_digits}else d=void 0===a||void 0===a.maximum_fraction_digits?0:a.maximum_fraction_digits,u=void 0===a||void 0===a.minimum_fraction_digits?0:a.minimum_fraction_digits;if(p&&_>999&&(d=void 0===a||void 0===a.shortform_maximum_fraction_digits?2:a.shortform_maximum_fraction_digits,u=0),d<u)return String(_);let y=_,f="",v=[{"100M":{value:1e8,localeKey:e._('', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],x=[{b:{value:1e9,localeKey:e._('B', 'Abbreviation for one billion.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('M', 'Abbreviation for one million.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Abbreviation for one thousand.', 'Abbreviation for one thousand.')}}],S=/^zh|ja|ko/.test(i);if(p&&_>999){let e=S?v:x;for(let i=0;i<e.length;i+=1){let t=Object.keys(e[i])[0],a=e[i][t].value;if(_>=a){y=n(_/a*Math.pow(10,d))/Math.pow(10,d),f=e[i][t].localeKey;break}}}if(null==y)return"";let b=y.toLocaleString([s(i)&&"ar-SA"!==i?i:"en-US"],r({maximumFractionDigits:d,minimumFractionDigits:u,currency:g,style:c}));return f&&f.length>0?(0,l.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:b,numberSuffix:f})+(h?"+":""):b+(h?"+":"")}}},366428:(e,i,t)=>{"use strict";t.d(i,{F:()=>o,Z:()=>s});var a=t(667294),l=t(407043),n=t(124580);let r={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600}};function s({carouselData:e,closeupImpressionType:i,closeupNavigationType:t,componentType:s,contextLogData:o,clientTrackingParams:d,elementType:u,impressionAuxFields:c,inImpressionExp:p,impressionType:m,impressionsFramework:g,isPaused:h,loggingId:_,objectIdStr:y,slotIndex:f,trackCarousel:v,viewData:x,viewParameter:S,viewType:b}){let{logContextEvent:E}=(0,l.v)(),P=g||n.Z,I=(0,a.useRef)(null),T=a=>{var l,n,p,g,h,P,T;let w=r[m],k=w.idType,A={clientTrackingParams:d,endTime:a.endTime,[k]:_,slotIndex:f,time:a.startTime,renderDuration:a.endTime-a.startTime,type:i,...c,forcedExit:"removed"===a.forcedExit?0:void 0};"Pin"===m&&(A={...A,pinCellWidth:(null===(l=I.current)||void 0===l?void 0:l.getBoundingClientRect().width)||0,pinCellHeight:(null===(n=I.current)||void 0===n?void 0:n.getBoundingClientRect().height)||0,windowWidth:null===(p=window)||void 0===p?void 0:p.innerWidth,windowHeight:null===(g=window)||void 0===g?void 0:g.innerHeight});let R={component:s,object_id_str:y,view_type:b,view_data:x||{},view_parameter:S};v?e&&E({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...A,carouselDataId:Number(e.id),carouselSlotId:(null===(h=e.carousel_slots)||void 0===h?void 0:h[null!==(P=e.index)&&void 0!==P?P:0])&&Number(e.carousel_slots[null!==(T=e.index)&&void 0!==T?T:0].id),slotIndex:e.index}]},...R,aux_data:{...o}}):E({clientTrackingParams:d,event_type:w.eventType,...R,element:u,event_data:{[w.impressionType]:"Story"===m?A:[A]},aux_data:{closeup_navigation_type:t,...o}})},w=(0,a.useCallback)(()=>{try{I.current instanceof HTMLElement&&P.start(I.current).onExitViewport(T).setDebugId(_||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}},[I.current]);(0,a.useEffect)(()=>(p&&!P.inExperiment&&P.setExperimentStatus(!0),h||w(),()=>{I.current instanceof HTMLElement&&P.stop(I.current)}),[w]);let k=(0,a.useRef)(h);return(0,a.useEffect)(()=>{k.current&&!h&&w(),k.current=h},[h,w]),I}let o=({children:e,...i})=>e({impressionTrackerRef:s(i)})},755742:(e,i,t)=>{"use strict";t.d(i,{Z:()=>a});let a={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},248975:(e,i,t)=>{"use strict";function a({embedSrc:e,embedType:i,imagesUrls:t,preferredResolution:a,excludeOriginals:l}){if(!e&&!i&&!t)return"";if("gif"===i)return e||"";if(!t)return"";if(a){let e="474x"===a&&t["474x"]||"236x"===a&&t["236x"]||t["736x"];if(e)return e}let n=Object.keys(t).reduce((e,i)=>{try{let a=i.split("x")[0];if(Number.isNaN(Number(a)))return{...e,[i]:t[i]};return{...e,[a]:t[i]}}catch(i){return e}},{}),r=Object.keys(n);l&&"orig"===r[r.length-1]&&r.pop();let s=r.pop();return n[s]||""}t.d(i,{Z:()=>a})},223008:(e,i,t)=>{"use strict";t.d(i,{Z:()=>o});var a,l=t(667294);t(167912);var n=t(357998);let r=void 0!==a?a:a=t(469656),s=e=>{var i,t,a,l,n;return{imageSpec_236x:(null===(i=e.images)||void 0===i?void 0:i["236x"])&&{height:e.images["236x"].height,url:e.images["236x"].url,width:e.images["236x"].width},imageSpec_474x:(null===(t=e.images)||void 0===t?void 0:t["474x"])&&{height:e.images["474x"].height,url:e.images["474x"].url,width:e.images["474x"].width},imageSpec_564x:(null===(a=e.images)||void 0===a?void 0:a["564x"])&&{height:e.images["564x"].height,url:e.images["564x"].url,width:e.images["564x"].width},imageSpec_736x:(null===(l=e.images)||void 0===l?void 0:l["736x"])&&{height:e.images["736x"].height,url:e.images["736x"].url,width:e.images["736x"].width},imageSpec_orig:(null===(n=e.images)||void 0===n?void 0:n.orig)&&{height:e.images.orig.height,url:e.images.orig.url,width:e.images.orig.width}}};function o({pinKey:e,maxWidth:i}){let{data:t}=(0,n.Q)(r,e,{useLegacyAdapter:s}),a=(null==t?void 0:t.imageSpec_564x)||(null==t?void 0:t.imageSpec_736x)||(null==t?void 0:t.imageSpec_orig)||(null==t?void 0:t.imageSpec_474x)||(null==t?void 0:t.imageSpec_236x),o=(null==a?void 0:a.width)||1,d=(null==a?void 0:a.height)||1,u=(null==a?void 0:a.url)||"",c=function(e,i,t=564){return e>t&&(i*=t/e,e=t),{width:e,height:i}}(o,d,i),p=(0,l.useCallback)(()=>({width:c.width,height:c.height,url:u}),[c.height,c.width,u]);return{getNormalizedPinImage:p}}},269051:(e,i,t)=>{"use strict";t.d(i,{Z:()=>o}),t(167912);var a,l=t(357998),n=t(898781);let r=void 0!==a?a:a=t(47737),s=e=>{var i;return{category:e.category,closeupUnifiedDescription:e.closeup_unified_description,closeupUnifiedTitle:e.closeup_unified_title,imageSpec_orig:(null===(i=e.images)||void 0===i?void 0:i.orig)&&{url:e.images.orig.url},link:e.link,richMetadata:e.rich_metadata&&{products:e.rich_metadata.products&&e.rich_metadata.products.map(e=>({name:e.name,offerSummary:e.offer_summary&&{__typename:"OfferSummary"}}))},richSummary:e.rich_summary&&{products:e.rich_summary.products&&e.rich_summary.products.map(e=>({name:e.name,offerSummary:e.offer_summary&&{__typename:"OfferSummary"}}))},trackedLink:e.tracked_link}},o=e=>{let i;let t=(0,n.ZP)(),{data:a}=(0,l.Q)(r,e,{useLegacyAdapter:s}),o=a.trackedLink||a.link||a.imageSpec_orig&&a.imageSpec_orig.url,{richMetadata:d,richSummary:u}=a,c=t._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');if(d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary){var p,m;c=t._('Product sold by ', 'pin annotation', 'pin annotation'),i=null===(p=(null===(m=d.products)||void 0===m?void 0:m[0])||void 0)||void 0===p?void 0:p.offerSummary}return!i&&u&&u&&u.products&&u.products[0]&&u&&u.products[0].name&&u.products[0].offerSummary&&(c=t._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:o,pinCreditPrefix:c,pinTitle:a.closeupUnifiedTitle,pinDescription:a.closeupUnifiedDescription,pinCategory:a.category}}},53199:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r}),t(167912);var a,l=t(357998);let n=void 0!==a?a:a=t(460863),r=e=>{let{data:i}=(0,l.Q)(n,e,{useLegacyAdapter:e=>{var i,t,a,l,n,r,s,o,d;return{imageSpec_60x60:(null===(i=e.images)||void 0===i?void 0:i["60x60"])&&{url:e.images["60x60"].url},imageSpec_136x136:(null===(t=e.images)||void 0===t?void 0:t["136x136"])&&{url:e.images["136x136"].url},imageSpec_170x:(null===(a=e.images)||void 0===a?void 0:a["170x"])&&{url:e.images["170x"].url},imageSpec_236x:(null===(l=e.images)||void 0===l?void 0:l["236x"])&&{url:e.images["236x"].url},imageSpec_474x:(null===(n=e.images)||void 0===n?void 0:n["474x"])&&{url:e.images["474x"].url},imageSpec_564x:(null===(r=e.images)||void 0===r?void 0:r["564x"])&&{url:e.images["564x"].url},imageSpec_736x:(null===(s=e.images)||void 0===s?void 0:s["736x"])&&{url:e.images["736x"].url},imageSpec_600x315:(null===(o=e.images)||void 0===o?void 0:o["600x315"])&&{url:e.images["600x315"].url},imageSpec_orig:(null===(d=e.images)||void 0===d?void 0:d.orig)&&{url:e.images.orig.url}}}}),t=[["60x60",null==i?void 0:i.imageSpec_60x60],["136x136",null==i?void 0:i.imageSpec_136x136],["170x",null==i?void 0:i.imageSpec_170x],["236x",null==i?void 0:i.imageSpec_236x],["474x",null==i?void 0:i.imageSpec_474x],["564x",null==i?void 0:i.imageSpec_564x],["736x",null==i?void 0:i.imageSpec_736x],["600x315",null==i?void 0:i.imageSpec_600x315],["orig",null==i?void 0:i.imageSpec_orig]];return t.reduce((e,[i,t])=>t?{...e,[i]:t.url}:e,{})}},692627:(e,i,t)=>{"use strict";function a({hasPin:e,hasPinRichMetadata:i,hasPinRichMetadataProducts:t,hasPinRichMetadataArticle:a,hasPinRichMetadataRecipe:l,hasPinStoryPinData:n}){if(e){if(i)return t?144:a?141:l?145:139;if(n)return 157}return 140}t.d(i,{Z:()=>a})},523657:(e,i,t)=>{"use strict";t.d(i,{Z:()=>o});var a=t(667294);t(883119);var l=t(301723),n=t(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,i,t)=>{let l=(0,a.useRef)(null),n=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(e!==l.current||t&&t!==n.current){l.current=e;let t=r(e);null!=t&&t.complete&&i()}n.current=t},[e,i,t])};function o({alt:e,children:i,color:t,elementTiming:a,isActive:r=!1,naturalHeight:o,naturalWidth:d,onLoad:u,src:c,fit:p="none"}){return s(c,u,r),(0,n.jsx)(l.Z,{alt:e,color:t,elementTiming:a,naturalHeight:o,naturalWidth:d,onLoad:u,src:c,fit:p,children:i})}},932995:(e,i,t)=>{"use strict";function a(e,i,t){let a=[...e],l=a.splice(i,1)[0];return a.splice(t,0,l),a}t.d(i,{Z:()=>a})},418614:(e,i,t)=>{"use strict";t.d(i,{Z:()=>d});var a=t(784590),l=t(19121),n=t(616550),r=t(780280),s=t(50286),o=t(826067);function d({getOptions:e,checkExperiments:i,disableFetch:t,...d}){let u=function(){let e=(0,l.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:c,fetchDisabled:p}=function({checkExperiments:e,disableFetch:i,viewer:t}){var a;let l=(0,n.useLocation)(),d=(0,n.useRouteMatch)(),u=(0,r.B)(),c=function({advertiser:e,deviceType:i,location:{pathname:t,search:a},inviteCode:l,match:{params:n,path:r},viewer:s}){let d={inviteCode:l,matchPath:r,params:n,parsedSearch:(0,o.mB)(a),pathname:t,search:a},u={country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0};return{advertiser:e,deviceType:i,routeData:d,user:u}}({advertiser:u.advertiser,deviceType:(0,s.Mq)(u),location:l,match:d,viewer:t,inviteCode:null!==(a=u.inviteCode)&&void 0!==a?a:""}),p=!!i&&i(c),m=!!p||!e||e(u.experimentsClient);return{args:c,fetchDisabled:p||!m}}({checkExperiments:i,disableFetch:t,viewer:u}),m=e?e(c):void 0;return(0,a.Z)(p?null:{options:m,...d})}},909499:(e,i,t)=>{"use strict";t.d(i,{Hd:()=>d,_R:()=>s,gi:()=>n,lw:()=>a,oD:()=>l,wF:()=>o,zh:()=>r});let a={PINS:"pins",PINS_BUYABLE:"buyable_pins",PINS_MINE:"my_pins",PINS_VIDEO:"videos",BOARDS:"boards",USERS:"users",IDEA_PINS:"idea_pins",MY_CONTENT:"my_content"},l=e=>{let i=Object.values(a).find(i=>i===e);return null!=i?i:void 0},n=e=>{switch(e){case a.PINS:return 0;case a.PINS_MINE:return null;case a.PINS_BUYABLE:return 1;case a.PINS_VIDEO:return 2;case a.BOARDS:return 3;case a.USERS:return 4;default:return null}},r=e=>{switch(e){case 0:return a.PINS;case 1:return a.PINS_BUYABLE;case 2:return a.PINS_VIDEO;case 3:return a.BOARDS;case 4:return a.USERS;default:return null}},s=e=>{switch(e){case a.PINS_MINE:return 107;case a.PINS_BUYABLE:return 254;case a.PINS_VIDEO:return 3306;case a.BOARDS:return 44;case a.USERS:return 45;case a.MY_CONTENT:return 189;case a.PINS:default:return 43}},o=e=>{switch(e){case a.PINS:return 60;case a.PINS_MINE:case a.MY_CONTENT:return 63;case a.PINS_BUYABLE:return 3800;case a.PINS_VIDEO:return 64;case a.BOARDS:return 61;case a.USERS:return 62;default:return null}},d=(e,i)=>{if(i)switch(e){case a.USERS:return 1000392;case a.PINS_BUYABLE:return 1000391;case a.PINS:default:return 29}switch(e){case a.USERS:return 1000432;case a.PINS_BUYABLE:return 1000433;case a.PINS:default:return 1000269}}},648284:(e,i,t)=>{"use strict";t.d(i,{Ht:()=>n,Tb:()=>l});var a=t(595371);function l({appliedProductFilters:e,autoCorrectionDisabled:i,filters:t,query:a,scope:l,selectedPinImgSig:n,user:r}){let s=[l,t,e,r,n,a].map(e=>null!=e?e:"").join(":");return i?"auto-correction-disabled:"+s:s}function n(e){let{autoCorrectionDisabled:i,appliedProductFilters:t,appliedFilters:l,domains:n,filters:r,guidedSearchQuery:s,pageSize:o,priceMax:d,priceMin:u,selectedPinImgSig:c,query:p,rs:m,scope:g,bubbleId:h,topPinId:_,user:y}=e,f=function({autoCorrectionDisabled:e=!1,appliedFilters:i=null,appliedProductFilters:t=null,bubbleId:l=null,domains:n=null,filters:r=null,pageSize:s=null,priceMax:o=null,priceMin:d=null,query:u=null,rs:c=a.i.DIRECT_NAVIGATION,scope:p="pins",selectedPinImgSig:m=null,sourceId:g=null,topPinId:h=null,user:_}){return{article:l,applied_filters:i,appliedProductFilters:t,auto_correction_disabled:e,corpus:m?"personalize":null,customized_rerank_type:m?"manas_graph_sage_only_wand_rewrite":null,domains:n,filters:r,page_size:s,price_max:o,price_min:d,query:u,query_pin_sigs:m,redux_normalize_feed:!0,rs:c,scope:p,source_id:g,top_pin_id:h,user:_}}({autoCorrectionDisabled:!!i,appliedProductFilters:t,appliedFilters:l,domains:n,pageSize:o,priceMax:d,priceMin:u,filters:r,guidedSearchQuery:s,query:p,rs:m,scope:g,selectedPinImgSig:c,bubbleId:h,topPinId:_,user:y});return{name:"BaseSearchResource",options:f}}},223815:(e,i,t)=>{"use strict";t.d(i,{U:()=>r,Z:()=>s});var a=t(755742),l=t(785893);let n=()=>{},r=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function s({allowClickAndDrag:e,allowEsc:i,allowMediaPlay:t,allowScroll:s,children:o}){let d=e=>{i&&e.keyCode===a.Z.ESCAPE||r(e)};return(0,l.jsx)("div",{onAbort:r,onAnimationEnd:r,onAnimationIteration:r,onAnimationStart:r,onBlur:n,onCanPlay:t?n:r,onCanPlayThrough:r,onChange:r,onClick:e?n:r,onCompositionEnd:r,onCompositionStart:r,onCompositionUpdate:r,onContextMenu:r,onCopy:r,onCut:r,onDoubleClick:r,onDurationChange:r,onEmptied:r,onEncrypted:r,onEnded:r,onError:r,onFocus:n,onInput:r,onInvalid:r,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:r,onLoadedData:r,onLoadedMetadata:r,onLoadStart:r,onMouseDown:r,onMouseEnter:r,onMouseLeave:r,onMouseMove:e?n:r,onMouseOut:r,onMouseOver:r,onMouseUp:e?n:r,onPaste:r,onPause:r,onPlay:r,onPlaying:r,onProgress:r,onRateChange:r,onScroll:s?n:r,onSeeked:r,onSeeking:r,onSelect:r,onStalled:r,onSubmit:r,onSuspend:r,onTimeUpdate:r,onTouchCancel:r,onTouchEnd:e?n:r,onTouchMove:e?n:r,onTouchStart:e?n:r,onTransitionEnd:r,onVolumeChange:r,onWaiting:r,onWheel:r,children:o})}},622096:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(238381);let l=(0,a.Z)({type:"session"}),n=l},994912:(e,i,t)=>{"use strict";function a(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}t.d(i,{Z:()=>a})},985913:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(858142);let l=/\{\{\s*(\w+)\s*\}\}/g,n=(e,i)=>(0,a.Z)(l,e,i)},858791:(e,i,t)=>{"use strict";t.d(i,{Z:()=>a});let a=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},858142:(e,i,t)=>{"use strict";t.d(i,{Z:()=>a});let a=(e,i,t)=>i?i.replace(e,(e,i)=>t&&Object.prototype.hasOwnProperty.call(t,i)?t[i]:""):""},66699:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(985913),l=t(858791);let n=(e,i)=>{let t={};return Object.keys(i).forEach(e=>{t[e]=i[e]?(0,l.Z)(i[e].toString()):""}),(0,a.Z)(e,t)}},70061:(e,i,t)=>{"use strict";function a(e){return e.replace(/[_.-](\w|$)/g,(e,i)=>i.toUpperCase())}t.d(i,{Z:()=>a})},52022:(e,i,t)=>{"use strict";t.d(i,{S:()=>s,Z:()=>o});var a=t(667294),l=t(616550),n=t(53987),r=t(867820);let s=e=>(0,n.L6)(e)?"pin":(0,n.am)(e)?"board":(0,n.Xn)(e)?"login":(0,n.C$)(e)?"home":(0,n.cD)(e)?"profile":(0,n.dr)(e)?"ideas":(0,n.gT)(e)?"ideas-root":(0,n.tZ)(e)?"videos":(0,n.Q0)(e)?"videos-category":(0,n.$Y)(e)?"article":(0,n.E0)(e)?"shopping-spotlight":(0,n.Zz)(e)?"today":(0,n.j8)(e)?"unauth-profile":(0,n.f1)(e)?"shopping-root":(0,n.OX)(e)?"shopping-category":"other";function o(){let e=(0,l.useLocation)();return(0,a.useCallback)(({action:i,item:t,within:a})=>{let l=s(e);(0,r.My)(`logged_out_product.interaction.${l}.${i}`,{item:t||"none",within:a||"none"})},[e])}},343341:(e,i,t)=>{"use strict";t.d(i,{F9:()=>n,Zo:()=>l});var a=t(425288);let{Provider:l,useHook:n}=(0,a.Z)("toastManagerContext")},280446:(e,i,t)=>{"use strict";function a(e){if((e||"").includes("--")){let i=e.split("--"),t=i.pop();return{text:i.join("--"),pinId:t}}return{text:"",pinId:e}}t.d(i,{Z:()=>a})},311541:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(667294);function l(e,i){let t=(0,a.useRef)([]),[l,n]=(0,a.useState)(),[r,s]=(0,a.useReducer)(null!=l?l:()=>i,i),o=(0,a.useCallback)(i=>{l?s(i):(t.current.length||e().then(e=>{n(()=>e.default)}),t.current=[...t.current,i])},[e,l]);return(0,a.useEffect)(()=>{l&&(t.current.forEach(s),t.current=[])},[l]),[r,o]}},215292:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r,q:()=>n});var a=t(667294);let l=()=>{let[e,i]=(0,a.useState)(!1),[t,l]=(0,a.useState)(!1),[n,r]=(0,a.useState)(!1);return{active:e,focused:t,hovered:n,onBlur:()=>{l(!1),i(!1)},onFocus:()=>l(!0),onMouseDown:()=>i(!0),onMouseEnter:()=>r(!0),onMouseLeave:()=>{r(!1),i(!1)},onMouseUp:()=>i(!1)}};function n({children:e}){let i=l();return e(i)}let r=l},411465:(e,i,t)=>{"use strict";t.d(i,{G:()=>s,Z:()=>o});var a=t(667294),l=t(616550),n=t(785893);let r=(0,a.createContext)(!0);function s({children:e}){let i=(0,l.useLocation)(),[t,s]=(0,a.useState)(!0),o=(0,a.useRef)(i);return(0,a.useEffect)(()=>{o.current!==i&&(o.current=i,s(!1))},[i]),(0,n.jsx)(r.Provider,{value:t,children:e})}function o(){return(0,a.useContext)(r)}},458101:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(667294);let l=()=>{let e=(0,a.useRef)(!1);return(0,a.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},307603:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(985057);function l({x:e,y:i,w:t,h:l},n){return(0,a.Z)({x:e,y:i,w:t,h:l})?{x:n?parseInt(e,10):parseFloat(e),y:n?parseInt(i,10):parseFloat(i),w:n?parseInt(t,10):parseFloat(t),h:n?parseInt(l,10):parseFloat(l)}:{x:0,y:0,w:1,h:1}}},255164:(e,i,t)=>{"use strict";function a(e){let i;switch(e){case 1:i=1;break;case 2:i=2;break;case 3:i=3;break;case 4:i=4;break;case 5:i=5;break;case 6:i=6}return i}t.d(i,{Z:()=>a})},975540:(e,i,t)=>{"use strict";function a({cropArea:{x:e,y:i,w:t,h:a},scaledWidth:l,scaledHeight:n}){return{x:e/l,y:i/n,w:t/l,h:a/n}}t.d(i,{Z:()=>a})},599611:(e,i,t)=>{"use strict";function a({cropArea:e,scaledWidth:i,scaledHeight:t}){let a=e.h||0,l=e.w||0,n=e.x||0,r=e.y||0;return{h:Math.floor(a*t),w:Math.floor(l*i),x:Math.floor(n*i),y:Math.floor(r*t)}}t.d(i,{Z:()=>a})},94047:(e,i,t)=>{"use strict";function a({cropArea:e,cropSource:i,requestParams:t,searchQuery:a,surfaceType:l,title:n,trafficSource:r}){let s=[];if(e){let{x:i,y:t,w:a,h:l}=e;i>=0&&t>=0&&a>=0&&l>=0&&s.push(`x=${i}`,`y=${t}`,`w=${a}`,`h=${l}`)}i&&s.push(`cropSource=${i}`),l&&s.push(`surfaceType=${l}`),n&&s.push(`full_feed_title=${encodeURIComponent(n)}`),a&&s.push(`q=${a}`),r&&"unknown"!==r&&s.push(`rs=${r}`),t&&s.push(`requestParams=${encodeURIComponent(t)}`);let o=s.length?`?${s.join("&")}`:"";return o}t.d(i,{Z:()=>a})},297852:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(94047);function l({cropArea:e,cropSource:i,isProductPage:t,pinId:l,requestParams:n,searchQuery:r,surfaceType:s,title:o,trafficSource:d}){let u=(0,a.Z)({cropArea:e,cropSource:i,requestParams:n,searchQuery:r,surfaceType:s,title:o,trafficSource:d}),c="";return t&&(c="products/"),`/pin/${l}/visual-search/${c}${u}`}},985057:(e,i,t)=>{"use strict";function a({x:e,y:i,w:t,h:a}){return[e,i,t,a].every(e=>""!==e&&null!=e&&Number.isFinite(Number(e)))}t.d(i,{Z:()=>a})},873476:(e,i,t)=>{"use strict";t.d(i,{Z:()=>o});var a=t(667294),l=t(616550),n=t(826067),r=t(50286),s=t(829407);function o(){let e=(0,r.HG)(),{action:i}=(0,l.useHistory)(),{path:t}=(0,l.useRouteMatch)(),o=(0,l.useLocation)(),{entry:d}=(0,n.mB)(o.search),u="/pin/:id/related-products/all"===t,c="/pin/:id/visual-search/products"===t,[p,m]=(0,a.useState)(()=>{if("PUSH"!==i)return null;if(e){if(u&&("flashlight"===d||"stela"===d))return"feed_module";if("shop"===d)return"shop_the_look_module"}else if(c)return"feed_module";return null});return(0,s.Z)(()=>{m(null)}),p}},869899:(e,i,t)=>{"use strict";t.r(i),t.d(i,{RoleBasedAccessControlProvider:()=>x,useRoleBasedAccessControlContext:()=>v});var a=t(667294),l=t(425288),n=t(773285),r=t(784590),s=t(19121),o=t(389643),d=t(339363),u=t(70061);let c=e=>{let i={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&("object"!=typeof e[t]||null===e[t]||Array.isArray(e[t])?i[(0,u.Z)(t)]=e[t]:i[(0,u.Z)(t)]=c(e[t]));return i},p=(e,i)=>{let t=[];for(let a in e)a!==i&&t.push({id:a,...c(e[a])});let a=t.sort(({user:{businessName:e}},{user:{businessName:i}})=>e.localeCompare(i)),l=new Map;for(let e of a)l.set(e.id,e);return l},m={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},g=(e,i)=>{switch(i.type){case"LOAD_PROFILES":return{...e,profiles:i.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:i.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:i.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:i.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:i.payload};default:return e}},h=({dispatch:e,isEnabled:i,state:t})=>{let{orbacVisibility:l,disableProfileChanger:n,headerVisible:r}=t,s=(0,a.useCallback)(t=>{i&&e({type:"SET_ACTIVE_PROFILE",payload:t})},[i,e]),o=(0,a.useCallback)(t=>{i&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=t?t:!l})},[i,e,l]),d=(0,a.useCallback)(t=>{i&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=t?t:!n})},[i,e,n]),u=(0,a.useCallback)(t=>{i&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=t?t:!r})},[i,e,r]);return{changeProfile:s,toggleORBACVisibility:o,toggleDisableProfileChanger:d,toggleHeaderVisibility:u}},_=e=>{let[i,t]=(0,a.useReducer)(g,m),l=h({dispatch:t,isEnabled:e,state:i}),{activeProfile:n,orbacVisibility:r}=i;(0,a.useEffect)(()=>{let e=(0,d.qn)("orbacActiveProfile",!1);e&&t({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,a.useEffect)(()=>{let e=(0,d.qn)("orbacVisibilty",!1);e&&t({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,a.useEffect)(()=>{(0,d.Nh)("orbacVisibility",r)},[r]),(0,a.useEffect)(()=>{(0,d.Nh)("orbacActiveProfile",n)},[n]);let s=(0,a.useCallback)((e,i)=>{t({type:"LOAD_PROFILES",payload:p(e,i)})},[t]);return{state:i,actions:l,receiveProfiles:s}};var y=t(785893);let{Provider:f,useMaybeHook:v}=(0,l.Z)("RoleBasedAccessControlContext"),x=({children:e})=>{let i;let{checkExperiment:t}=(0,n.F)(),l=(0,s.Z)(),d=!!(l.isAuth&&l.isPartner&&t("web_m10n_business_access_orbac_www").anyEnabled),{state:u,actions:c,receiveProfiles:p}=_(d),{activeProfile:m,headerVisible:g,profiles:h=[]}=u,v=h?Array.from(h.values()):[],x=(0,o.Z)(v),S=!!l.isAuth&&v.length>0&&x,b=l.isAuth?l.id:"",E=l.isAuth?l.username:"",{changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:T,toggleHeaderVisibility:w}=c;(0,a.useEffect)(()=>{if(d){if("string"==typeof x){P(x);return}m||P(b)}},[x,b,d,P,m]),(0,a.useEffect)(()=>{d&&(S&&!g&&w(!0),!S&&g&&w(!1))},[w,S,d,g,h]);let{data:k}=(0,r.Z)(d?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),A=null==k?void 0:k.profiles;l&&l.isAuth&&u.activeProfile===l.id?i={id:l.id,permissions:["OWNER"],user:{username:E,businessName:l.fullName,imgUrl:l.imageSmallUrl}}:m&&u.profiles&&(i=u.profiles.get(m)),(0,a.useEffect)(()=>{A&&p(A,b)},[p,A,b]);let R=u.profiles?Array.from(u.profiles.values()):[];return(0,y.jsx)(f,{value:{profiles:R,headerVisible:u.headerVisible,activeProfile:i,changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:T,toggleHeaderVisibility:w},children:e})}},717615:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r});var a=t(773285),l=t(869899),n=t(389643);let r=()=>{let{checkExperiment:e}=(0,a.F)(),i=(0,l.useRoleBasedAccessControlContext)(),{activeProfile:t}=i||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,s=(0,n.Z)((null==i?void 0:i.profiles)||[]),{anyEnabled:o}=e("useorbacroutematcher_in_useorbacactingas");return r&&(!o||s)&&t&&(t.viewerMeetsMfaRequirement||(t.permissions||[]).includes("OWNER"))?t:Object.freeze({})}},389643:(e,i,t)=>{"use strict";t.d(i,{Z:()=>o});var a=t(616550),l=t(53987),n=t(773285),r=t(19121),s=t(350118);let o=e=>{var i,t,o,d;let u=(0,a.useLocation)(),c=(0,r.Z)(),p=(0,s.S6)(),{anyEnabled:m}=(0,n.F)().checkExperiment("web_m10n_business_access_orbac_www"),g=(0,a.useRouteMatch)("/:username"),h=null==g?void 0:null===(i=g.params)||void 0===i?void 0:i.username,_=(0,a.useRouteMatch)("/pin/:id"),y=null!=_&&null!==(t=_.params)&&void 0!==t&&!!t.id&&(null===(o=p(_.params.id))||void 0===o?void 0:null===(d=o.pinner)||void 0===d?void 0:d.id);if((0,l.ej)(u))return!1;if((0,l.RU)(u))return!0;if((0,l.mY)(u))return m;let f=e.concat(c.isAuth?{user:{username:c.username},id:c.id}:{}).find(e=>{let{user:i={},id:t}=e||{},{username:a}=i;return(!!a&&!!h||!!y&&!!t)&&(a===h||y===t)});return!!f&&f.id}},231947:(e,i,t)=>{"use strict";t.d(i,{D3:()=>d,DX:()=>s,KY:()=>u,Ms:()=>a,N1:()=>c,_P:()=>r,lJ:()=>n,nl:()=>l,q6:()=>o});let a=(e,i)=>{let t=e&&e.isAuth?e.username:"";return e&&i&&i.user&&i.user.username&&(t=i.user.username),t},l=(e,i)=>!!(i&&i.user&&e&&e.isAuth&&i.id!==e.id?i.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),n=(e,i)=>e&&e.isAuth&&i&&i.id&&i.id!==e.id?i.id:"",r=(e,i,t)=>{var a;return t&&t.user&&i&&i.isAuth&&t.id!==i.id?t.user.merchantId:null===(a=e.advertiser)||void 0===a?void 0:a.merchant_id},s=(e,i,t)=>t&&t.user&&e.isAuth&&t.id!==e.id?t.user.scheduledPinCount||0:e.isAuth&&i&&i.scheduled_pin_count||0,o=(e,i,t)=>{let a=e&&e.isAuth&&t&&t.id&&t.id!==e.id&&t.id===i;return!!a},d=(e,i,t)=>{let a=o(e,i,t)||e&&e.isAuth&&i===e.id;return!!a},u=(e,i,t)=>{let a=i&&i.owner&&i.owner.id||"";return d(e,a,t)};function c(e,i,t){let a=i?i.id:"";return d(e,a,t)}},225692:(e,i,t)=>{"use strict";t.d(i,{X:()=>l,Z:()=>n});var a=t(667294);let l=120;function n(e,i=0,t=l){let[n,r]=(0,a.useState)(e?"active":"inactive");return(0,a.useEffect)(()=>{if(e){if(i){let e=setTimeout(()=>r("active"),i);return()=>{clearTimeout(e)}}r("active")}else{let e=setTimeout(()=>r("inactive"),t);return()=>{clearTimeout(e)}}},[e]),n}},841509:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(883119),l=t(785893);function n({children:e,additionalStyles:i={}}){return(0,l.jsx)(a.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...i}},"data-test-id":"contentLayer",children:e})}},525199:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r});var a=t(883119),l=t(225692),n=t(785893);function r({children:e,fadeInDuration:i=0,fadeOutDuration:t=l.X,visibility:r}){return"none"!==r&&e?(0,n.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:i?`opacity ${i}ms ease`:void 0}}[r]},children:e}):null}},427806:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(883119),l=t(785893);function n({text:e}){return(0,l.jsx)(a.xu,{display:"visuallyHidden",children:(0,l.jsx)(a.X6,{accessibilityLevel:1,children:e})})}},872482:(e,i,t)=>{"use strict";t.d(i,{D:()=>l,a:()=>n});var a=t(425288);let{Provider:l,useMaybeHook:n}=(0,a.Z)("unauthPageWrapperContext")},8742:(e,i,t)=>{"use strict";t.d(i,{CC:()=>d,ZP:()=>m,hW:()=>u}),t(167912);var a,l=t(240684),n=t(357998),r=t(50286),s=t(19121),o=t(785893);let d=(0,l.ZP)({resolved:{},chunkName:()=>"AuthDesktopPinRep",isReady(e){let i=this.resolve(e);return!0===this.resolved[i]&&!!t.m[i]},importAsync:()=>Promise.all([t.e(67631),t.e(60310),t.e(12058),t.e(40566),t.e(2984)]).then(t.bind(t,656226)),requireAsync(e){let i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then(e=>(this.resolved[i]=!0,e))},requireSync(e){let i=this.resolve(e);return t(i)},resolve:()=>656226}),u=(0,l.ZP)({resolved:{},chunkName:()=>"DefaultPinRep",isReady(e){let i=this.resolve(e);return!0===this.resolved[i]&&!!t.m[i]},importAsync:()=>Promise.all([t.e(97270),t.e(10966),t.e(18352),t.e(40566),t.e(39921)]).then(t.bind(t,369083)),requireAsync(e){let i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then(e=>(this.resolved[i]=!0,e))},requireSync(e){let i=this.resolve(e);return t(i)},resolve:()=>369083}),c=void 0!==a?a:a=t(875666),p=e=>({});function m(e){let i=(0,r.HG)(),t=(0,s.Z)(),a=t&&t.isAuth&&i,{data:l}=(0,n.Q)(c,e.duploQueryRef,{useLegacyAdapter:p});if(a&&!e.duploQueryRef){let{disableReaction:i,disableRounding:t,disableAppUpsell:a,duploDedupeVisualAnnotations:l,duploDisablePinCardPadding:n,duploFeedItemProps:r,duploIsSquarePin:s,duploLazyLoadImage:u,duploOneTapSave:c,duploPinCardDetailsMargin:p,duploPriorityFetchImage:m,duploQueryRef:g,duploShouldAddNiiSearchParamToImageUrls:h,duploShouldAllowProductPriceIndicator:_,duploConversationPin:y,topLevelTrafficSource:f,topLevelTrafficSourceDepth:v,trafficSource:x,...S}=e;return(0,o.jsx)(d,{...S})}let{attributionOption:m,blockClickEvents:g,borderStyle:h,disableHover:_,imageHeightModifier:y,imageOnlyOption:f,onError:v,onLoad:x,pin:S,pinImageCrop:b,pinImageFit:E,resolution:P,rounding:I,saveButtonOptions:T,authDesktopSelectionState:w,authDesktopSurface:k,pinOwner:A,...R}=e;return(0,o.jsx)(u,{...R,duploQueryRef:l})}},350118:(e,i,t)=>{"use strict";t.d(i,{AF:()=>s,H0:()=>o,S6:()=>d,_S:()=>u});var a=t(702664),l=t(425288),n=t(785893);let{Provider:r,useHook:s,useMaybeHook:o}=(0,l.Z)("Pins");function d(){let e=s();return i=>e[i]}function u({children:e}){let i=(0,a.useSelector)(({pins:e})=>e,a.shallowEqual);return(0,n.jsx)(r,{value:i,children:e})}},284367:(e,i,t)=>{"use strict";t.d(i,{Z:()=>h});var a=t(667294),l=t(883119),n=t(920231),r=t(444445),s=t(317254),o=t(740990),d=t(50286),u=t(829407),c=t(679031),p=t(889884),m=t(698629),g=t(785893);function h({customLayoutType:e,emptyState:i,feedItems:t,feedKey:h,pagination:{hasNext:_,isLoadingNext:y,loadNext:f,refetch:v},pullToRefresh:x,renderFeedItem:S,serverRender:b}){let E=(0,d.HG)(),[P,I]=(0,a.useState)(!1),T="userSearch"===e?window.innerWidth-16:200,w=y&&0===t.length&&!P,k="desktopFlashlight"===e?0:r.qG;return(0,u.Z)(()=>(window.addEventListener("online",f),()=>window.removeEventListener("online",f))),(0,g.jsxs)(l.xu,{"data-test-id":"MobileFeed",children:[(0,g.jsx)(p.Z,{enabled:!!x,onPull:()=>{v(),I(!0)},refreshing:P}),(0,g.jsxs)(l.xu,{marginStart:k,marginEnd:k,"data-test-id":"grid",opacity:P?.5:1,children:[(0,g.jsx)(s.Z,{isAtEndOfFeed:!_,itemCount:t.length,children:t.length?(0,g.jsx)(l.xu,{"data-test-id":"feed",marginTop:(0,c.kk)({isDesktop:E}),children:(0,g.jsx)(o.Z.Consumer,{children:i=>(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(c.c$,{children:(0,g.jsx)(n.Z,{cacheKey:h,id:b?h:void 0,items:t,scrollContainerRef:i,serverRender:b,columnWidth:E?r.yF:T,renderItem:({data:e,itemIdx:i})=>S(e,i),gutterWidth:E?4*r.jC:void 0,loadItems:f,minCols:"userSearch"===e?1:2})})})})}):y?(0,g.jsx)(c.gG,{}):null!=i?i:null}),w&&(0,g.jsx)(l.xu,{column:12,paddingY:2,children:(0,g.jsx)(m.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},92261:(e,i,t)=>{"use strict";t.d(i,{$T:()=>_,CI:()=>n,Ch:()=>s,Gb:()=>o,Gg:()=>a,Ie:()=>p,KP:()=>m,Kn:()=>r,Uj:()=>d,bx:()=>g,d2:()=>c,g9:()=>h,iB:()=>y,u6:()=>l,zT:()=>u});let a=508,l=2*a,n=488,r=992,s=672,o=1176,d=.6,u=.84,c=40,p=72,m=740,g=912,h=32,_=24,y={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},398789:(e,i,t)=>{"use strict";t.d(i,{Z:()=>b});var a=t(667294),l=t(883119),n=t(898781),r=t(773285),s=t(523657),o=t(780280),d=t(700380),u=t(50286),c=t(411465),p=t(398061),m=t(616550),g=t(667679),h=t(622096),_=t(867820),y=t(52022),f=t(785893);function v({setShowClickthroughOverlay:e,isEligibleForPdp:i,isEligibleForDesktopSocialInviteOverlay:t,inviterFirstName:s,imageSignature:o,pinId:d}){let c=(0,n.ZP)(),p=(0,y.Z)(),v=(0,g.Z)(),{checkExperiment:x}=(0,r.F)(),S=(0,a.useRef)(),b=(0,u.ZP)(),E="desktop"===b,P=s&&t,I=E&&x("dweb_unauth_main_pin_visual_search_v2").group,T="enabled_2_no_upsell"===I||"enabled_rollout"===I||"enabled_1_nav_upsell_post_land"===I,w=P&&(c._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",s),k=T?c._('See something you like? Tap to search inside this image', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'):c._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),A=c._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),R=(0,m.useHistory)();return(0,f.jsx)(l.iP,{onMouseEnter:()=>{P&&(0,_.My)("dweb.main_pin.social.wash.view"),(0,_.My)("dweb.pin.wash.view")},onMouseLeave:()=>{P&&(0,_.My)("dweb.main_pin.social.wash.dismiss"),(0,_.My)("dweb.pin.wash.dismiss")},onTap:({event:e})=>{if(E){if(e.preventDefault(),p({action:"click",item:"pin-image"}),t&&s&&(0,_.My)("dweb.main_pin.social.wash.click"),T){let e=`/pin/${d}/visual-search/?`;o&&(e+=`imageSignature=${o}`),R.push(e),h.Z.setItem("VISUAL_SEARCH_SOURCE","MAIN_PIN_WASH")}else(0,_.My)("dweb_unauth_main_pin_image_click.signup_modal.show"),v({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}});i&&(0,_.My)("unauth.pdp.pin.img.click",{device:b})}},children:(0,f.jsxs)(l.xu,{zIndex:new l.Ry(2),children:[(0,f.jsx)(l.xu,{top:!0,bottom:!0,left:!0,right:!0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:t?"center":void 0,direction:"column",position:"absolute",ref:S,"data-test-id":"main-pin-hover-overlay",children:(0,f.jsx)(l.xu,{paddingY:10,display:"flex",alignItems:"center",maxWidth:T?260:240,direction:"column",children:(0,f.jsx)(l.xu,{marginTop:8,children:(0,f.jsx)(l.X6,{size:P?"500":"400",align:"center",color:"light",children:E?w||k:A})})})}),!E&&(0,f.jsx)(l.xu,{position:"absolute",top:!0,right:!0,marginTop:4,marginEnd:4,children:(0,f.jsx)(l.hU,{icon:"cancel",iconColor:"white",onClick:({event:i})=>{i.stopPropagation(),e&&(e(!1),(0,_.My)("main.pin.wash.cancel"))},accessibilityLabel:c._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),size:"md"})})]})})}var x=t(691720),S=t(872482);let b=e=>{var i;let t=(0,n.ZP)(),{alt:m,clickthroughOverlayOptions:g,color:h,isFlashlightPage:_,naturalHeight:y,naturalWidth:b,placeholder:E,pinImageResizePercent:P=100,pwtElementTimingId:I,pwtSurfaceContext:T,setShowClickthroughOverlay:w,showSpinner:k,src:A,stickyFooter:R,isEligibleForPdp:C,pinId:F,imageSignature:D}=e,O=(0,c.Z)(),{checkExperiment:j}=(0,r.F)(),L=!O,{isAuthenticated:N}=(0,o.B)(),M=(0,u.ZP)(),Z="desktop"===M,K=N&&!Z&&j("auth_mweb_inline_action_bar").anyEnabled,z=(0,a.useRef)(),[U,B]=(0,a.useState)(!L||!!A&&!!E&&E===A),H=(0,a.useRef)(""),$=()=>{T&&T.markConstraintComplete("PinPageMainImageRendered")};(0,a.useEffect)(()=>{let e=new Image;e.onload=()=>B(!0),e.src=A},[]);let G=(0,a.useRef)(null===(i=(0,S.a)())||void 0===i?void 0:i.setHasScrolledPastMainContent);(0,a.useEffect)(()=>{let e=(0,d.Z)(()=>{if(z.current){var i;let t=window.scrollY>z.current.offsetTop+z.current.offsetHeight;null===(i=G.current)||void 0===i||i.call(G,t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[V,W]=(0,a.useState)();(0,a.useEffect)(()=>{z.current&&W(z.current.scrollHeight)},[]);let Y=!_&&"tablet"===M,q=L?(0,f.jsx)(s.Z,{alt:m,color:h,elementTiming:I,naturalHeight:y,naturalWidth:b,src:E,onLoad:$}):null;return(0,f.jsxs)(l.xu,{"data-test-id":"pin-closeup-image",dangerouslySetInlineStyle:{__style:{transition:100===P?"":"width 500ms ease-in-out"}},maxHeight:"100%",minHeight:100===P?V:void 0,maxWidth:"tablet"===M?x.g6:void 0,overflow:R?void 0:"hidden",position:"relative",width:_||"phone"===M?`${P}%`:Z?508:x.Hg,rounding:_||"phone"===M?0:6,ref:z,marginTop:"tablet"===M&&K?12:0,children:[!N&&g&&"enabled_3_no_wash_upsell_post_land"!==j("dweb_unauth_main_pin_visual_search_v2").group&&(0,f.jsx)(p.Z,{isImagePinForUnauthOnTablet:!1,children:(0,f.jsx)(v,{setShowClickthroughOverlay:w,inviterFirstName:H.current,isEligibleForPdp:C,imageSignature:D||"",pinId:F||""})}),q&&(Y?(0,f.jsx)(l.xu,{rounding:6,overflow:"hidden",children:q}):q),(0,f.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:U?1:0,transition:U&&!Z?"opacity .5s ease-in-out":void 0,backgroundColor:h}},left:!0,position:L?"absolute":"relative",right:!0,rounding:Y?6:5,overflow:Y?"hidden":void 0,top:!0,children:L?(0,f.jsx)(l.Ee,{alt:m,naturalHeight:y,naturalWidth:b,src:A}):(0,f.jsx)(s.Z,{alt:m,color:h,elementTiming:I,naturalHeight:y,naturalWidth:b,src:A,onLoad:$})}),k&&(0,f.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:U?0:1,transition:U?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!U&&(0,f.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,f.jsx)(l.$j,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),R]})}},998651:(e,i,t)=>{"use strict";t.d(i,{L:()=>o,r:()=>s});var a=t(385740),l=t(595371),n=t(909499);let r=["search_articles_story","search_for_you_upsell","search_story_separator","search_story_landing_page_header","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","guided_search_entry_points_story"];function s({query:e,rs:i,scope:t},r){let s=(0,a.BE)(),o=!(null!=s&&s.viewType)&&!(null!=s&&s.viewParameter),d=(0,n.wF)(t);if(!o&&d){let{viewType:t,viewParameter:a}=null!=s?s:{};r({event_type:d,view_type:t,view_parameter:a,aux_data:{query:e,rs:i||l.i.UNKNOWN}})}i===l.i.HASHTAG_CLOSEUP?r({event_type:101,component:13065,element:10273,view_type:142}):i===l.i.HASHTAG_PINREP&&r({event_type:101,component:0,element:10349,view_type:142})}let o=(e=[])=>{let i=!0;return e.reduce((e,t)=>{var a;return i&&t.story_type&&r.includes(t.story_type)&&(null===(a=t.display_options)||void 0===a?void 0:a.num_columns_requested)===0?e.searchFullWidthStories.push(t):(i=!1,e.filteredResults.push(t)),e},{searchFullWidthStories:[],filteredResults:[]})}},96939:(e,i,t)=>{"use strict";t.d(i,{Z:()=>r});var a=t(883119),l=t(65675),n=t(785893);function r({coverImages:e,height:i,isHovered:t,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:d,text:u,url:c,width:p}){let m=e&&(e["236x"]||e["280x280"]);return(0,n.jsx)(l.Z,{backgroundColor:"gray",coverImage:m,height:i,isHovered:t,onClick:r,onMouseEnter:s,onMouseLeave:o,url:c,width:p,children:(0,n.jsx)(a.xu,{alignItems:"center",display:"flex",height:i,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===d?(0,n.jsx)(a.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,n.jsx)(a.X6,{align:"center",size:"500",color:"light",children:u})}):(0,n.jsx)(a.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,n.jsx)(a.xv,{align:"center",weight:"bold",children:u})})})})}},65675:(e,i,t)=>{"use strict";t.d(i,{A:()=>r,Z:()=>s});var a=t(667294),l=t(883119),n=t(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:i,coverImage:t,disableTabIndex:s,height:o,id:d,isHovered:u,onClick:c,onMouseDown:p,onMouseEnter:m,onMouseLeave:g,searchBoxRenderStopwatch:h,url:_,width:y}){var f,v;let[x,S]=(0,a.useState)(!1),b=()=>{m?m():S(!0)},E=()=>{g?g():S(!1)},P=u||x,I=P?r.hoverOverlay:r.bubbleOverlay;return(0,n.jsx)(l.Tg,{href:_,onBlur:E,onFocus:b,onMouseDown:p,onMouseEnter:b,onMouseLeave:E,onTap:()=>{null==c||c(d)},rounding:4,tabIndex:s?-1:void 0,children:(0,n.jsx)(l.zd,{rounding:4,width:y||"100%",height:o,children:null!=t&&t.url?(0,n.jsxs)(l.Ee,{alt:"",color:e,fit:"cover",naturalHeight:null!==(f=t.height)&&void 0!==f?f:1,naturalWidth:null!==(v=t.width)&&void 0!==v?v:1,onLoad:()=>{null==h||h.stop()},role:"presentation",src:t.url,children:[(0,n.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:I},height:"100%",width:"100%"}),"function"==typeof i?i({isHovered:P}):i]}):(0,n.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},272984:(e,i,t)=>{"use strict";t.d(i,{Z:()=>eP});var a,l,n,r=t(167912),s=t(616550),o=t(883119),d=t(934494),u=t(898781),c=t(773285),p=t(784590),m=t(280446),g=t(667294),h=t(363957),_=t(362810),y=t(356997),f=t(357998),v=t(349700),x=t(867820),S=t(785893);let b=void 0!==a?a:a=t(405410),E=e=>({board:e.board&&{entityId:e.board.id,name:e.board.name,privacy:e.board.privacy,url:e.board.url},pinner:e.pinner&&{entityId:e.pinner.id,fullName:e.pinner.full_name,imageMediumUrl:e.pinner.image_medium_url,imageSmallUrl:e.pinner.image_small_url,username:e.pinner.username}}),P=()=>{(0,x.NC)("click_best_pin_board",!0)},I=()=>{(0,x.NC)("click_best_pin_profile",!0)},T=({pin:e})=>{let{pinner:i}=e,{username:t,fullName:a}=null!=i?i:{},l=(null==i?void 0:i.imageMediumUrl)||(null==i?void 0:i.imageSmallUrl),n=`/${null!=t?t:""}/`;return(0,S.jsx)(o.Tg,{fullWidth:!1,rounding:"circle",href:n,onTap:I,children:(0,S.jsx)(y.qE,{size:"sm",src:null!=l?l:"",name:null!=a?a:"",outline:!0})})},w=({pin:e})=>{let i=(0,u.ZP)(),{board:t,pinner:a}=e,{name:l,privacy:n,url:r}=null!=t?t:{},s=(null==t?void 0:t.entityId)||"",{username:d,fullName:c}=null!=a?a:{},p=`/${null!=d?d:""}/`,m=(0,S.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(o.rU,{display:"inlineBlock",href:p,onClick:I,underline:"hover",children:c})},c);return"protected"===n?(0,v.nk)(i._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:m}):(0,v.nk)(i._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:m,boardName:(0,S.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(o.rU,{href:null!=r?r:"",onClick:P,children:l},"board")},s)})},k=({pinKey:e})=>{let{data:i}=(0,f.Q)(b,e,{useLegacyAdapter:E});return(0,S.jsxs)(o.xu,{display:"flex",direction:"row",alignItems:"center",marginTop:3,"data-test-id":"pin-attribution",children:[(0,S.jsx)(T,{pin:i}),(0,S.jsx)(o.xu,{marginEnd:2}),(0,S.jsx)(o.xv,{size:"200",children:(0,S.jsx)(w,{pin:i})})]})};var A=t(112690);function R({pageType:e,pinCreditPrefix:i,pin:t,pinLink:a,viewParameter:l}){var n,r;let s=(0,u.ZP)(),d=(0,A.Z)();if("topic"!==e.page&&(!t.domain||"Uploaded by user"===t.domain))return null;let c="topic"!==e.page||e.isAuth?"100":"200",p="topic"===e.page&&!!t.nativeCreator,m=p?null===(n=t.nativeCreator)||void 0===n?void 0:n.fullName:t.domain;return(0,S.jsx)(o.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(o.rU,{display:"inlineBlock",href:p?`/${(null===(r=t.nativeCreator)||void 0===r?void 0:r.username)||""}/`:a,onClick:()=>{"topic"===e.page?(0,x.NC)("click_topic_best_pin_link"):d({event_type:12,view_type:3,object_id_str:t.entityId,component:85,view_parameter:l})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(o.xv,{size:c,children:(0,v.nk)(s._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:i,pinCredit:(0,S.jsx)(o.xv,{inline:!0,size:c,weight:"bold",children:(e.page,m)},p?"creatorProfile":"pinLinkDomain")})})})})}var C=t(782534),F=t(178467),D=t(681669),O=t(694379),j=t(248975),L=t(153209),N=t(992750),M=t(269051),Z=t(53199),K=t(692627),z=t(220306),U=t(910164),B=t(780280);let H=void 0!==l?l:l=t(327620),$=e=>{var i,t,a,l,n,r,s;return{category:e.category,closeupUnifiedDescription:e.closeup_unified_description,createdAt:e.created_at,domain:e.domain,embed:e.embed&&{src:e.embed.src,type:e.embed.type},entityId:e.id,gridTitle:e.grid_title,lastRepinDate:e.last_repin_date,nativeCreator:e.native_creator&&{fullName:e.native_creator.full_name,username:e.native_creator.username},pinJoin:e.pin_join&&{visualAnnotation:e.pin_join.visual_annotation&&e.pin_join.visual_annotation.map(e=>e)},repinCount:e.repin_count,richMetadata:e.rich_metadata&&{article:e.rich_metadata.article&&{datePublished:e.rich_metadata.article.date_published},description:e.rich_metadata.description,products:e.rich_metadata.products&&e.rich_metadata.products.map(()=>({__typename:"RichPinProductMetadata"})),recipe:(null===(i=e.rich_metadata)||void 0===i?void 0:i.recipe)&&{categorizedIngredients:e.rich_metadata.recipe.categorized_ingredients&&e.rich_metadata.recipe.categorized_ingredients.map(e=>({category:e.category,ingredients:e.ingredients&&e.ingredients.map(e=>({amt:e.amt,name:e.name}))})),fromAggregatedData:null===(t=e.rich_metadata)||void 0===t?void 0:null===(a=t.recipe)||void 0===a?void 0:a.from_aggregated_data,name:null===(l=e.rich_metadata)||void 0===l?void 0:null===(n=l.recipe)||void 0===n?void 0:n.name,$fragmentSpreads:D.qH,[F.sE]:null===(r=e.rich_metadata)||void 0===r?void 0:r.recipe},title:null===(s=e.rich_metadata)||void 0===s?void 0:s.title},richSummary:e.rich_summary&&{displayName:e.rich_summary.display_name},storyPinData:e.story_pin_data&&{metadata:e.story_pin_data.metadata&&{pinTitle:e.story_pin_data.metadata.pin_title}},storyPinDataId:e.story_pin_data_id,title:e.title}},G=e=>{let i=null;e.lastRepinDate&&(i=new Date(e.lastRepinDate));let t=null;return(e.createdAt&&(t=new Date(e.createdAt)),i)?t?i>t?i:t:i:t},V=e=>{let i="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return i;let t=G(e);if(t&&t.getFullYear()===new Date().getFullYear()){let a=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:l}=e;a.has(l)&&(i=t?(0,S.jsx)(C.Z,{value:t,dateFormatType:C.k.LONG_MONTH_YEAR,useUTC:!1}):"")}return i},W=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),Y=(e,i)=>{var t,a,l;let n=new Date(null!==(t=null===(a=(null!==(l=e.richMetadata)&&void 0!==l?l:{}).article)||void 0===a?void 0:a.datePublished)&&void 0!==t?t:Date.now()),r=n.getTime(),s=new Date().getTime();return null==i||s-r<=31536e6*i?(0,S.jsx)(C.Z,{value:n,dateFormatType:C.k.LONG_MONTH_YEAR,useUTC:!1}):""};function q(e){var i,t,a,l,n,r,s,d,u,c,p,m,g,h,_,y,v,x,b,E,P,I,T;let{pinKey:w,viewportSize:A,pageType:C}=e,{data:F}=(0,f.Q)(H,w,{useLegacyAdapter:$}),{pinCreditPrefix:D,pinLink:G}=(0,M.Z)(F),q=(0,Z.Z)(F),{description:Q}=(0,N.eK)({richMetadataDescription:null===(i=F.richMetadata)||void 0===i?void 0:i.description,richSummaryDisplayName:null===(t=F.richSummary)||void 0===t?void 0:t.displayName,closeupUnifiedDescription:F.closeupUnifiedDescription});"videos_category"===C.page&&(Q=(0,N.kt)(Q,(null===(T=F.nativeCreator)||void 0===T?void 0:T.username)||""));let X="wide"===A,J=(0,N.Ly)({pinTitle:F.title,gridTitle:F.gridTitle,richSummaryDisplayName:null!==(a=null===(l=F.richSummary)||void 0===l?void 0:l.displayName)&&void 0!==a?a:"",richMetadataTitle:null!==(n=null===(r=F.richMetadata)||void 0===r?void 0:r.title)&&void 0!==n?n:"",storyPinDataId:F.storyPinDataId,storyPinDataMetadataPinTitle:null===(s=F.storyPinData)||void 0===s?void 0:null===(d=s.metadata)||void 0===d?void 0:d.pinTitle,pinJoinVisualAnnotation:null===(u=F.pinJoin)||void 0===u?void 0:u.visualAnnotation});(F.gridTitle||"").trim()&&J!==F.gridTitle&&(J=(0,N.EU)(F.gridTitle,200));let ee=(0,L.r)(null===(c=F.richMetadata)||void 0===c?void 0:null===(p=c.recipe)||void 0===p?void 0:p.name,!!(null!==(m=F.richMetadata)&&void 0!==m&&null!==(g=m.recipe)&&void 0!==g&&g.categorizedIngredients),null!==(h=null===(_=F.richMetadata)||void 0===_?void 0:null===(y=_.recipe)||void 0===y?void 0:y.fromAggregatedData)&&void 0!==h&&h)?null===(v=F.richMetadata)||void 0===v?void 0:v.recipe:null,ei=W(F)&&Y(F,2),et=V(F)||ei,{isBot:ea,isSocialBot:el}=(0,B.B)();return(0,S.jsx)(o.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",padding:8,position:"relative",width:"100%",flex:"grow",children:(0,S.jsxs)(o.xu,{position:"relative",direction:"column",display:"flex",flex:"grow",children:[(0,S.jsx)(R,{pageType:C,pin:{entityId:F.entityId,domain:F.domain||"",nativeCreator:F.nativeCreator&&{fullName:F.nativeCreator.fullName,username:F.nativeCreator.username}},pinCreditPrefix:"topic"===C.page&&F.nativeCreator?"Created by":D,pinLink:null!=G?G:"",viewParameter:(0,K.Z)({hasPin:!0,hasPinRichMetadata:!!F.richMetadata,hasPinRichMetadataProducts:!!(null!==(x=F.richMetadata)&&void 0!==x&&x.products),hasPinRichMetadataArticle:!!(null!==(b=F.richMetadata)&&void 0!==b&&b.article),hasPinRichMetadataRecipe:!!(null!==(E=F.richMetadata)&&void 0!==E&&E.recipe),hasPinStoryPinData:!!F.storyPinData})}),(0,S.jsx)(o.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(o.xu,{display:"flex",overflow:"hidden",marginEnd:X?0:3,marginTop:X?3:0,children:J&&(0,S.jsx)("h2",{style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},"data-test-id":"UnauthBestPinCardTitle",children:J})})}),et?(0,S.jsx)(o.xu,{marginTop:1,children:(0,S.jsx)(o.xv,{color:"subtle",children:et})}):null,Q&&(0,S.jsx)(o.xu,{display:"flex",overflow:"hidden",marginTop:3,children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[ee&&(0,S.jsx)(U.Z,{recipeKey:ee}),Q]})}),ee&&(0,S.jsx)(z.Z,{marginOverrides:ee?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:ee.categorizedIngredients,name:ee.name,image:(0,j.Z)({imagesUrls:q,embedSrc:null===(P=F.embed)||void 0===P?void 0:P.src,embedType:null===(I=F.embed)||void 0===I?void 0:I.type,excludeOriginals:!ea&&!el})}}}),(0,S.jsxs)(o.xu,{display:"flex",alignItems:"center",direction:"row",justifyContent:"between",marginTop:2,children:[(0,S.jsx)(k,{pinKey:F}),(0,S.jsx)(o.kC,{alignItems:"stretch",justifyContent:"end",children:!F.repinCount||F.repinCount<1?null:(0,S.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,S.jsx)(o.JO,{icon:"pin",accessibilityLabel:"Pin",color:"subtle",size:12}),(0,S.jsx)(o.xv,{color:"default",inline:!0,size:"100",children:(0,S.jsx)(O.Z,{value:F.repinCount,shortform:!0,shortformMaximumFractionDigits:1})})]})})]})]})})}var Q=t(485019),X=t(352870),J=t(53987),ee=t(223008),ei=t(430323),et=t(501338),ea=t(826067),el=t(829407),en=t(975540),er=t(599611),es=t(94047),eo=t(297852),ed=t(8742),eu=t(404508),ec=t(284367);let ep=0,em="";function eg(e){let{images:i,image_signature:t}=e,a=(null==i?void 0:i["564x"])&&i.orig,{url:l}=null!=a?a:{},{width:n=1,height:r}=null!=a?a:{};return"number"==typeof n&&"number"==typeof r&&n>564&&(r*=564/n,n=564),{width:n,height:r,url:l,imageSignature:t}}let eh=({data:e,index:i,viewParameter:t,productsURL:a})=>{switch(e.type){case"pin":return(0,S.jsx)(ed.ZP,{duploQueryRef:null,viewParameter:t,viewType:72,slotIndex:i,pinId:e.id});case"story":return a&&(0,S.jsx)(_.Z,{story:e,dangerouslySetActionUrl:a,slotIndex:i});default:return null}},e_=({resourceOptions:e})=>{let i=(0,u.ZP)(),{data:t,isAtEnd:a,isFetching:l,fetchMore:n}=(0,p.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,s.useLocation)(),d=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(g.Fragment,{children:[t&&(0,S.jsx)(ec.Z,{customLayoutType:"desktopFlashlight",feedItems:t.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:n,hasNext:a,isLoadingNext:l,refetch:()=>void 0},renderFeedItem:(e,i)=>eh({data:e,index:i,viewParameter:3050,productsURL:d})}),(0,S.jsx)(o.$j,{accessibilityLabel:i._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:l})]})},ey=({resourceOptions:e})=>{let i=(0,u.ZP)(),{data:t,isAtEnd:a,isFetching:l,fetchMore:n}=(0,p.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(g.Fragment,{children:[t&&(0,S.jsx)(ec.Z,{customLayoutType:"desktopFlashlight",feedItems:t||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:n,hasNext:a,isLoadingNext:l,refetch:()=>void 0},renderFeedItem:(e,i)=>eh({data:e,index:i,viewParameter:3334})}),(0,S.jsx)(o.$j,{accessibilityLabel:i._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:l})]})};function ef({pinResponse:e}){let i=(0,u.ZP)(),{isRTL:t}=(0,B.B)(),a=(0,A.Z)(),l=(0,s.useHistory)(),n=(0,s.useLocation)(),r=(0,s.useRouteMatch)(),d=(0,g.useRef)(),{pin:c,isLoaded:p}=e,{pinId:_}=(0,m.Z)(r.params.id||""),y=(0,ea.mB)(n.search),f=(0,h.Z)(n),v=function(e){let i=parseInt(e,10);switch(i){case 1:case 2:case 3:case 4:case 5:case 6:return i;default:return}}(y.cropSource),b=(0,J.hd)(n),{getNormalizedPinImage:E}=(0,ee.Z)({pinKey:null!=c?{type:"deprecated",data:c}:null});if((0,g.useEffect)(()=>{if(!f&&c){let{width:e,height:i}=E(),t=(0,eo.Z)({cropArea:{h:i-2*Q.S,w:e-2*Q.S,x:Q.S,y:Q.S},isProductPage:b,pinId:_,surfaceType:"flashlight"});l.replace(t)}},[E,l,f,b,c,_]),(0,el.Z)(()=>{a({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:_}}),(0,x.My)("unauth.flashlight_page")}),(0,g.useEffect)(()=>(d.current&&em===_&&(d.current.scrollTop=ep),()=>{d.current&&(ep=d.current.scrollTop,em=_)})),!p)return(0,S.jsx)(ei.Z,{view:72,objectId:"",children:(0,S.jsx)(o.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{top:et.Pw}},children:(0,S.jsx)(o.$j,{accessibilityLabel:i._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})})});if(!c)return null;let{image_signature:P,description:I}=c,{width:T,height:w,url:k}=eg(c),R=function({initialCropArea:e,pin:i}){var t,a,l,n;let r;if(e)r={...e};else{let{visual_objects:e}=i,{width:t=1,height:a=1}=eg(i);if(e&&e.length){let{x:i,y:l,w:n,h:s}=e[0];r=(0,er.Z)({cropArea:{x:i,y:l,w:n,h:s},scaledWidth:t,scaledHeight:a})}else{let[e,i]=[t/6,a/6],[l,n]=[t-2*e,a-2*i];r={x:e,y:i,w:l,h:n}}}return{x:Math.floor(null!==(t=r.x)&&void 0!==t?t:0),y:Math.floor(null!==(a=r.y)&&void 0!==a?a:0),w:Math.floor(null!==(l=r.w)&&void 0!==l?l:0),h:Math.floor(null!==(n=r.h)&&void 0!==n?n:0)}}({initialCropArea:f,pin:c}),C=n.state&&n.state.internalNavigation,F=T+20,D=(null!=F?F:1)+24,O={pin_id:_,image_signature:P,crop:(0,en.Z)({cropArea:R,scaledWidth:T,scaledHeight:w}),crop_source:v||5},j={__style:{top:140}};return(0,S.jsx)(ei.Z,{view:72,objectId:"",children:(0,S.jsxs)(g.Fragment,{children:[(0,S.jsxs)(o.xu,{width:"100%",height:60,display:"flex",alignItems:"center",position:"fixed",dangerouslySetInlineStyle:{__style:{top:80}},zIndex:new o.Ry(4),color:"light",children:[(0,S.jsx)(o.xu,{position:"absolute",left:!0,children:(0,S.jsx)(eu.Z,{})}),(0,S.jsx)(o.xu,{flex:"grow",children:(0,S.jsx)(o.X6,{align:"center",size:"400",children:b?i._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):i._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),b?(0,S.jsx)(o.xu,{dangerouslySetInlineStyle:j,position:"relative",children:(0,S.jsx)(ey,{resourceOptions:O})}):(0,S.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(o.xu,{height:"calc(100% - 140px)",marginEnd:3,marginStart:3,width:F,overflow:"auto",position:"fixed",ref:d,zIndex:new o.Ry(4),dangerouslySetInlineStyle:j,children:[(0,S.jsx)(o.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:T,height:w}},children:(0,S.jsxs)(o.zd,{height:w,rounding:2,width:T,children:[(0,S.jsx)(o.Ee,{alt:null!=I?I:"",naturalHeight:null!=w?w:1,naturalWidth:null!=T?T:1,src:null!=k?k:""}),(0,S.jsx)(X.Z,{showAnimation:!C,imageSignature:P,imageSize:{h:w,w:T},initialCropArea:R,customCropper:function({origCrop:e,cropSource:i}){let t=window.location.pathname+window.location.search,a=(0,eo.Z)({cropArea:e,cropSource:null!=i?i:6,isProductPage:b,pinId:_,surfaceType:"flashlight"});(0,x.My)("unauth.flashlight_page.cropper_changed"),a!==t&&_&&l.replace({pathname:`/pin/${_}/visual-search/`,search:(0,es.Z)({cropArea:e,cropSource:null!=i?i:6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},pinKey:{type:"deprecated",data:c},viewParameter:3050,viewType:72})]})}),(0,S.jsx)(o.xu,{position:"relative","data-test-id":"closeupDescription",display:"flex",direction:"column",maxWidth:null!=T?T:1,margin:5,children:(0,S.jsx)(q,{pinKey:{type:"deprecated",data:c},pageType:{isAuth:!1,page:"flashlight"},viewportSize:"narrow"})})]}),(0,S.jsx)(o.xu,{position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:{...j.__style,...t?{marginRight:`${D}px`}:{marginLeft:`${D}px`}}},children:(0,S.jsx)(e_,{resourceOptions:O})})]})]})})}let ev=void 0!==n?n:n=t(676684);function ex(e){return null==e?void 0:e.map(e=>{var i,t,a,l,n,r,s,o;return{name:null!==(i=e.name)&&void 0!==i?i:"",offer_summary:{in_stock:null!==(t=null===(a=e.offerSummary)||void 0===a?void 0:a.inStock)&&void 0!==t&&t},additional_images:null!==(l=function(e){let i=[];return e.forEach(({additionalImagesSpec:e,spec:t})=>{var a;i.push(...null!==(a=function({additionalImagesSpec:e,spec:i}){return null==e?void 0:e.map(e=>{var t,a,l,n,r,s,o;return{canonical_images:{[i]:{height:null!==(t=null===(a=e.canonicalImage)||void 0===a?void 0:a.height)&&void 0!==t?t:0,url:null!==(l=null===(n=e.canonicalImage)||void 0===n?void 0:n.url)&&void 0!==l?l:"",width:null!==(r=null===(s=e.canonicalImage)||void 0===s?void 0:s.width)&&void 0!==r?r:0}},image_signature:null!==(o=e.imageSignature)&&void 0!==o?o:""}})}({additionalImagesSpec:e,spec:t}))&&void 0!==a?a:[])}),i}([{additionalImagesSpec:e.additionalImageOrig,spec:"orig"},{additionalImagesSpec:e.additionalImage736x,spec:"736x"},{additionalImagesSpec:e.additionalImage564x,spec:"564x"},{additionalImagesSpec:e.additionalImage474x,spec:"474x"},{additionalImagesSpec:e.additionalImage236x,spec:"236x"}]))&&void 0!==l?l:[],variant_set:n={variants:null!==(s=null==(o=null==(r=e.variantSet)?void 0:r.variants)?void 0:o.map(e=>{var i,t;return{additional_images:null!==(i=null==(t=e.additionalImages)?void 0:t.map(e=>{var i,t;return{canonical_images:null!==(i=e.canonicalImages)&&void 0!==i?i:{},image_signature:null!==(t=e.imageSignature)&&void 0!==t?t:""}}))&&void 0!==i?i:[]}}))&&void 0!==s?s:[]}}})}function eS(e){var i,t;return{username:null!==(i=null==e?void 0:e.username)&&void 0!==i?i:"",full_name:null!==(t=null==e?void 0:e.fullName)&&void 0!==t?t:"",image_medium_url:null==e?void 0:e.imageMediumUrl,image_small_url:null==e?void 0:e.imageSmallUrl}}function eb(e){var i,t,a;return{id:null!==(i=null==e?void 0:e.entityId)&&void 0!==i?i:"",username:null!==(t=null==e?void 0:e.username)&&void 0!==t?t:"",full_name:null!==(a=null==e?void 0:e.fullName)&&void 0!==a?a:"",image_medium_url:null==e?void 0:e.imageMediumUrl,image_small_url:null==e?void 0:e.imageSmallUrl,type:"user"}}let eE=(0,d.Z)({useGraphQLAdapter:function({pinId:e}){var i,t,a,l,n,s,o,d,u,c,p,m,g,h,_,y,f,v,x,S,b,E,P,I,T,w,k,A,R,C,F,D,O,j,L,N,M,Z,K,z,U;let B=(0,r.useLazyLoadQuery)(ev,{pinId:e}),H=null===(i=B.v3GetPinQuery)||void 0===i?void 0:i.data;if(!H)return null;let $={id:null!==(t=H.entityId)&&void 0!==t?t:"",is_eligible_for_related_products:null!==(a=H.isEligibleForRelatedProducts)&&void 0!==a&&a,description:null!==(l=H.description)&&void 0!==l?l:"",image_signature:null!==(n=H.imageSignature)&&void 0!==n?n:"",images:null!==(s=function(e){let i={};return e.forEach(e=>{let{image:t,spec:a}=e;if(t){var l,n,r,s,o;i[a]={width:null!==(l=t.width)&&void 0!==l?l:0,url:null!==(n=t.url)&&void 0!==n?n:"",type:null!==(r=t.type)&&void 0!==r?r:"",height:null!==(s=t.height)&&void 0!==s?s:0,dominant_color:null!==(o=t.dominantColor)&&void 0!==o?o:""}}}),i}([{image:H.imageOrig,spec:"orig"},{image:H.image736x,spec:"736x"},{image:H.image564x,spec:"564x"},{image:H.image474x,spec:"474x"},{image:H.image236x,spec:"236x"}]))&&void 0!==s?s:{},rich_metadata:{products:null!==(x=ex(null==(v=H.richMetadata)?void 0:v.products))&&void 0!==x?x:[],description:null!==(S=null==v?void 0:v.description)&&void 0!==S?S:"",title:null!==(b=null==v?void 0:v.title)&&void 0!==b?b:"",recipe:E={name:null!==(A=null==(k=null==v?void 0:v.recipe)?void 0:k.name)&&void 0!==A?A:"",from_aggregated_data:null!==(R=null==k?void 0:k.fromAggregatedData)&&void 0!==R&&R,categorized_ingredients:null==k?void 0:null===(C=k.categorizedIngredients)||void 0===C?void 0:C.map(e=>{var i;return{category:null!==(i=e.category)&&void 0!==i?i:""}})},article:{date_published:null!==(P=null==v?void 0:null===(I=v.article)||void 0===I?void 0:I.datePublished)&&void 0!==P?P:""},tutorial:{id:null!==(T=null==v?void 0:null===(w=v.tutorial)||void 0===w?void 0:w.name)&&void 0!==T?T:"",type:"makecardtutorialmetadata"}},rich_summary:{products:null!==(D=ex(null==(F=H.richSummary)?void 0:F.products))&&void 0!==D?D:[],display_name:null!==(O=null==F?void 0:F.displayName)&&void 0!==O?O:""},visual_objects:null!==(o=null==(j=H.visualObjects)?void 0:j.map(e=>{var i,t,a,l,n,r,s,o,d,u,c,p,m;return{detection:null!==(i=e.detection)&&void 0!==i&&i,h:null!==(t=e.h)&&void 0!==t?t:0,index:null!==(a=e.index)&&void 0!==a?a:0,is_stela:null!==(l=e.isStela)&&void 0!==l&&l,label:null!==(n=e.label)&&void 0!==n?n:"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:null!==(r=e.labelX)&&void 0!==r?r:0,label_y:null!==(s=e.labelY)&&void 0!==s?s:0,max_annotation_num_documents:null!==(o=e.maxAnnotationNumDocuments)&&void 0!==o?o:0,score:null!==(d=e.score)&&void 0!==d?d:0,show_on_closeup:null!==(u=e.showOnCloseup)&&void 0!==u&&u,w:null!==(c=e.x)&&void 0!==c?c:0,x:null!==(p=e.w)&&void 0!==p?p:0,y:null!==(m=e.y)&&void 0!==m?m:0}}))&&void 0!==o?o:[],closeup_unified_description:H.closeupUnifiedDescription,grid_title:null!==(d=H.gridTitle)&&void 0!==d?d:"",story_pin_data_id:H.storyPinDataId,repin_count:null!==(u=H.repinCount)&&void 0!==u?u:0,tracked_link:H.trackedLink,link:H.link,domain:null!==(c=H.domain)&&void 0!==c?c:"",closeup_attribution:eS(H.closeupAttribution),link_domain:{official_user:eS(null===(p=H.linkDomain)||void 0===p?void 0:p.officialUser)},native_creator:eb(H.nativeCreator),pinner:eb(H.pinner),origin_pinner:eb(H.originPinner),board:{id:null!==(N=null==(L=H.board)?void 0:L.entityId)&&void 0!==N?N:"",image_thumbnail_url:null!==(M=null==L?void 0:L.imageThumbnailUrl)&&void 0!==M?M:"",name:null!==(Z=null==L?void 0:L.name)&&void 0!==Z?Z:"",privacy:"protected"===(z=null==L?void 0:L.privacy)||"public"===z||"secret"===z?z:"secret",url:null!==(K=null==L?void 0:L.url)&&void 0!==K?K:"",type:"board"},pin_join:{annotations_with_links_array:null!==(m=null==(U=null===(g=H.pinJoin)||void 0===g?void 0:g.annotationsWithLinksArray)?void 0:U.map(e=>({name:e.name,url:e.url})))&&void 0!==m?m:[],visual_annotation:null!==(h=null===(_=H.pinJoin)||void 0===_?void 0:_.visualAnnotation)&&void 0!==h?h:[]},story_pin_data:{metadata:{pin_title:null===(y=H.storyPinData)||void 0===y?void 0:null===(f=y.metadata)||void 0===f?void 0:f.pinTitle}},type:"pin"};return{pin:$,isLoaded:!0}},useLegacyAdapter:function({pinId:e}){let{data:i,isLoaded:t}=(0,p.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}});return{pin:i,isLoaded:t}}});function eP(){let{checkExperiment:e}=(0,c.F)(),i=(0,u.ZP)(),t=(0,s.useRouteMatch)(),{pinId:a}=(0,m.Z)(t.params.id||"");return(0,S.jsx)(eE,{input:e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:a},suspense:{fallback:(0,S.jsx)(o.$j,{accessibilityLabel:i._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:a}},children:({data:e})=>!!e&&(0,S.jsx)(ef,{pinResponse:e})})}},245376:(e,i,t)=>{"use strict";function a(e){return e&&5!==e?4===e?"stela":null:"related_products"}t.d(i,{Z:()=>a})},691720:(e,i,t)=>{"use strict";t.d(i,{D5:()=>s,Hg:()=>l,T_:()=>r,g6:()=>n,w6:()=>a});let a=(e,i)=>Array.from({length:i-e},(i,t)=>t+e),l=508,n=600;function r(e,i){if(!i.startsWith("en"))return e;let t=e.split(" ").map(e=>{let i=e===e.toUpperCase();return i?e:e.toLowerCase()});return t.join(" ")}let s=()=>{let e=new URL(window.location.href),i=e.hostname.replace("www.",""),t=e.pathname;return`${i}${t=t.replace(/\/\d+\//,"/").replace(/\/$/,"")}`}},594379:(e,i,t)=>{"use strict";t.d(i,{ZP:()=>er,Bi:()=>ea,gv:()=>el});var a,l,n,r=t(167912),s=t(616550),o=t(883119),d=t(934494),u=t(898781),c=t(773285),p=t(418614),m=t(280446),g=t(667294),h=t(363957),_=t(862670),y=t(288562),f=t(407043),v=t(485019),x=t(352870),S=t(357998),b=t(223008),E=t(780280),P=t(483205),I=t(430323),T=t(826067),w=t(829407),k=t(975540),A=t(297852),R=t(873476),C=t(18514),F=t(444445),D=t(317254),O=t(784590),j=t(8742),L=t(785893);let N=({data:e,itemIdx:i})=>(0,L.jsx)(j.ZP,{pin:e,pinId:e.id,authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,slotIndex:i,viewParameter:3334,viewType:72});function M({resourceOptions:e}){let i=(0,u.ZP)(),t=(0,O.Z)({name:"VisualLiveSearchProductFeedResource",options:e}),{data:a,isAtEnd:l,isLoaded:n,isFetching:r,fetchMore:s}=t,d=(0,g.useRef)(null);if(!n)return(0,L.jsx)(o.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,L.jsx)(o.$j,{accessibilityLabel:i._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})});let c=Array.isArray(a)?a:null==a?void 0:a.results;return(0,L.jsx)(o.xu,{display:"flex",maxWidth:"100%",ref:d,justifyContent:"center",children:c&&(0,L.jsx)(D.Z,{isAtEndOfFeed:l,itemCount:c.length,children:(0,L.jsx)(C.default,{columnWidth:F.yF,isFetching:r,renderItem:e=>(0,L.jsx)(N,{...e}),items:c,loadItems:()=>{r||l||s()},paddingStyle:"simplified",scrollContainerRef:d,virtualize:!1})})})}var Z=t(361259),K=t(83053),z=t(647945),U=t(362810);let B=void 0!==a?a:a=t(378605),H=e=>({});function $({resourceOptions:e,onSearchIdChange:i,hasSimplifiedPinGridExpLoaded:t,viewParameter:a}){let l=(0,u.ZP)(),n=(0,O.Z)({name:"VisualLiveSearchResource",options:e}),{image_signature:r}=e,{data:s,isFetching:d,fetchMore:c}=n,p=null==s?void 0:s.results,m=null==s?void 0:s.search_identifier;return(0,g.useEffect)(()=>{m&&i(m)},[i,m]),(0,L.jsxs)(o.xu,{children:[p&&m&&(0,L.jsx)(o.xu,{children:(0,L.jsx)(o.Rk,{columnWidth:F.yF,renderItem:({data:e,itemIdx:i})=>(function({data:e,itemIdx:i}){let t=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?(0,L.jsx)(U.Z,{story:e,dangerouslySetActionUrl:t,slotIndex:i}):"pin"===e.type?(0,L.jsx)(j.ZP,{pin:e,pinId:e.id,authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:m,image_signature:r},duploQueryRef:null,slotIndex:i,viewData:{search_identifier:m},viewParameter:a,viewType:72}):null})({data:e,itemIdx:i}),gutterWidth:F.P2,items:p,loadItems:c,minCols:1,scrollContainer:()=>window})}),(0,L.jsx)(o.$j,{accessibilityLabel:l._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:d||!m||!t})]})}function G(e){let{pinKey:i,onSearchIdChange:t,resourceOptions:a,viewParameter:l}=e,{hasSimplifiedPinGridExpLoaded:n}=(0,Z.$)(),{checkExperiment:r}=(0,c.F)(),{data:s}=(0,S.Q)(B,i,{useLegacyAdapter:H}),{anyEnabled:o}=r("web_flashlight_unified_feed"),{visualSearchFlashlightUnifiedResource:d}=(0,z.Z)({resourceOptions:a,setFlashlightSearchId:t});return(0,L.jsx)(g.Fragment,{children:o?(0,L.jsx)(K.Z,{isProductOnlyFeed:!1,pinKey:s,surfaceType:"flashlight",viewParameter:l,viewType:72,visualSearchFlashlightUnifiedResource:d}):(0,L.jsx)($,{hasSimplifiedPinGridExpLoaded:n,onSearchIdChange:t,resourceOptions:a,viewParameter:l})})}var V=t(427806),W=t(697335);let Y=0,q="",Q=void 0!==l?l:l=t(568189),X=e=>({description:e.description,imageSignature:e.image_signature});function J({pinKey:e}){let i=(0,u.ZP)(),t=(0,s.useHistory)(),a=(0,E.B)(),{logContextEvent:l}=(0,f.v)(),{checkExperiment:n}=(0,c.F)(),{anyEnabled:r}=n("web_flashlight_unified_feed"),[d,p]=(0,g.useState)(""),{id:C}=(0,s.useParams)(),{pinId:F}=(0,m.Z)(C||""),{data:D}=(0,S.Q)(Q,e,{useLegacyAdapter:X}),O=D.imageSignature||"",j=(0,R.Z)(),N=(0,s.useLocation)(),Z=(0,T.mB)(N.search),{cropSource:K}=Object.keys(Z).reduce((e,i)=>({...e,[i]:parseInt(Z[i],10)}),{}),z=(0,h.Z)(N),U=N.pathname.includes("/products"),{getInitialCropArea:B}=(0,_.Z)({pinKey:D}),H=B({initialCropArea:z}),$=(0,g.useRef)();(0,g.useEffect)(()=>($.current&&q===F&&($.current.scrollTop=Y),()=>{$.current&&(Y=$.current.scrollTop,q=F)}));let J=K||5,ee=U?"shopping":"flashlight",ei=r&&4===J?3462:3050,{getNormalizedPinImage:et}=(0,b.Z)({pinKey:D,maxWidth:P.RZ});(0,w.Z)(()=>{if(!z&&D){let{width:e,height:i}=et(),a=(0,A.Z)({cropArea:{h:(null!=i?i:1)-2*v.S,w:(null!=e?e:1)-2*v.S,x:v.S,y:v.S},pinId:F,isProductPage:U,surfaceType:"flashlight"});t.replace(a)}r||l({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:F}})});let{width:ea,height:el,url:en}=et(),er={pin_id:F,image_signature:O,crop:(0,k.Z)({cropArea:H,scaledWidth:ea,scaledHeight:el}),crop_source:J,is_shopping:U,entry_source:ee,entrypoint:j},es=N&&N.state&&N.state.internalNavigation,eo=!es,ed=a&&a.isRTL||!1,eu=ea+20,ec=eu+16,ep=U?i._('Shop similar items', 'Header explaining results of flashlight products search', 'Header explaining results of flashlight products search'):i._('More Ideas', 'Header explaining results of flashlight search', 'Header explaining results of flashlight search');return D?(0,L.jsx)(I.Z,{view:72,objectId:d,children:(0,L.jsxs)(g.Fragment,{children:[(0,L.jsx)(V.Z,{text:i._('Visual Search Page', 'pin.flashlight.accessibilityhiddenheading', 'accessibility label for flashlight page')}),(0,L.jsx)(y.Z,{pinId:F,title:!r||r&&(5===J||6===J)?ep:"",variant:"flashlight",viewParameter:ei,viewType:72}),(0,L.jsx)(W.c,{children:e=>{var i;return U?(0,L.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:[(0,L.jsx)(M,{resourceOptions:er}),";"]}):(0,L.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,L.jsx)(o.xu,{bottom:!0,overflow:"auto",position:"fixed",dangerouslySetInlineStyle:{__style:{width:eu,height:"inherit",top:e+60,marginBottom:10}},ref:$,children:(0,L.jsx)(o.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:ea,height:el}},children:(0,L.jsxs)(o.zd,{height:el,rounding:4,width:ea,children:[(0,L.jsx)(o.Ee,{alt:null!==(i=D.description)&&void 0!==i?i:"",naturalHeight:el,naturalWidth:ea,src:en}),(0,L.jsx)(x.Z,{showAnimation:eo,imageSignature:O,imageSize:{h:el,w:ea},initialCropArea:H,pinKey:D,viewParameter:ei})]})})}),(0,L.jsx)(o.xu,{position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:{top:60,marginLeft:ed?void 0:ec,marginRight:ed?ec:void 0}},children:(0,L.jsx)(G,{resourceOptions:er,onSearchIdChange:p,pinKey:D,viewParameter:ei})})]})}})]})}):null}let ee=void 0!==n?n:n=t(490644);function ei(e){var i,t,a;return{width:null!==(i=e.width)&&void 0!==i?i:0,url:null!==(t=e.url)&&void 0!==t?t:"",height:null!==(a=e.height)&&void 0!==a?a:0}}function et(e){return null==e?void 0:e.map(e=>{var i,t,a,l,n;return{additional_images:null!==(i=function(e){let i=[];return e.forEach(({additionalImages:e,spec:t})=>{var a;i.push(...null!==(a=function({additionalImages:e,spec:i}){let t=[];return null==e||e.forEach(e=>{if(e.canonicalImage){var a;t.push({canonical_images:{[i]:ei(e.canonicalImage)},image_signature:null!==(a=e.imageSignature)&&void 0!==a?a:""})}}),t}({additionalImages:e,spec:t}))&&void 0!==a?a:[])}),i}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}]))&&void 0!==i?i:[],variant_set:t={variants:null!==(l=null==(n=null==(a=e.variantSet)?void 0:a.variants)?void 0:n.map(e=>{var i,t;return{additional_images:null!==(i=null==(t=e.additionalImages)?void 0:t.map(e=>{var i,t;return{canonical_images:null!==(i=e.canonicalImages)&&void 0!==i?i:{},image_signature:null!==(t=e.imageSignature)&&void 0!==t?t:""}}))&&void 0!==i?i:[]}}))&&void 0!==l?l:[]}}})}function ea(e){var i,t,a,l,n,o,d,u,c,p,g,h;let{id:_}=(0,s.useParams)(),{pinId:y}=(0,m.Z)(_||""),f=function({pinId:e}){return{query:ee,variables:{pinId:e}}}({pinId:y}),v=(0,r.useLazyLoadQuery)(ee,f.variables),x=null===(i=v.v3GetPinQuery)||void 0===i?void 0:i.data;if(!x)return null;let S={id:null!==(t=x.entityId)&&void 0!==t?t:"",is_eligible_for_related_products:null!==(a=x.isEligibleForRelatedProducts)&&void 0!==a&&a,description:null!==(l=x.description)&&void 0!==l?l:"",image_signature:null!==(n=x.imageSignature)&&void 0!==n?n:"",visual_objects:null!==(o=null==(u=x.visualObjects)?void 0:u.map(e=>{var i,t,a,l,n,r,s,o,d,u,c,p,m,g;return{detection:null!==(i=e.detection)&&void 0!==i&&i,h:null!==(t=e.h)&&void 0!==t?t:0,index:null!==(a=e.index)&&void 0!==a?a:0,is_stela:null!==(l=e.isStela)&&void 0!==l&&l,label:null!==(n=e.label)&&void 0!==n?n:"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:null!==(r=e.labelX)&&void 0!==r?r:0,label_y:null!==(s=e.labelY)&&void 0!==s?s:0,max_annotation_num_documents:null!==(o=e.maxAnnotationNumDocuments)&&void 0!==o?o:0,score:null!==(d=e.score)&&void 0!==d?d:0,show_on_closeup:null!==(u=e.showOnCloseup)&&void 0!==u&&u,title:null!==(c=e.title)&&void 0!==c?c:"",w:null!==(p=e.x)&&void 0!==p?p:0,x:null!==(m=e.w)&&void 0!==m?m:0,y:null!==(g=e.y)&&void 0!==g?g:0}}))&&void 0!==o?o:[],images:null!==(d=function(e){let i={};return e.forEach(e=>{let{image:t,spec:a}=e;t&&(i[a]=ei(t))}),i}([{image:x.imageOrig,spec:"orig"},{image:x.image736x,spec:"736x"},{image:x.image564x,spec:"564x"},{image:x.image474x,spec:"474x"},{image:x.image236x,spec:"236x"}]))&&void 0!==d?d:{},rich_metadata:{products:null!==(p=et(null==(c=x.richMetadata)?void 0:c.products))&&void 0!==p?p:[]},rich_summary:{products:null!==(h=et(null==(g=x.richSummary)?void 0:g.products))&&void 0!==h?h:[]},type:"pin"};return S}function el(e){let{data:i,isLoaded:t}=(0,p.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return t&&i?i:null}let en=(0,d.Z)({useGraphQLAdapter:ea,useLegacyAdapter:el});function er(){let{checkExperiment:e}=(0,c.F)(),i=(0,u.ZP)();return(0,L.jsx)(en,{input:e("auth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,L.jsx)(o.$j,{accessibilityLabel:i._('Loading Pin data', 'authDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,L.jsx)(J,{pinKey:{type:"deprecated",data:e}})})}},215425:(e,i,t)=>{"use strict";t.d(i,{Z:()=>c});var a=t(883119),l=t(988177),n=t(934494),r=t(898781),s=t(773285),o=t(594379),d=t(785893);let u=(0,n.Z)({useGraphQLAdapter:o.Bi,useLegacyAdapter:o.gv});function c(){let{checkExperiment:e}=(0,s.F)(),i=(0,r.ZP)();return(0,d.jsx)(u,{input:e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,d.jsx)(a.$j,{accessibilityLabel:i._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,d.jsx)(l.ZP,{pinKey:{type:"deprecated",data:e}})})}},23195:(e,i,t)=>{"use strict";t.d(i,{Z:()=>j});var a=t(702664),l=t(616550),n=t(558068),r=t(898781),s=t(773285),o=t(784590),d=t(501338),u=t(826067),c=t(280446),p=t(50286),m=t(19121),g=t(307603),h=t(255164),_=t(873476),y=t(883119),f=t(407043),v=t(766935),x=t(444445),S=t(313047),b=t(542554),E=t(829407),P=t(156637),I=t(743203),T=t(679031),w=t(8742),k=t(422946),A=t(404508),R=t(284367),C=t(785893);function F({fixedHeaderOverrideTop:e,handleBackClick:i,inUnifiedFeedExp:t,pageTitle:a,searchResourceOptions:l,visualSearchFlashlightUnifiedResource:n}){var r,s;let{logContextEvent:o}=(0,f.v)(),d=t?40:48,u=t?void 0:-x.D6,{data:c,fetchMore:p,isAtEnd:m,isFetching:g}=n||{},h=(null==c?void 0:c.results)||[],_=h.reduce((e,i)=>"pin"===i.type?[...e,i]:e,[]),F=JSON.stringify({is_product_only_feed:!0}),D={name:"VisualLiveSearchProductFeedResource",options:l};return(0,E.Z)(()=>{let e=(0,v.Z)(()=>{o({event_type:110,view_parameter:3462,view_type:427})},1e3);return t&&window.addEventListener("scroll",e),()=>{t&&window.removeEventListener("scroll",e)}}),(0,C.jsx)(P.Z,{auxData:t?{commerce_data:F}:void 0,viewParameter:3462,viewType:427,children:(0,C.jsxs)(b.default,{hasFixedHeader:!0,children:[(0,C.jsx)(S.FixedHeader,{overrideTop:e,height:t?60:void 0,children:(0,C.jsxs)(y.kC,{alignItems:"center",justifyContent:"between",children:[(0,C.jsx)(y.xu,{display:"flex",justifyContent:"center",alignItems:"center",width:d,height:d,marginStart:u,children:(0,C.jsx)(A.Z,{color:t?"darkGray":void 0,disableRedirect:!0,icon:"arrow-back",onTouch:i,viewType:427,viewParameter:3462,size:t?"sm":void 0})}),(0,C.jsx)(y.X6,{size:"300",accessibilityLevel:1,children:a}),(0,C.jsx)(y.xu,{width:d,marginEnd:u})]})}),t?(0,C.jsx)(R.Z,{feedKey:null!==(r=(0,k.J)("VisualSearchFlashlightUnifiedResource",l))&&void 0!==r?r:"",feedItems:_,pagination:{loadNext:p||(()=>void 0),hasNext:!m,isLoadingNext:g||!1,refetch:()=>void 0},renderFeedItem:(e,i)=>(0,C.jsx)(T.cn,{children:(0,C.jsx)(w.ZP,{auxData:{commerce_data:F},componentType:0,pinId:e.id,slotIndex:i,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:427,duploQueryRef:null,trafficSource:"shop_feed"})})}):(0,C.jsx)(I.ZP,{resourceConfig:D,feedItemProps:{viewParameter:3462,viewType:427},feedKey:null!==(s=(0,k.J)(D.name,D.options))&&void 0!==s?s:"",trafficSource:"shop_feed"})]})})}var D=t(350118);function O(e){let{searchResourceOptions:i}=e,t=(0,o.Z)({name:"VisualSearchFlashlightUnifiedResource",options:i});return(0,C.jsx)(F,{...e,visualSearchFlashlightUnifiedResource:t})}function j(){let{checkExperiment:e}=(0,s.F)(),i=(0,r.ZP)(),t=(0,p.ZP)(),y=(0,l.useHistory)(),{previous:f}=(0,n.Hv)(),v=(0,_.Z)(),x=(0,l.useLocation)(),{isAuth:S}=(0,m.Z)(),b=(0,l.useRouteMatch)(),{pinId:E}=(0,c.Z)(b.params.id||""),{data:P}=(0,o.Z)({name:"PinResource",options:{id:E,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),I=(0,D.S6)()(E),T=(0,a.useSelector)(e=>e.flashlight.cropSource||5);if(!(null!=P?P:I))return null;let{anyEnabled:w}=e("mweb_flashlight_unified_feed"),{cropbox_dimensions:k,crop_source:A,x:R,y:j,w:L,h:N}=(0,u.mB)(x.search),[M,Z,K,z]=k?k.replace(/\{|\}/g,"").split(","):[],U=w?(0,g.Z)({x:M,y:Z,w:K,h:z}):(0,g.Z)({x:R,y:j,w:L,h:N}),B=w?(0,h.Z)(Number(A)):T,H=w?i._('Shop similar', 'mobileFlashlightPage.heading', 'Shop similar items from the visual search image'):i._('Shop similar items', 'mobileFlashlightPage.heading', 'Header explaining results of flashlight products search'),$={fixedHeaderOverrideTop:(0,d.ZP)(t,S),handleBackClick:()=>{if(0===f.length){y.replace(`/pin/${E}/visual-search/`);return}y.goBack()},inUnifiedFeedExp:w,pageTitle:H,searchResourceOptions:{pin_id:E,crop:U,crop_source:B,is_shopping:!0,entry_source:"shopping",entrypoint:v}};return w?(0,C.jsx)(O,{...$}):(0,C.jsx)(F,{...$})}},239682:(e,i,t)=>{"use strict";function a(e,i,t){return{privacy_filter:i?"secret":"public",sort:t||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}t.d(i,{Z:()=>a})},59644:(e,i,t)=>{"use strict";t.d(i,{Z:()=>a});let a=(e,i)=>`${e}:${i||""}`},240265:(e,i,t)=>{"use strict";t.d(i,{O:()=>s,Q:()=>o});var a=t(414327),l=t(59644),n=t(956800);let r=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:i,mixPublicSecret:t,username:a},l)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:i,username:a,page_size:25,group_by:t?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...l?{orbac_subject_id:l}:Object.freeze({})})},o=e=>r.reduce((i,t)=>{let r=[(0,n.N8)("profileBoards",(0,l.Z)(e,t))];return[!0,!1].forEach(i=>{[!0,!1].forEach(l=>{r.push((0,a.jB)(s.name,s.options({username:e,boardOrder:t,mixPublicSecret:i,filterStories:l})))})}),i.concat(r)},[])},254176:(e,i,t)=>{"use strict";t.d(i,{Br:()=>m,Cr:()=>T,K8:()=>v,L1:()=>j,Tq:()=>y,YQ:()=>O,YV:()=>I,ZP:()=>w,aX:()=>k,eo:()=>h,fJ:()=>N,md:()=>g,oG:()=>_,oL:()=>A,of:()=>x,xH:()=>f,xQ:()=>S,xR:()=>D,xk:()=>E,yT:()=>p,zS:()=>L});var a=t(214494),l=t(27255),n=t(186656),r=t(248327),s=t(414327),o=t(239682),d=t(240265),u=t(956800),c=t(492583);function p(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function m(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function g(e,i){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:i}}}function h({viewingUserId:e,viewingUsername:i,boardId:t,boardPinCount:a}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:i,boardId:t,boardPinCount:a}}}let _=(e,i)=>t=>t((0,r.U)("BoardResource",{options:{board_id:e,field_set_key:i}}));function y(e,i,t){return(0,r.U)("BoardResource",{options:{board_id:e,field_set_key:i,...t?{orbac_subject_id:t}:{}}})}function f(e,i,t){return a=>(0,n.Z)({url:`/v3/boards/${e}/merge/${i}/`,method:"POST",data:t?{orbac_subject_id:t}:{}}).then(()=>Promise.all([a(h({boardId:e})),a(y(i,"pin_count")),a((0,u.N8)(c.Z.BOARD_SECTIONS,i))]))}function v(e){return i=>{e&&(0,d.Q)(e).forEach(e=>{i(e)})}}let x=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),S=e=>_(e,"pin_count");function b(e,i){return{type:"BOARD_ARCHIVE",payload:{boardId:e,username:i}}}function E(e,i){return t=>(t(b(e)),a.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:i}).callUpdate())}function P(e){return{type:"BOARD_UNARCHIVE",payload:{boardId:e}}}function I(e,i){return t=>(t(P(e)),a.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:i}).callDelete())}let T=(e,i)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:i}}),w=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function k(e,i,t){let n={name:e,privacy:l.Z.BoardPrivacy.PUBLIC,username:i,...t?{orbac_subject_id:t}:Object.freeze({})};return e=>a.Z.create("BoardResource",n).callCreate().then(t=>{let a=t.resource_response.data;return e(i&&(0,s.jB)("BoardsResource",(0,o.Z)(i,!1))),a})}function A(e={},i,t){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:i},error:t}}let R=(e,i)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:i}}),C=(e,i,t)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:i,viewingUser:t}}),F=(e,i,t,a)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:i,status:t,collaboratingUsers:a}}),D=(e,i,t)=>async l=>{l(R(e,i));let n=await a.Z.create("BoardInviteResource",{board_id:e,invited_user_id:i}).callDelete();return n.resource_response.error||t({event_type:29,object_id_str:e}),n},O=(e,i,t,l,n,r)=>async s=>{var o,d;let u="accepted"===i?"BoardCollaboratorResource":"BoardInviteResource";s(C(e,null!==(o=null==l?void 0:l.id)&&void 0!==o?o:"",t));try{let t=await a.Z.create(u,{board_id:e,field_set_key:"boardEdit",invited_user_id:null!==(d=null==l?void 0:l.id)&&void 0!==d?d:"",...r?{orbac_subject_id:r}:{}}).callDelete();t.resource_response.error||n({event_type:"accepted"===i?25:29,object_id_str:e})}catch(a){s(F(e,t,i,[l]))}},j=(e,i,t,l)=>n=>{let r=a.Z.create("BoardResource",{board_id:t}).callDelete();return n(h({viewingUserId:e,viewingUsername:i,boardId:t,boardPinCount:l})),r},L=(e,i)=>t=>a.Z.create("BoardArchiveResource",{boardId:e}).callUpdate().then(a=>(t((0,u.Qv)("archived-boards",[{id:e,type:"board"}])),t(b(e,i)),a)),N=(e,i)=>t=>a.Z.create("BoardArchiveResource",{boardId:e}).callDelete().then(a=>(t((0,u.Qv)(`profile-boards:${i}`,[{id:e,type:"board"}])),t(P(e)),a))},956800:(e,i,t)=>{"use strict";function a(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function l(e,i){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:i}}}t.d(i,{EX:()=>r,N8:()=>l,Qv:()=>n,_f:()=>a,vX:()=>s});let n=(e,i,t=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:t,items:i}});function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function s(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},447948:(e,i,t)=>{"use strict";function a(e,i){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{id:e,index:i}}}function l(e,i){return{type:"SET_PIN_COMMENTS_DISABLED",payload:{id:e,pinCommentsDisabled:i}}}function n(e,i,t,a,l){return{type:"PIN_SAVE",payload:{id:e,boardId:i,title:t,url:a,localPinId:l}}}function r(e){return{type:"PIN_UNSAVE",payload:{id:e}}}function s(e){return{type:"PIN_SHOW_SUGGESTED_CREATOR_RECS",payload:{id:e,value:!0}}}function o({id:e,text:i,undoAction:t,undoActionOptions:a,undoText:l}){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:i,undoAction:t,undoActionOptions:a,undoText:l}}}function d(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function u(e,i){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:i}}}function c(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function p(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}function m(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function g(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}t.d(i,{Gb:()=>r,I1:()=>d,Ib:()=>c,NA:()=>o,Ur:()=>n,Vw:()=>s,b9:()=>m,i0:()=>p,mO:()=>l,q1:()=>u,yR:()=>a,yj:()=>g})},492583:(e,i,t)=>{"use strict";t.d(i,{Z:()=>a});let a={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},422946:(e,i,t)=>{"use strict";t.d(i,{J:()=>y,Z:()=>E});var a=t(932995),l=t(338739),n=t(648284),r=t(998651),s=t(59644),o=t(483025),d=t(819063),u=t(492583);let c=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>{if((null==e?void 0:e.url)==="/v3/orientation/nux_creator_recommendations/")return"nux-creator-recommendations";if((null==e?void 0:e.url)==="/v3/users/me/interests/"){var i;return`recommended-interests:${null===(i=e.data)||void 0===i?void 0:i.blend_type}`}return""},AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentFeedResource:e=>`aggregated-comments:${e.objectId}`,AggregatedCommentReplyFeedResource:e=>`${u.Z.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardArchiveResource:()=>"archived-boards",BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:()=>"conversations",DidItLikedByResource:e=>`triedit-likes:${e.didItDataId}`,DidItUserFeedResource:e=>`profile-tried:${e.username}`,HolidaySpotlightResource:e=>`holiday-spotlight:${e.storyType}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:()=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedProductFeedResource:e=>"pin"===e.shop_source?`closeup-related-products:${e.pin}`:`related-products:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>{let i=`search:${e.scope}:${e.query}:${e.filters||""}:${e.article||""}`;return e.auto_correction_disabled?`${i}:auto-correction-disabled`:i},BaseSearchResource:e=>{let i=`search:${e.scope}:${e.query}:${e.filters||""}:${e.appliedProductFilters}:${e.article||""}`;return e.auto_correction_disabled?`${i}:auto-correction-disabled`:i},SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,ShoppingFeedModularizedResource:e=>e.saved_products_only?`board-shop-saved:${e.board_id}`:`board-shop-related:${e.board_id}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,SuggestedCreatorFollowsResource:()=>"suggested-creator-follows",StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,IdeasHubTodayArticlesResource:e=>`today-article:${e.interest_id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:e=>`user-recent-activity:${e.filter_type}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VideosFeedResource:()=>"videos-feed",VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,BoardFollowingResource:e=>`board-following:${e.username}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},m={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:u.Z.TRIED_IT_FEED,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:u.Z.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:i}})=>({type:e?u.Z.AGGREGATED_COMMENT_REPLIES:u.Z.AGGREGATED_COMMENTS,id:i,reversed:!0}),BoardFeedResource:({options:{board_id:e}})=>({type:u.Z.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:u.Z.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:u.Z.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:u.Z.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:i}})=>({type:u.Z.PROFILE_BOARDS,id:(0,s.Z)(e,i)}),BaseSearchResource:({options:{auto_correction_disabled:e,appliedProductFilters:i,scope:t,filters:a,query_pin_sigs:l,query:s,user:o},response:d})=>{var c;return{type:u.Z.SEARCH_PINS,id:(0,n.Tb)({appliedProductFilters:i,autoCorrectionDisabled:e,filters:a,query:s,selectedPinImgSig:l,scope:t,user:o}),items:null!==(c=d.resource_response.data)&&void 0!==c&&c.results?(0,r.L)(d.resource_response.data.results).filteredResults:[]}},DidItCommentsResource:({options:{objectId:e}})=>({type:u.Z.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:u.Z.TRIED_IT_FEED,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:u.Z.TODAY_TAB,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:u.Z.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:u.Z.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:u.Z.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:u.Z.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:u.Z.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:i}})=>({type:u.Z.UNIFIED_COMMENTS,id:e,reversed:i}),UserActivityPinsResource:({options:{user_id:e}})=>({type:u.Z.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:i}})=>({type:u.Z.STORY_PINS_FEED,id:i,items:e.resource_response.data||[]})},g=(e,{pinId:i,feedId:t})=>e[t]?{...e,[t]:e[t].filter(e=>!("pin"===e.type&&e.id===i))}:e,h=(e,{pinId:i,feedId:t})=>e[t]?{...e,[t]:[{type:"pin",id:i},...e[t]]}:e,_=(e,{pinId:i,oldFeedId:t,newFeedId:a})=>t===a?e:h(g(e,{pinId:i,feedId:t}),{pinId:i,feedId:a}),y=(e,i)=>e in p?p[e](i):null,f=(e,i)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return i===u.Z.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}},v=(e,i)=>i?`board-section-pins:${i}`:`boardfeed:${e}`,x=(e,i,t)=>{let a=t||o.Z[e];if(a===d.LR)return i.result;if(a===d.sN)return i.result.map(e=>({id:e,schema:"board"}));if(a===d.Gn)return i.result.map(e=>({id:e,schema:"user"}));if(a===d.Ht)return i.result.map(e=>({id:e,schema:"invite"}));if(a===d.fE)return i.result.map(e=>({id:e,schema:"reaction"}));if("object"==typeof a){let e=Object.entries(a).find(([e,i])=>i===d.LR);if(e)return i.result[e[0]]}return null},S=(e,i)=>e.map(e=>{let{id:t,schema:a,type:l}=e;return"home_feed_tabs"===l?e:a?{id:t,type:a,trackingParams:"pin"===a?i.pins[t].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean),b=(e,i,t)=>Object.keys(e).reduce((a,l)=>{let n=e[l]||[],r=n.filter(e=>!(e.type===i&&e.id===t));return n.length!==r.length&&(a[l]=r),a},{...e}),E=(e={},i)=>{switch(i.type){case l.zP:case l.aW:{let{payload:a}=i,{resource:n,options:r,normalizedResponse:s,schema:o}=a;if(s&&n in p){let t=x(n,s,o);if(t&&Array.isArray(t)){let a=p[n](r);if("ShoppingFeedModularizedResource"===n){let{board_id:i,saved_products_only:a}=null!=r?r:{},l=`board-shop-related:${i}`,n=`board-shop-saved:${i}`,o=`board-shop-saved-preview:${i}`,d=[...e[l]||[]],u=[...e[n]||[]],c=[...e[o]||[]],p=S(t,s.entities);return p.forEach(e=>{if(a)u.push(e);else{var t;s.entities.pins&&(null===(t=s.entities.pins[e.id])||void 0===t?void 0:t.board)===i?c.push(e):d.push(e)}}),{...e,[l]:d,[n]:u,[o]:c}}if("BoardToolsFeedResource"===n||"SectionToolsFeedResource"===n)return{...e,[a]:t};{let n=(i.type===l.aW&&e[a]||[]).concat(S(t,s.entities));return{...e,[a]:n}}}}else{var t;let{data:n}=a.response.resource_response;if(!(null!==(t=a.options)&&void 0!==t&&t.redux_normalize_feed))return e;let r=m[a.resource]({options:a.options,response:a.response});if(r){let{type:t,id:a,items:s,reversed:o}=r,d=(s||n||[]).map(e=>f(e,t));o&&(d=d.reverse());let u=`${t}:${a}`,c=e[u];if(c||i.type!==l.aW){let t=c||[],a=d;return i.type===l.aW&&(a=o?d.concat(t):t.concat(d)),{...e,[u]:a}}}}break}case"FEED_ITEM_REORDERED":{let{payload:{feedType:t,feedId:l,itemType:n,targetItemId:r,sourceItemId:s}}=i,o=`${t}:${l}`,d=e[o]||[],c=-1,p=-1;if([u.Z.BOARDFEED,u.Z.BOARD_SECTION_PINS,u.Z.BOARD_SECTIONS,"profileBoards"].includes(t)&&(c=d.findIndex(e=>e.type===n&&e.id===s),p=d.findIndex(e=>e.type===n&&e.id===r)),-1!==c&&-1!==p)return{...e,[o]:(0,a.Z)(d,c,p)};break}case"FEED_ITEMS_REMOVED":{let{payload:{feedType:t,feedId:a,inverseSelection:l,itemType:n,itemIds:r=[]}}=i,s=`${t}:${a}`,o=e[s]||[];if(o&&o.length>0&&(t===u.Z.BOARD_SECTION_PINS||t===u.Z.BOARDFEED)){let i=o.filter(e=>{let i=r.includes(e.id),t=e.type===n&&(l&&!i||!l&&i);return!t}),t=!!i.find(e=>"pin"===e.type);return{...e,[s]:t?i:[]}}if(o&&o.length>0&&t===u.Z.BOARD_SECTIONS){let i=o.filter(e=>{let i=r.includes(e.id);return!(e.type===n&&i)});return{...e,[s]:i}}if(o&&o.length>0&&(t===u.Z.AGGREGATED_COMMENTS||t===u.Z.BOARDLESS_PINS||t===u.Z.PROFILE_PINS_FEED||t===u.Z.STORY_PINS_FEED||t===u.Z.UNIFIED_COMMENTS||t===u.Z.TRIED_IT_FEED||t===u.Z.STORY_PIN_DATA)){let i=o.filter(e=>{let i=r.includes(e.id);return!(e.type===n&&i)});return{...e,[s]:i}}break}case"FEED_ITEMS_ADDED":{let{payload:{feedType:t,feedId:a,itemType:l,itemIds:n=[],prepend:r}}=i,s=`${t}:${a}`,o=e[s]||[];if(o&&(t===u.Z.BOARD_SECTION_PINS||t===u.Z.BOARDFEED||t===u.Z.BOARDLESS_PINS)){let i=n.map(e=>({id:e,type:l})),t=0;"story"===(o[0]||{}).type&&(t=1),"story"===(o[1]||{}).type&&(t=2);let a=[...o.slice(0,t),...i,...o.slice(t)];return{...e,[s]:a}}if(o&&t===u.Z.BOARD_SECTIONS){let i=[...n].reverse().map(e=>({id:e,type:"boardsection"})),t=o?[...i,...o]:[...i];return{...e,[s]:t}}if(t===u.Z.AGGREGATED_COMMENTS||t===u.Z.AGGREGATED_COMMENT_REPLIES||t===u.Z.PROFILE_PINS_FEED||t===u.Z.STORY_PINS_FEED||t===u.Z.UNIFIED_COMMENTS){let i=n.map(e=>({id:e,type:l})),t=o?[...r?i:o,...r?o:i]:i;return{...e,[s]:t}}if(t===u.Z.TRIED_IT_FEED){let i=n.map(e=>({id:e,type:l})),t=o?[...i,...o]:i;return{...e,[s]:t}}break}case"FEED_INVALIDATE":{let{payload:{feedType:t,feedId:a}}=i,l=`${t}:${a}`,n=e[l]||[];if(n)return{...e,[l]:null};break}case"APPEND_FEED_ITEMS":{let{payload:{id:t,items:a,options:l}}=i,n=e[t];if(!n)return{...e,[t]:a};{let i;return i=l.isPrepend?n[0]&&"story"===n[0].type?[].concat(n[0],a,n.slice(1)):a.concat(n):n.concat(a),{...e,[t]:i}}}case"PIN_DELETE":{let{payload:{pinId:t}}=i;return b(e,"pin",t)}case"BOARD_ARCHIVE":{let{payload:{boardId:t,username:a}}=i,l=`profile-boards:${null!=a?a:""}`;if(e[l])return{...e,[l]:e[l].filter(e=>e.id!==t)};break}case"BOARD_UNARCHIVE":{let{payload:{boardId:t}}=i,a="archived-boards";if(e[a])return{...e,[a]:e[a].filter(e=>e.id!==t)};break}case"BOARD_DELETE":{let{payload:{boardId:t}}=i;return b(e,"board",t)}case"BOARD_SECTION_DELETE":{let{payload:{boardSectionId:t}}=i;return b(e,"boardsection",t)}case"PINS_MOVE":{let{payload:{source:t,target:a,pinIds:l,userId:n}}=i,r=t.boardlessPins&&n&&`boardless-pins:${n}`||t.boardId&&v(t.boardId,t.sectionId),s=v(a.boardId,a.sectionId);return l.reduce((e,i)=>_(e,{pinId:i,oldFeedId:r,newFeedId:s}),e)}case"PINS_MOVE_ALL":{let{payload:{source:t,target:a,excludePinIds:l}}=i,n=v(t.boardId,t.sectionId),r=v(a.boardId,a.sectionId),s={...e,[n]:l.map(e=>({type:"pin",id:e}))};return delete s[r],s}case"PIN_EDIT":{let{payload:{pinId:t,boardId:a,sectionId:l="",source:{boardId:n,sectionId:r}}}=i,s=v(n,r),o=v(a,l);return _(e,{pinId:t,oldFeedId:s,newFeedId:o})}case l.AF:if(c.has(i.payload.resource)){let t;let a=i.payload.response.resource_response.data,{board:l}=a;if("quick_saves"===l.layout)t=`boardless-pins:${i.payload.options.user_id}`;else{let e=i.payload.options.section;t=e?`board-section-pins:${e}`:`boardfeed:${l.id}`}if(e[t]){let i={...e},l={id:a.id,type:"pin",trackingParams:null==a?void 0:a.tracking_params};return i[t]=[l].concat(e[t]),i}}if("BoardSectionResource"===i.payload.resource&&i.payload.normalizedResponse){let t=i.payload.normalizedResponse.result,a=i.payload.normalizedResponse.entities.boardsections[t].board,l=`board-sections:${a}`;if(e[l]){let i={...e};return i[l]=[{id:t,type:"boardsection"}].concat(e[l]),i}}if("AggregatedCommentResource"===i.payload.resource&&i.payload.normalizedResponse){let t=i.payload.normalizedResponse.result,a={id:t,type:"aggregatedcomment"},l={...e};for(let t of["aggregated-comments","unified-comments"]){let n=`${t}:${i.payload.options.objectId}`;e[n]&&(l={...l,[n]:[a].concat(l[n])})}return l}if("AggregatedCommentReplyResource"===i.payload.resource&&i.payload.normalizedResponse){let t=`${u.Z.AGGREGATED_COMMENT_REPLIES}:${i.payload.options.objectId}`;return{...e,[t]:[...e[t]||[],{id:i.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===i.payload.resource&&i.payload.normalizedResponse){let{reaction_pin_id:t,reaction_type:a}=i.payload.options;if("reaction"===i.payload.options.action_type){let l=`reactions:${i.payload.options.pin_id}`,n={...e},r={id:`${t}:${i.payload.options.user_id}:${a}`,type:"reaction",trackingParams:void 0};return n[l]=[r].concat(e[l]),n}if("unreaction"===i.payload.options.action_type){let a=`${t}:${i.payload.options.user_id}`;return b(e,"reaction",a)}}break;case"COMPLETE_STORY":{let{payload:{storyId:t}}=i;return b(e,"story",t)}}return e}},761881:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});let a=(e,i)=>"string"==typeof e?e:e(i),l=e=>(i,t)=>i.feeds[a(e,t)],n=e=>l(e)},404508:(e,i,t)=>{"use strict";t.d(i,{Z:()=>_});var a=t(702664),l=t(616550),n=t(883119),r=t(112690),s=t(385740),o=t(898781),d=t(773285),u=t(957161),c=t(867820),p=t(52022),m=t(50286),g=t(709113),h=t(785893);function _({alignIconLeft:e,bgColor:i,color:t,disableRedirect:_=!1,fallbackUrl:y,icon:f="arrow-back",onTouch:v,padding:x,placement:S,shouldUseFallbackUrl:b,size:E="lg",viewParameter:P,viewType:I,fallbackUrlForExp:T}){let w=(0,o.ZP)(),k=(0,m.HG)(),{checkExperiment:A}=(0,d.F)(),R=(0,l.useHistory)(),C=(0,l.useLocation)(),F=(0,a.useSelector)(e=>e.session.isAuthenticated),D=(0,r.Z)(),O=(0,p.Z)(),j=!F&&T&&"/ideas"===y,{viewType:L,viewParameter:N}=(0,s.SU)(),[M,Z]=I?[I,P]:[L,N],K=()=>C.search&&C.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=u.Z.getItem(g.pm);C.key||"/ideas"!==y?(0,c.My)(`pinner_conversion.back_button.${String(null==e?void 0:e[0].pageType)}`):(0,c.My)("pinner_conversion.back_button.no_history"),(0,c.My)(`web_back_button_click.${String(S)}.is_auth_${String(F)}`),O({action:"click",item:"back-button"}),M&&D({view_type:M,view_parameter:Z,element:34,event_type:102}),v&&v(),_||((!C.key||C.state&&"redirect"===C.state.referrer||b)&&y?j?k&&A("web_unauth_backbutton_navigation").anyEnabled?(R.push(T||y),(0,c.My)("web.unauth.back_button.l1interest")):!k&&A("mweb_unauth_backbutton_navigation").anyEnabled?(R.push(T||y),(0,c.My)("mweb.unauth.back_button.l1interest")):R.push(y):R.push(y):C.pathname.includes("/password/reset/")&&K()?R.push("/login/?dismissWebview=true"):R.goBack())};return(0,h.jsx)(n.xu,{"data-test-id":"back-button",children:e?(0,h.jsx)(n.xu,{display:"flex",width:48,height:48,alignItems:"center",marginStart:"cancel"===f?-1:-2,children:(0,h.jsx)(n.hU,{accessibilityLabel:w._('Back', 'navigation button', 'navigation button'),bgColor:i,iconColor:!t&&(!i||["white","lightGray","transparent"].includes(i))?"gray":t,icon:f,onClick:z,padding:"auto"!==x?x:2,size:E})}):(0,h.jsx)(n.hU,{accessibilityLabel:w._('Back', 'navigation button', 'navigation button'),bgColor:i,iconColor:!t&&(!i||["white","lightGray","transparent"].includes(i))?"gray":t,icon:f,onClick:z,padding:"auto"!==x?x:2,size:E})})}},144226:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(883119),l=t(785893);function n({children:e}){return(0,l.jsx)(a.xu,{paddingY:4,children:e})}},12755:(e,i,t)=>{"use strict";t.d(i,{VF:()=>l,pG:()=>a,vc:()=>n});let a=348,l=7,n=4},143649:(e,i,t)=>{"use strict";function a({cropSource:e,viewType:i}){return 2===i?"search":e&&5!==e?4===e?"stela":null:"related_products"}t.d(i,{Z:()=>a})},434788:(e,i,t)=>{"use strict";t.d(i,{Z:()=>eW});var a,l,n=t(616550),r=t(826067),s=t(50286),o=t(19121),d=t(167912),u=t(883119),c=t(934494),p=t(898781),m=t(773285),g=t(42447),h=t(784590),_=t(280446),y=t(667294),f=t(702664),v=t(792182),x=t(407043),S=t(357998),b=t(444445),E=t(558068),P=t(391254),I=t(542554),T=t(276602),w=t(217149),k=t(430323),A=t(501338),R=t(829407);function C(e,i){let t=0,a=!1,l=-1;return e.forEach((e,n)=>{let{x:r=0,y:s=0,h:o=0,w:d=0}=e,u=function(e,i){let{x:t,y:a,w:l,h:n}=e,{x:r,y:s,w:o,h:d}=i,u=Math.max(t,r),c=Math.min(t+l,r+o),p=Math.max(a,s),m=Math.min(a+n,s+d),g=u<c&&p<m?(c-u)*(m-p):0;return g/(l*n+o*d-g)}(i,{x:r,y:s,h:o,w:d});u>=.9&&u>t&&(t=u,a=!0,l=n)}),{isCropAreaOnDotArea:a,dotIndexToHide:l}}var F=t(255164),D=t(156637),O=t(743203),j=t(679031),L=t(643010),N=t(404508),M=t(785893);function Z({handleBackClick:e,viewParameter:i,viewType:t}){let a=(0,L.vs)();return(0,M.jsx)(u.xu,{"data-test-id":"cancelButton",position:"fixed",left:!0,top:!0,margin:2,children:(0,M.jsx)(N.Z,{color:a?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:i,viewType:t})})}var K=t(112690),z=t(458101),U=t(585913),B=t(913574),H=t(49808),$=t(957435),G=t(398789);function V({pinDominantColor:e,url:i,closeupImageWidth:t,closeupImageHeight:a}){let l=(0,p.ZP)();return(0,M.jsx)(G.Z,{alt:l._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:a,naturalWidth:t,placeholder:i,showSpinner:!1,src:i})}let W=e=>{let{alt:i,src:t,top:a,left:l}=e;return(0,M.jsx)(u.xu,{position:"absolute",height:24,width:24,dangerouslySetInlineStyle:{__style:{top:a,left:l}},children:(0,M.jsx)(u.Ee,{alt:i,color:"transparent",naturalHeight:24,naturalWidth:24,src:t})})},Y={backgroundColor:"#000000",opacity:"0.4"};function q({closeupImageUrl:e,closeupImageDims:i,cropArea:{x:t,y:a,w:l,h:n},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:d,onTouchMove:c,onTouchStart:m,pinDominantColor:g,showBackButton:h,viewParameter:_}){let y=(0,p.ZP)(),{closeupImageWidth:f,closeupImageHeight:v}=i,x=Math.floor(v*a),S=Math.floor(f*t),b=Math.floor(v*n),E=Math.floor(f*l),P=S+E,I=x+b;return(0,M.jsxs)(u.xu,{onTouchMove:c,onTouchStart:m,onTouchEnd:d,position:"relative","data-test-id":"cropper-container",children:[(0,M.jsx)(V,{pinDominantColor:g,url:null!=e?e:"",closeupImageWidth:f,closeupImageHeight:v}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:Y},height:x,left:!0,position:"absolute",top:!0,width:"100%"}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:x}},left:!0,height:b,position:"absolute",width:S}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:x,left:P}},height:b,position:"absolute",right:!0}),(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:I}},bottom:!0,left:!0,position:"absolute",width:"100%"}),h&&(0,M.jsx)(Z,{handleBackClick:o,viewParameter:_,viewType:427}),!s&&(0,M.jsxs)(u.xu,{"data-test-id":"CropperHandles",children:[(0,M.jsx)(W,{alt:y._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),src:H,top:x-9,left:S-9}),(0,M.jsx)(W,{alt:y._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),src:$,top:x-9,left:P-15}),(0,M.jsx)(W,{alt:y._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),src:U,top:I-15,left:S-9}),(0,M.jsx)(W,{alt:y._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),src:B,top:I-15,left:P-15})]}),(0,M.jsx)(u.xu,{"data-test-id":"CroppedArea",position:"absolute",rounding:2,height:b+4,width:E+4,dangerouslySetInlineStyle:{__style:{top:x-2,left:S-2,border:r?void 0:"2px solid #ffffff"}}})]})}var Q=t(599611);function X({auxData:e,onClick:i,shouldLogDotRender:t,showNoHalo:a,style:l,viewParameter:n,x:r,y:s}){let o=(0,p.ZP)(),d=(0,K.Z)();return(0,R.Z)(()=>{t&&d({aux_data:e,element:1221,event_type:120,view_parameter:n,view_type:72})}),(0,M.jsx)("div",{"data-test-id":"dot",onClick:i,onKeyPress:i,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...l},"aria-label":o._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),tabIndex:"0",children:(0,M.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:a?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:i?"pointer":"default"}},children:(0,M.jsx)(u.xu,{color:"light",position:"absolute",padding:0,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}}})})})}var J=t(100183);let ee="flashlightDotPop",ei=(0,J.Ll)([`
  ${ee} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),et=e=>{let i=parseFloat((.1*e).toFixed(2));return{animation:`${ee} 0.3s ease-out ${i}s both`}};function ea({closeupImageTop:e,imageHeight:i,imageTop:t,imageWidth:a,onDotTap:l,pinId:n,pinImageSignature:r,setCropArea:s,shouldLogDotRender:o,showNoHalo:d,viewParameter:u,visualObjects:c,visualObjectToHide:p}){let m=(0,K.Z)();return(0,M.jsxs)(y.Fragment,{children:[(0,M.jsx)(P.Z,{unsafeCSS:ei}),c.map((g,h)=>{if(h===p)return null;let{x:_=0,y=0,w:f=0,h:v=0}=g,x={x:_,y,h:v,w:f},S=(0,Q.Z)({cropArea:{x:_,y,w:f,h:v},scaledWidth:a,scaledHeight:i}),b=Math.floor(S.x+S.w/2),E=Math.floor(S.y+t+S.h/2),P=et(h),I={pin_id:n,image_signature:r,visual_objects:JSON.stringify([x]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,M.jsx)(X,{auxData:I,onClick:function(){m({aux_data:I,element:1221,event_type:102,view_parameter:u,view_type:72}),l({cropArea:x,cropSource:4,visualObjects:c}),null==s||s(x)},shouldLogDotRender:o,style:P,x:b,y:E-e,showNoHalo:d,viewParameter:u},JSON.stringify(x))})]})}var el=t(691720);let en={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function er({closeupImageUrl:e,closeupImageDims:i,cropArea:t,handleBackClick:a,handleChangeCloseupImageTop:l,handleCropperChange:n,headerHeight:r,inUnifiedFeedExp:s,pinDominantColor:o,pinId:d,pinImageSignature:c,showBackButton:p,viewParameter:m,visualObjects:g,visualObjectToHide:h}){let _=(0,K.Z)(),f=(0,y.useRef)(),[v,x]=(0,y.useState)(0),[S,b]=(0,y.useState)(0),[E,P]=(0,y.useState)(en.NONE),[I,T]=(0,y.useState)(t),{current:w}=(0,z.Z)(),{x:k,y:A,w:R,h:C}=I,{closeupImageTop:F,closeupImageMinTop:D,closeupImageWidth:O,closeupImageHeight:j,minCropperWidthRatio:L,minCropperHeightRatio:N}=i,Z=r||0,U=(e,i)=>{let t=i-F,a=e-(f.current?f.current.getBoundingClientRect().left:0),l=j*A,n=j*(A+C),r=O*k,s=O*(R+k);if(t>l+12&&t<n-12&&a>r+12&&a<s-12)return en.INSIDE;if(a<=r+12&&a>=r-12&&t>=l+15&&t<=n-15)return en.LEFT_CROPPER;if(a<=s+12&&a>=s-12&&t>=l+15&&t<=n-15)return en.RIGHT_CROPPER;if(a<=s-15&&a>=r+15&&t>=l-12&&t<=l+12)return en.TOP_CROPPER;if(a<=s-15&&a>=r+15&&t>=n-12&&t<=n+12)return en.BOTTOM_CROPPER;if(a<=r-9+24&&a>=r-12&&t>=l-12&&t<=l+24-9)return en.TOP_LEFT_HANDLE;if(a<=s+12&&a>=s-15&&t>=l-12&&t<=l+24-9)return en.TOP_RIGHT_HANDLE;else if(a<=r-9+24&&a>=r-12&&t>=n-15&&t<=n+12)return en.BOTTOM_LEFT_HANDLE;else if(a<=s+12&&a>=s-15&&t>=n-15&&t<=n+12)return en.BOTTOM_RIGHT_HANDLE;else return en.OUTSIDE};return(0,M.jsx)(u.kC,{width:"100vw",justifyContent:"center",children:(0,M.jsxs)(u.xu,{overflow:"hidden",position:"fixed",dangerouslySetInlineStyle:{__style:{top:F,touchAction:"none"}},ref:f,maxWidth:el.g6,width:"100%",children:[(0,M.jsx)(q,{closeupImageUrl:e,closeupImageDims:i,cropArea:I,handleBackClick:a,onTouchEnd:()=>{if(![en.NONE,en.OUTSIDE].includes(E)){let e=E===en.INSIDE?7603:7604;_({event_type:e,view_parameter:m,view_type:72}),n({cropArea:I,cropSource:6,visualObjects:g})}},onTouchMove:e=>{let{clientX:i,clientY:t}=e.touches[0];if(x(i),b(t),E===en.NONE){let e=U(i,t);P(e)}if(null!=L&&null!=N&&null!=D){let e=t-S,a=i-v,n=a/O,r=e/j,s=Math.min(k+R-L,Math.max(0,k+n)),o=R+(k-s),d=Math.min(A+C-N,Math.max(0,A+r)),u=C+(A-d),c=Math.min(1-k,Math.max(L,R+n)),p=Math.min(1-A,Math.max(N,C+r));switch(E){case en.OUTSIDE:l(Math.floor(Math.max(D,Math.min(Z,F+e))));break;case en.INSIDE:T(e=>({...e,x:Math.max(0,Math.min(1-R,k+n)),y:Math.max(0,Math.min(1-C,A+r))}));break;case en.LEFT_CROPPER:T(e=>({...e,x:s,w:o}));break;case en.RIGHT_CROPPER:T(e=>({...e,w:c}));break;case en.TOP_CROPPER:T(e=>({...e,y:d,h:u}));break;case en.BOTTOM_CROPPER:T(e=>({...e,h:p}));break;case en.TOP_LEFT_HANDLE:T({x:s,w:o,y:d,h:u});break;case en.TOP_RIGHT_HANDLE:T(e=>({...e,w:c,y:d,h:u}));break;case en.BOTTOM_LEFT_HANDLE:T(e=>({...e,h:p,x:s,w:o}));break;case en.BOTTOM_RIGHT_HANDLE:T(e=>({...e,h:p,w:c}))}}},onTouchStart:e=>{let{clientX:i,clientY:t}=e.touches[0];x(i),b(t),P(en.NONE)},pinDominantColor:o,showBackButton:p,viewParameter:m}),!!g.length&&0!==j&&0!==O&&(0,M.jsx)(u.xu,{"data-test-id":"FlashlightDots",children:(0,M.jsx)(ea,{closeupImageTop:F,imageHeight:j,imageTop:F,imageWidth:O,onDotTap:n,pinId:d,pinImageSignature:c,setCropArea:T,shouldLogDotRender:!w,showNoHalo:s,viewParameter:m,visualObjects:g,visualObjectToHide:h})})]})})}var es=t(427806),eo=t(8742);let ed=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var eu=t(884183),ec=t(422946),ep=t(761881),em=t(284367),eg=t(594736),eh=t(984225),e_=t(124580),ey=t(780280),ef=t(223815),ev=t(867820),ex=t(245376);function eS(e,i,t){var a;return(i="symbol"==typeof(a=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,i||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?a:String(a))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let eb={modal:{baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}}},eE={NONE:0,UP:1,DOWN:2};class eP extends y.Component{constructor(...e){super(...e),eS(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:eE.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),eS(this,"onTouchStart",e=>{let{clientY:i}=e.touches[0];this.setState({startY:i,shouldAnimate:!1,scrollDirection:eE.NONE})}),eS(this,"onTouchMove",e=>{let{clientY:i}=e.touches[0],{startY:t,currentDistanceFromTop:a}=this.state,{canMoveModal:l,maxDistanceFromTop:n}=this.props,r=i-t;l&&void 0!==n&&(r>0&&a>=0&&a<n&&window.scrollY<=0||r<0&&a<=n&&a>=0)&&this.setModalPosition(i)}),eS(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:i,canMoveModal:t}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===eE.DOWN?(this.header&&e_.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,ev.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===eE.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:t,currentDistanceFromTop:i||0,shouldAnimate:!0,isAtTop:!0}),this.header&&e_.Z.addObstruction("top",this.header),e&&(0,ev.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),eS(this,"handleHandleMove",e=>{let{clientY:i}=e.touches[0],{canMoveModal:t,maxDistanceFromTop:a,minDistanceFromTop:l}=this.props,{startY:n,currentDistanceFromTop:r}=this.state;t&&r<=(l||0)&&i-n>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:a,isAtTop:!1,scrollDirection:eE.NONE,shouldAnimate:!0,startY:0}))}),eS(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:i,entryPoint:t,canMoveModal:a}=this.props,{currentDistanceFromTop:l,scrollDirection:n}=this.state;n===eE.NONE&&(l===e?(this.setState({canScrollOnChildren:a,currentDistanceFromTop:i||0,shouldAnimate:!0,isAtTop:!0}),(0,ev.My)(`mweb.${t}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,ev.My)(`mweb.${t}.sliding_modal.header_touch.snap_to_bottom`)))}),eS(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:i}=this.state,{onDismiss:t,logContextEvent:a,maxDistanceFromTop:l,viewParameter:n,viewType:r}=this.props;e.stopPropagation(),t&&(a({aux_data:{commerce_data:JSON.stringify({snapped_top:0===i})},element:75,event_type:102,view_parameter:n,view_type:r}),this.setState({currentDistanceFromTop:l,startY:0,scrollDirection:eE.NONE},()=>t(e)))}),eS(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:i,shouldAnimate:t,canScrollOnChildren:a}=this.state,{baseStyles:l}=eb.modal;return{...l,animation:"modalReveal 0.3s ease-out both",position:a?"absolute":"fixed",top:i>-1?i:void 0,bottom:0,width:"100vw",...e&&t?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),eS(this,"setModalPosition",e=>{let{startY:i,currentDistanceFromTop:t}=this.state,{maxDistanceFromTop:a,snapToEndThreshold:l,entryPoint:n}=this.props;if(a){let r=e-i,s=Math.floor("CloseupShop"===n||"CloseUpMainPinDrawer"===n?Math.max(0,t+r):Math.min(a,Math.max(0,t+r))),o=eE.NONE;void 0!==l&&l>=0&&(r<0?o=s>Math.floor((1-l)*a)?eE.DOWN:eE.UP:r>0&&(o=s>Math.floor(l*a)?eE.DOWN:eE.UP)),this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&e_.Z.pause()}componentDidUpdate(e,i){let{domainFilters:t,priceFilters:a,cropSource:l,isOpen:n,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:d,entryPoint:u}=this.props,{currentDistanceFromTop:c}=this.state;if(n&&!e.isOpen?e_.Z.pause():!n&&e.isOpen&&e_.Z.resume(),"CloseUpMainPinDrawer"===u&&s<e.maxDistanceFromTop&&c>s&&this.handleHeaderTouch(),i.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&c===(d||0)&&o&&o(!0),t&&a&&(!(0,eg.ZP)(t,e.domainFilters)||!(0,eg.ZP)(a,e.priceFilters))){let e=(0,ex.Z)(l);r({event_type:13,view_parameter:"related_products"===e?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&e_.Z.removeObstruction("top",this.header),e&&e_.Z.resume()}render(){let{children:e,headerChildren:i,heading:t,inUnifiedFeedExp:a,isOpen:l,isRTL:n,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:o,showHandle:d}=this.props,{headerHeight:c,canScrollOnChildren:p}=this.state,m=!p&&a?"32px 32px 0 0":"0";return l?(0,M.jsx)(ef.Z,{children:(0,M.jsx)(u.xu,{role:"dialog","aria-label":t,children:(0,M.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:m}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,M.jsxs)(u.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,M.jsxs)(u.Le,{top:c||0,children:[d&&(0,M.jsx)(u.xu,{"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:m}},onTouchMove:this.handleHandleMove,children:eh.Z}),!s&&(0,M.jsxs)(u.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,M.jsxs)(u.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,M.jsx)(u.kC,{alignItems:"center",justifyContent:"start",children:(0,M.jsx)(u.hU,{accessibilityLabel:r||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,M.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:i}){let t=i?"marginRight":"marginLeft",a=i?"marginLeft":"marginRight";return e?{[t]:38,[a]:50,marginTop:15,marginBottom:15}:{[t]:-10,[a]:50,marginTop:15,marginBottom:15}}({isRTL:n})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,M.jsx)(u.X6,{align:"center",size:"400",accessibilityLevel:2,children:t})})]}),i||null,!o&&(0,M.jsx)(u.iz,{})]})]}),(0,M.jsx)(u.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function eI(e){let i=(0,p.ZP)(),t=(0,K.Z)(),{isRTL:a}=(0,ey.B)();return(0,M.jsx)(eP,{...e,i18n:i,isRTL:a,logContextEvent:t})}let eT=`
  html, body {
    overscroll-behavior: none;
  }
`;function ew(){return Math.min(el.g6,window.innerWidth)}function ek(e,i){return Math.floor(ew()/i*e)}function eA(e,i){let t=0,a=0,l=0;if(e&&e.imageSpec_736x){var n,r,s,o;let i=e?e.imageSpec_736x:null;t=ew(),a=ek(null!==(n=null==i?void 0:i.height)&&void 0!==n?n:1,null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1),l=function(e,i){let t=Math.floor(.6*window.innerHeight);return Math.min(t,ek(e,i))}(null!==(s=null==i?void 0:i.height)&&void 0!==s?s:1,null!==(o=null==i?void 0:i.width)&&void 0!==o?o:1)}return{closeupImageWidth:t,closeupImageHeight:a,closeupImageMinTop:l-a,closeupImageTop:i||0,minCropperWidthRatio:t?50/t:0,minCropperHeightRatio:a?50/a:0,modalTop:l}}function eR(e,i,t,a){let l=t?Number(t):.4,n=a?Number(a):.1;e>0&&i>0&&(t||(l=(i-2*i*.1)/e),a||(n=.1*i/e));let r={h:l,y:n};return r}let eC=(0,ep.Z)(e=>`visual-search:${e}`);function eF({cropArea:e,cropSource:i,headerHeight:t,inUnifiedFeedExp:a,pin:l,pinId:r,queryH:s,queryY:d,searchResourceOptions:c,setCropSource:g,setState:h,state:_,visualSearchFlashlightUnifiedResource:S}){var A,F,L,N,K,z;let U=(0,T.E)(),B=(0,p.ZP)(),{logContextEvent:H}=(0,x.v)(),$=(0,f.useDispatch)(),G=(0,n.useHistory)(),{previous:V}=(0,E.Hv)(),{checkExperiment:W}=(0,m.F)(),Y=(0,n.useLocation)(),{isAuth:q}=(0,o.Z)(),{width:Q=0}=(0,v.Z)()||{},X=(null!==(A=null==l?void 0:l.visualObjects)&&void 0!==A?A:[]).filter(e=>e.isStela),J=(null!==(F=null==l?void 0:l.visualObjects)&&void 0!==F?F:[]).filter(e=>!!e.label),ee=X.length>0||J.length>0,ei=ee&&(W("mweb_flashlight_show_more_stela_dots").anyEnabled?X:J)||[],et=ei.map(e=>{let{isStela:i,title:t,label:a,labelId:l,labelX:n,labelY:r,maxAnnotationNumDocuments:s,score:o,showOnCloseup:d,x:u,y:c,h:p,w:m}=e;return{is_stela:null!=i&&i,title:null!=t?t:"",label:null!=a?a:"",label_id:null!=l?l:"",label_x:null!=n?n:0,label_y:null!=r?r:0,max_annotation_num_documents:null!=s?s:0,score:null!=o?o:0,show_on_closeup:null!=d&&d,x:null!=u?u:0,y:null!=c?c:0,h:null!=p?p:0,w:null!=m?m:0}}),[ea,el]=(0,y.useState)(C(et,e)),{isCropAreaOnDotArea:en,dotIndexToHide:ep}=ea,eg=e=>$((0,eu.By)(e)),eh=e=>$(ed(e)),e_=(0,f.useSelector)(e=>eC(e,r)),{data:ey,fetchMore:ef,isAtEnd:ev,isFetching:ex,isLoaded:eS}=S||{},eb=(null==ey?void 0:ey.results)||[],eE=eb.find(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type),eP=eb.filter(e=>"pin"===e.type),ew=null==eE?void 0:eE.action,{url:ek=`/pin/${r}`,title:eF=""}=ew||{},eD=B._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.'),eO=B._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),ej=B._('Visual search', 'Visual search results', 'Visual search results'),eL=a&&(4===i||en)?3462:3050,eN=JSON.stringify({is_product_only_feed:!1}),{closeupImageWidth:eM,modalTop:eZ}=_.closeupImageDims,eK=null!==(L=null==l?void 0:null===(N=l.imageSpec_736x)||void 0===N?void 0:N.url)&&void 0!==L?L:"",ez=Q-60<eM&&a;function eU(){H({component:14339,element:179,event_type:102,view_parameter:eL,view_type:72})}function eB(){if(0===V.length){G.replace(`/pin/${r}/`);return}G.goBack()}let[eH,e$]=(0,y.useState)(0),[eG,eV]=(0,y.useState)(0),[eW,eY]=(0,y.useState)(!1),[eq,eQ]=(0,y.useState)(!1),[eX,eJ]=(0,y.useState)(void 0);function e0(){eQ(!1),eY(!1),eJ(void 0)}function e1(e,i){"vertical"!==i&&e.stopPropagation()}let e4=!!l,e2=(0,y.useMemo)(()=>eA(l,t),[null==l?void 0:l.entityId,t]);return((0,y.useEffect)(()=>{if(e4){let{closeupImageHeight:e,modalTop:i=0}=e2,t=eR(e,i,Number(s),Number(d));h(e=>({...e,closeupImageDims:e2,...t}))}},[e4,e2]),(0,y.useEffect)(()=>{(e_&&e_.length>0||a&&eS)&&U&&U.markConstraintComplete("VisualSearchFeedLoaded")}),(0,R.Z)(()=>{eh(i)}),l&&0!==eZ)?(0,M.jsxs)(y.Fragment,{children:[(0,M.jsx)(P.Z,{unsafeCSS:eT}),(0,M.jsx)(D.Z,{auxData:a?{commerce_data:eN}:void 0,viewParameter:a?3462:3050,viewType:72,children:(0,M.jsx)(k.Z,{view:72,children:(0,M.jsxs)(I.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,M.jsx)(es.Z,{text:B._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,M.jsx)(u.xu,{width:"100vw",height:"100vh",color:"dark"}),(0,M.jsx)(er,{closeupImageUrl:eK,closeupImageDims:_.closeupImageDims,cropArea:e,handleBackClick:eB,handleChangeCloseupImageTop:function(e){h(i=>({...i,closeupImageDims:{...i.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:i,visualObjects:t}){eh(i),eg(r),el(C(t,e)),g(i),h(i=>({...i,...e})),G.replace(`/pin/${r}/visual-search/?x=${e.x}&y=${e.y}&h=${e.h}&w=${e.w}&cropSource=${i}`)},headerHeight:t,inUnifiedFeedExp:a,pinDominantColor:l.dominantColor||"#efefef",pinId:r,pinImageSignature:l.imageSignature,showBackButton:ez,viewParameter:eL,visualObjects:et,visualObjectToHide:ep}),!ez&&a&&(0,M.jsx)(Z,{handleBackClick:eB,viewParameter:eL,viewType:427}),(0,M.jsxs)(eI,{canMoveModal:!0,cropSource:i,entryPoint:"flashlight",headerHeight:t,heading:ej,inUnifiedFeedExp:a,isOpen:!0,location:Y,maxDistanceFromTop:eZ||0,minDistanceFromTop:q?60:t,mobileAccessibilityCloseIconLabel:B._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:a,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eB,pinId:r,shouldSnapToEnds:!0,showHandle:a,snapToEndThreshold:.3,viewParameter:eL,viewType:72,children:[(0,M.jsx)(u.$j,{accessibilityLabel:B._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:a&&!eS}),a&&eS&&(0,M.jsxs)(y.Fragment,{children:[eE&&(0,M.jsxs)(y.Fragment,{children:[(0,M.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,M.jsx)(u.Tg,{href:ek,onTap:({event:e})=>{e.stopPropagation(),eU()},tapStyle:"compress",children:(0,M.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:eD})}),(0,M.jsx)(u.I_,{accessibilityLabel:eF||B._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:ek,icon:"arrow-forward",iconColor:"darkGray",onClick:eU,size:"sm"})]}),(0,M.jsx)(u.xu,{onTouchStart:function(e){let{clientX:i,clientY:t}=e.touches[0];e$(i),eV(t),e0()},onTouchMove:function(e){let{clientX:i,clientY:t}=e.touches[0];Math.abs(t-eG)>10&&eY(!0),Math.abs(i-eH)>10&&eQ(!0),eq&&eW?eJ(e=>e||"vertical"):eq?eJ(e=>e||"horizontal"):eW?eJ(e=>e||"vertical"):eJ(void 0),e1(e,eX)},onTouchEnd:function(e){e1(e,eX),e0()},dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},children:(0,M.jsx)(w.default,{component:14339,disableHeader:!0,story:eE,storyGraphqlRef:null,surface:"ShoppingDynamicHeightGrid",view:72,viewParameter:3462})})]}),(0,M.jsx)(u.xu,{marginBottom:3,paddingX:4,children:(0,M.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:eO})}),(0,M.jsx)(u.xu,{color:"default",paddingX:b.D6,dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},children:(0,M.jsx)(em.Z,{feedKey:null!==(K=(0,ec.J)("VisualSearchFlashlightUnifiedResource",c))&&void 0!==K?K:"",feedItems:eP,pagination:{loadNext:ef||(()=>void 0),hasNext:!ev,isLoadingNext:ex||!1,refetch:()=>void 0},renderFeedItem:(e,i)=>(0,M.jsx)(j.cn,{children:(0,M.jsx)(eo.ZP,{auxData:{commerce_data:eN},componentType:0,pinId:e.id,slotIndex:i,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:72,duploQueryRef:null})})})})]}),!a&&(0,M.jsx)(u.xu,{color:"default",paddingX:b.D6,children:(0,M.jsx)(O.ZP,{resourceConfig:{name:"VisualLiveSearchResource",options:c},feedItemProps:{viewParameter:3050,viewType:72},feedKey:null!==(z=(0,ec.J)("VisualLiveSearchResource",c))&&void 0!==z?z:"",trafficSource:"flashlight"})})]})]})})})]}):null}function eD(e){let{searchResourceOptions:i}=e,t=(0,h.Z)({name:"VisualSearchFlashlightUnifiedResource",options:i});return(0,M.jsx)(eF,{...e,visualSearchFlashlightUnifiedResource:t})}let eO=void 0!==a?a:a=t(781426),ej=e=>{var i;return{dominantColor:e.dominant_color,imageSignature:e.image_signature,imageSpec_736x:(null===(i=e.images)||void 0===i?void 0:i["736x"])&&{height:e.images["736x"].height,url:e.images["736x"].url,width:e.images["736x"].width},trackingParams:e.tracking_params,visualObjects:e.visual_objects&&e.visual_objects.map(e=>({isStela:e.is_stela,label:e.label,detection:e.detection,index:e.index,labelId:null==e.label_id?e.label_id:String(e.label_id),labelX:e.label_x,labelY:e.label_y,maxAnnotationNumDocuments:e.max_annotation_num_documents,score:e.score,showOnCloseup:e.show_on_closeup,title:e.title,x:e.x,y:e.y,h:e.h,w:e.w})),entityId:e.id}};function eL({pinKey:e}){let{checkExperiment:i}=(0,m.F)(),{anyEnabled:t}=i("mweb_flashlight_unified_feed"),a=(0,n.useRouteMatch)(),{pinId:l}=(0,_.Z)(a.params.id||""),d=(0,n.useLocation)(),u=(0,r.mB)(d.search),{cropSource:c,x:p,y:g,h,w:f}=u,{isAuth:v}=(0,o.Z)(),x=(0,s.ZP)(),b=!v&&(0,A.x9)(x)||void 0,{data:E}=(0,S.Q)(eO,e,{useLegacyAdapter:ej}),[P,I]=(0,y.useState)(()=>{let e=eA(E,b);e.closeupImageTop=0;let{closeupImageHeight:i,modalTop:t=0}=e,a=eR(i,t,Number(h),Number(g));return{closeupImageDims:e,x:p?Number(p):.1,w:f?Number(f):.8,y:a.y,h:a.h}}),[T,w]=(0,y.useState)(()=>{let e=(0,F.Z)(Number(c));return e||(p&&g&&h&&f?6:5)}),k={x:P.x,y:P.y,w:P.w,h:P.h},R={cropArea:k,cropSource:T,headerHeight:b,inUnifiedFeedExp:t,pin:E,pinId:l,queryH:h,queryY:g,searchResourceOptions:{pin_id:l,crop:k,crop_source:T,is_shopping:!1,entry_source:"flashlight",entrypoint:null},setCropSource:w,setState:I,state:P};return t?(0,M.jsx)(eD,{...R}):(0,M.jsx)(eF,{...R})}var eN=t(350118);let eM=void 0!==l?l:l=t(43027);function eZ(e){var i,t,a;return{width:null!==(i=e.width)&&void 0!==i?i:0,url:null!==(t=e.url)&&void 0!==t?t:"",height:null!==(a=e.height)&&void 0!==a?a:0}}function eK(e){return null==e?void 0:e.map(e=>{var i,t;return{id:null!==(i=e.itemId)&&void 0!==i?i:"",additional_images:null!==(t=function(e){let i=[];return e.forEach(({additionalImages:e,spec:t})=>{var a;i.push(...null!==(a=function({additionalImages:e,spec:i}){let t=[];return null==e||e.forEach(e=>{if(e.canonicalImage){var a;t.push({canonical_images:{[i]:eZ(e.canonicalImage)},image_signature:null!==(a=e.imageSignature)&&void 0!==a?a:""})}}),t}({additionalImages:e,spec:t}))&&void 0!==a?a:[])}),i}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}]))&&void 0!==t?t:[]}})}function ez(e){let i={};return e.forEach(({image:e,spec:t})=>{e&&(i[t]=eZ(e))}),i}let eU=(0,c.Z)({useGraphQLAdapter:function({pinId:e}){var i,t,a,l,n,r,s,o,u,c,p,m,g,h,_;let y=(0,d.useLazyLoadQuery)(eM,{pinId:e}),f=null===(i=y.v3GetPinQuery)||void 0===i?void 0:i.data;if(!f)return null;let v={id:null!==(t=f.entityId)&&void 0!==t?t:"",dominant_color:null!==(a=f.dominantColor)&&void 0!==a?a:"",image_signature:null!==(l=f.imageSignature)&&void 0!==l?l:"",visual_objects:null!==(n=null==(s=f.visualObjects)?void 0:s.map(e=>{var i,t,a,l,n,r,s,o,d,u,c,p,m,g;return{detection:null!==(i=e.detection)&&void 0!==i&&i,h:null!==(t=e.h)&&void 0!==t?t:0,index:null!==(a=e.index)&&void 0!==a?a:0,is_stela:null!==(l=e.isStela)&&void 0!==l&&l,label:null!==(n=e.label)&&void 0!==n?n:"",label_id:null!==(r=e.labelId)&&void 0!==r?r:"",label_x:null!==(s=e.labelX)&&void 0!==s?s:0,label_y:null!==(o=e.labelY)&&void 0!==o?o:0,max_annotation_num_documents:null!==(d=e.maxAnnotationNumDocuments)&&void 0!==d?d:0,score:null!==(u=e.score)&&void 0!==u?u:0,show_on_closeup:null!==(c=e.showOnCloseup)&&void 0!==c&&c,w:null!==(p=e.x)&&void 0!==p?p:0,x:null!==(m=e.w)&&void 0!==m?m:0,y:null!==(g=e.y)&&void 0!==g?g:0}}))&&void 0!==n?n:[],images:null!==(r=ez([{image:f.imageOrig,spec:"orig"},{image:f.image736x,spec:"736x"},{image:f.image564x,spec:"564x"},{image:f.image474x,spec:"474x"},{image:f.image236x,spec:"236x"}]))&&void 0!==r?r:{},rich_metadata:{products:null!==(u=eK(null==(o=f.richMetadata)?void 0:o.products))&&void 0!==u?u:[]},rich_summary:{products:null!==(p=eK(null==(c=f.richSummary)?void 0:c.products))&&void 0!==p?p:[]},carousel_data:{carousel_slots:null!==(g=null==(_=null==(m=f.carouselData)?void 0:m.carouselSlots)?void 0:_.map(e=>{var i,t;return{image_signature:null!==(i=e.imageSignature)&&void 0!==i?i:"",images:null!==(t=ez([{image:e.imageOrig,spec:"orig"},{image:e.image736x,spec:"736x"},{image:e.image564x,spec:"564x"},{image:e.image474x,spec:"474x"},{image:e.image236x,spec:"236x"}]))&&void 0!==t?t:{}}}))&&void 0!==g?g:[],index:null!==(h=null==m?void 0:m.index)&&void 0!==h?h:0},type:"pin"};return{pin:v}},useLegacyAdapter:function({pinId:e}){let{data:i}=(0,h.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),t=(0,eN.S6)()(e),a=null!=i?i:t;return a?{pin:a}:null}});function eB(){let{checkExperiment:e}=(0,m.F)(),i=(0,p.ZP)(),t=(0,n.useRouteMatch)(),{pinId:a}=(0,_.Z)(t.params.id||"");return(0,M.jsx)(eU,{input:e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:a},suspense:{fallback:(0,M.jsx)(u.$j,{accessibilityLabel:i._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:a}},children:({data:e})=>!!e&&(0,M.jsx)(g.Z,{constraints:["VisualSearchFeedLoaded"],surface:"flashlight",children:(0,M.jsx)(eL,{pinKey:null!=e.pin?{type:"deprecated",data:e.pin}:null})})})}var eH=t(272984),e$=t(594379),eG=t(215425),eV=t(23195);let eW=function(){let e=(0,s.HG)(),i=(0,o.Z)(),t=(0,n.useLocation)(),{surfaceType:a}=(0,r.mB)(t.search);return e?i.isAuth?["stela","stl"].includes(a)?(0,M.jsx)(eG.Z,{}):(0,M.jsx)(e$.ZP,{}):(0,M.jsx)(eH.Z,{}):t.pathname.includes("/products/")?(0,M.jsx)(eV.Z,{}):(0,M.jsx)(eB,{})}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"},204942:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(383997);function l(e,i,t){return(i=(0,a.Z)(i))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}},601413:(e,i,t)=>{"use strict";t.d(i,{Z:()=>n});var a=t(204942);function l(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,a)}return t}function n(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?l(Object(t),!0).forEach(function(i){(0,a.Z)(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}},383997:(e,i,t)=>{"use strict";t.d(i,{Z:()=>l});var a=t(671002);function l(e){var i=function(e,i){if("object"!=(0,a.Z)(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,i||"default");if("object"!=(0,a.Z)(l))return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==(0,a.Z)(i)?i:String(i)}},671002:(e,i,t)=>{"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.d(i,{Z:()=>a})}},e=>{var i=i=>e(e.s=i);e.O(0,[97270,83119,16550,26067,17492,48327,18555,50040,8575,99961,90123,23019,28090,38230,81505,43203,16142,8151,51531,31600,83485,91846,22517],()=>i(269458)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-fe95849c7568d600.mjs.map